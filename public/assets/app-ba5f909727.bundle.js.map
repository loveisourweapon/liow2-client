{"version":3,"sources":["public/assets/node_modules/browser-pack/_prelude.js","app.bundle.js","public/assets/app/components/app/AppCtrl.js","public/assets/app/components/app/app.html","public/assets/app/components/app","public/assets/app/components/deed/DeedCtrl.js","public/assets/app/components/deed/deed.html","public/assets/app/components/deed/index.js","public/assets/app/components/group/GroupCtrl.js","public/assets/app/components/group/group.html","public/assets/app/components/group/index.js","public/assets/app/components/home/HomeCtrl.js","public/assets/app/components/home/home.html","public/assets/app/components/home/index.js","public/assets/app/components/jumbotron/JumbotronCtrl.js","public/assets/app/components/jumbotron/index.js","public/assets/app/components/jumbotron/jumbotron.html","public/assets/app/components/navbar/NavbarCtrl.js","public/assets/app/components/navbar/index.js","public/assets/app/components/navbar/navbar.html","public/assets/app/components/user/UserCtrl.js","public/assets/app/components/user/index.js","public/assets/app/components/user/user.html","public/assets/app/components/videotron/index.js","public/assets/app/components/videotron/videotron.html","public/assets/app/components/welcome/WelcomeCtrl.js","public/assets/app/components/welcome/index.js","public/assets/app/config/index.js","public/assets/app/filters/lodash.js","public/assets/app/services/Act.js","public/assets/app/services/Alertify.js","public/assets/app/services/Campaign.js","public/assets/app/services/Deed.js","public/assets/app/services/Group.js","public/assets/app/services/Modal/campaign-edit/CampaignEditCtrl.js","public/assets/app/services/Modal/campaign-edit/campaign-edit.html","public/assets/app/services/Modal/deed-preview/DeedPreview.js","public/assets/app/services/Modal/deed-preview/deed-preview.html","public/assets/app/services/Modal/group-edit/GroupEditCtrl.js","public/assets/app/services/Modal/group-edit/group-edit.html","public/assets/app/services/Modal/index.js","public/assets/app/services/Modal/login/LoginCtrl.js","public/assets/app/services/Modal/login/login.html","public/assets/app/services/User.js","public/assets/node_modules/block-elements/index.js","public/assets/node_modules/collapse-whitespace/lib/whitespace.js","public/assets/node_modules/to-markdown/index.js","public/assets/node_modules/to-markdown/lib/gfm-converters.js","public/assets/node_modules/to-markdown/lib/md-converters.js","public/assets/node_modules/void-elements/index.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_classCallCheck","TypeError","Object","defineProperty","value","AppCtrl","this","date","Date","now",2,3,"_interopRequireDefault","__esModule","default","_angular","_angular2","_angularRoute","_angularRoute2","_uiSelect","_uiSelect2","_navbar","_navbar2","_home","_deed","_group","_user","_AppCtrl","_AppCtrl2","_app","_app2","home","deed","group","user","component","controller","template","config","when","controllerAs","homeTpl","deedTpl","groupTpl","userTpl","otherwise","html5Mode","theme","appendToBody","name","decorator","templateUrl","addClass","../deed","../group","../home","../navbar","../user","./AppCtrl","./app.html","angular","angular-route","ui-select",4,"_extends","assign","arguments","prototype","hasOwnProperty","_createClass","enumerable","configurable","writable","key","DeedCtrl","$rootScope","$routeParams","Alertify","User","Group","Deed","Act","Modal","loadDeed","then","title","_this","current","urlTitle","loading","findOne","_this2","count","_id","error","message","undefined","doing","done","_this3","success","$inject",5,6,"_angularMarked","_angularMarked2","_User","_User2","_Group","_Group2","_Deed","_Deed2","_Act","_Act2","_Modal","_Modal2","_videotron","_videotron2","_DeedCtrl","_DeedCtrl2","_deed2","../../services/Act","../../services/Deed","../../services/Group","../../services/Modal","../../services/User","../videotron","./DeedCtrl","./deed.html","angular-marked",7,"_lodash","_lodash2","_seedrandom","_seedrandom2","NUM_IMAGES","GroupCtrl","Campaign","jumbotronBackground","Math","floor","campaign","loadGroup","urlName","loadCampaign","active","currentDeed","findLast","deeds","published","showCampaignAlert","setCampaignAlert","setPublished","_this4","err","isNull","has","admins","indexOf","update","groups","_this5","openCampaignEdit","_this6","lodash","seedrandom",8,9,"_Alertify","_Alertify2","_Campaign","_Campaign2","_jumbotron","_jumbotron2","_GroupCtrl","_GroupCtrl2","_group2","../../services/Alertify","../../services/Campaign","../jumbotron","./GroupCtrl","./group.html",10,"HomeCtrl",11,12,"_welcome","_welcome2","_HomeCtrl","_HomeCtrl2","_home2","../welcome","./HomeCtrl","./home.html",13,"JumbotronCtrl","styles","background-image","background",14,"_JumbotronCtrl","_JumbotronCtrl2","bindings","image","text","./JumbotronCtrl","./jumbotron.html",15,16,"MIN_QUERY_LENGTH","NavbarCtrl","$location","query","search","fields","response","data","item","path","selectGroup",17,"_angularSanitize","_angularSanitize2","_NavbarCtrl","_NavbarCtrl2","./NavbarCtrl","./navbar.html","angular-sanitize",18,19,"UserCtrl",20,"_UserCtrl","_UserCtrl2","_user2","./UserCtrl","./user.html",21,22,"_angularYoutubeEmbed","_angularYoutubeEmbed2","videoId","videoUrl","./videotron.html","angular-youtube-embed",23,24,"WelcomeCtrl","find","numberOfGroups","Number","numberOfUsers",25,"_WelcomeCtrl","_WelcomeCtrl2","./WelcomeCtrl","./welcome.html",26,27,"defaults","serverUrl","facebookClientId","constant","LIOW_CONFIG",28,"filter","capitalize","kebabCase",29,"_config","_config2","$http","baseUrl","counters","params","get","global","post","service","../config",30,"_alertify","_alertify2","factory","logPosition","log","icon","setLogTemplate","input","alertify.js",31,"$q","resolve","reject","_","put","action",32,"deedId",33,"currentGroup","merge","set","./User",34,"CampaignEditCtrl","$uibModalInstance","loadDeeds","resetFields","toSave","copy","map","saving","save","close",35,36,"DeedPreview",37,38,"_toMarkdown","_toMarkdown2","_showdown","_showdown2","converter","Converter","GroupEditCtrl","$scope","$timeout","welcomeMessage","makeHtml","isObject","setupMediumEditor","logo","coverImage","editor","MediumEditor","document","querySelectorAll","placeholder","toolbar","buttons","autoLink","subscribe","event","editable","$apply","innerHTML","converters","node","nodeName","replacement","content","$on","destroy","openLogin","loadCurrent","showdown","to-markdown",39,40,"_angularDragula","_angularDragula2","_angularUiBootstrap","_angularUiBootstrap2","_lodash3","_lodash4","_LoginCtrl","_LoginCtrl2","_login","_login2","_GroupEditCtrl","_GroupEditCtrl2","_groupEdit","_groupEdit2","_CampaignEditCtrl","_CampaignEditCtrl2","_campaignEdit","_campaignEdit2","_DeedPreview","_DeedPreview2","_deedPreview","_deedPreview2","$uibModal","size","open","result","directive","$window","priority","link","scope","element","setMaxHeight","css","maxHeight","window","height","overflowY","on","off","../../filters/lodash","./campaign-edit/CampaignEditCtrl","./campaign-edit/campaign-edit.html","./deed-preview/DeedPreview","./deed-preview/deed-preview.html","./group-edit/GroupEditCtrl","./group-edit/group-edit.html","./login/LoginCtrl","./login/login.html","angular-dragula","angular-ui-bootstrap","angular-ui-switch",41,"LoginCtrl","joinGroup","userData","authenticateFacebook","email","password","authenticateEmail",42,43,"_satellizer","_satellizer2","currentUser","$auth","authenticate","setToken","token","login","isAuthenticated","some","userGroup","logout","changes","patch","$authProvider","loginUrl","signupUrl","facebook","clientId","url","./Alertify","satellizer",44,45,46,"isBlockElem","blockElements","isVoid","voidElements","collapseWhitespace","elem","isBlock","firstChild","prevText","prevVoid","prev","next","nodeType","replace","test","substr","remove","nextNode","nextSibling","parentNode","removeChild","keys","forEach","toUpperCase","block-elements","void-elements",47,"trim","string","blocks","toLowerCase","voids","canParseHtml","Parser","_window","DOMParser","canParse","parseFromString","createHtmlParser","newDoc","_document","implementation","createHTMLDocument","documentElement","body","htmlToDom","tree","HtmlParser","collapse","bfsOrder","children","inqueue","outqueue","shift","push","childNodes","getContent","_replacement","outer","cloneNode","outerHTML","canConvert","Array","isArray","toMarkdown","isFlankedByWhitespace","side","sibling","regExp","isFlanked","previousSibling","nodeValue","textContent","flankingWhitespace","leading","trailing","hasLeading","hasTrailing","process","whitespace","mdConverters","gfmConverters","jsdom","options","output","clone","nodes","slice","gfm","concat","./lib/gfm-converters","./lib/md-converters","collapse-whitespace",48,"cell","index","prefix","highlightRegEx","type","checked","borderCells","alignMap","left","right","center","align","attributes","border","className","language","match",49,"hLevel","charAt","hPrefix","hasSiblings","isCodeBlock","getAttribute","titlePart","alt","src","parent","strings","join",50,"area","base","br","col","embed","hr","img","keygen","menuitem","meta","param","source","track","wbr"],"mappings":"CAAA,QAAAA,GAAAC,EAAAC,EAAAC,GAAA,QAAAC,GAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,GAAAE,GAAA,kBAAAC,UAAAA,OAAA,KAAAF,GAAAC,EAAA,MAAAA,GAAAF,GAAA,EAAA,IAAAI,EAAA,MAAAA,GAAAJ,GAAA,EAAA,IAAAK,GAAA,GAAAC,OAAA,uBAAAN,EAAA,IAAA,MAAAK,GAAAE,KAAA,mBAAAF,EAAA,GAAAG,GAAAX,EAAAG,IAAAS,WAAAb,GAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,GAAAE,GAAAD,EAAAI,GAAA,GAAAL,EAAA,OAAAI,GAAAF,EAAAA,EAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,MAAAD,GAAAG,GAAAS,QAAA,IAAA,GAAAL,GAAA,kBAAAD,UAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,GAAA,OAAAD,KAAAa,GAAA,SAAAT,EAAAU,EAAAJ,GCCA,YAAa,SAASK,GAAgBlB,EAAED,GAAG,KAAKC,YAAaD,IAAG,KAAM,IAAIoB,WAAU,qCAAqCC,OAAOC,eAAeR,EAAQ,cAAcS,OAAM,GAAK,ICD3JC,GACnB,QADmBA,KAAAA,EAAAA,KAAAA,GAEjBC,KAAKC,KAAOC,KAAKC,MAAAA,GAAAA,WAFAJ,ODEfK,GAAG,SAASrB,EAAQU,EAAOJ,GEFjCI,EAAOJ,QAAU,4iBFIXgB,GAAG,SAAStB,EAAQU,EAAOJ,GGJjC,YAAA,SAAAiB,GAAA/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAAW,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAAE,EAAA5B,EAAA,iBAAA6B,EAAAN,EAAAK,GAAAE,EAAA9B,EAAA,aAAA+B,EAAAR,EAAAO,GAAAE,EAAAhC,EAAA,aAAAiC,EAAAV,EAAAS,GAAAE,EAAAlC,EAAA,WAAAmC,EAAAnC,EAAA,WAAAoC,EAAApC,EAAA,YAAAqC,EAAArC,EAAA,WAAAsC,EAAAtC,EAAA,aAAAuC,EAAAhB,EAAAe,GAAAE,EAAAxC,EAAA,cAAAyC,EAAAlB,EAAAiB,EAAAlC,GAAA,WAAAqB,EAAA,WAAAjB,OAAA,OAAAmB,EAAA,WAAAE,EAAA,WAAAE,EAAA,WAAAC,EAAAQ,KAAAP,EAAAQ,KAAAP,EAAAQ,MAAAP,EAAAQ,OAAAC,UAAA,OAAAC,WAAAR,EAAA,WAAAS,SAAAP,EAAA,aAAAQ,QAAA,iBAAA,oBAAA,iBAAA,SAAAzD,EAAAG,EAAAF,GAAAD,EAAA0D,KAAA,KAAAH,WAAA,WAAAI,aAAA,QAAAH,SAAAd,EAAAkB,UAAAF,KAAA,YAAAH,WAAA,WAAAI,aAAA,QAAAH,SAAAb,EAAAkB,UAAAH,KAAA,aAAAH,WAAA,YAAAI,aAAA,QAAAH,SAAAZ,EAAAkB,WAAAJ,KAAA,YAAAH,WAAA,WAAAI,aAAA,QAAAH,SAAAX,EAAAkB,UAAAC,UAAA,KAAA7D,EAAA8D,WAAA,GAAAhE,EAAAiE,MAAA,YAAAjE,EAAAkE,cAAA,KAAAC,KAAAjC,EAAA,WAAAjB,OAAAqB,EAAA,YAAAkB,QAAA,WAAA,SAAAzD,GAAA,QAAAG,GAAAA,EAAAF,GAAAD,EAAAqE,UAAAlE,GAAA,YAAA,SAAAH,GAAA,GAAAG,GAAAH,EAAA,GAAAa,EAAAV,EAAAmE,WAAA,OAAAnE,GAAAmE,YAAA,SAAAtE,GAAA,MAAAA,GAAAuE,SAAAtE,GAAAY,EAAAb,IAAAA,KAAAG,EAAA,2BAAA,qBAAAA,EAAA,yBAAA,wBHMGqE,UAAU,EAAEC,WAAW,EAAEC,UAAU,GAAGC,YAAY,GAAGC,UAAU,GAAGC,YAAY,EAAEC,aAAa,EAAEC,QAAU,UAAUC,gBAAgB,gBAAgBC,YAAY,cAAcC,GAAG,SAAS1E,EAAQU,EAAOJ,GAC3M,YAAa,SAASK,GAAgBnB,EAAEC,GAAG,KAAKD,YAAaC,IAAG,KAAM,IAAImB,WAAU,qCAAqCC,OAAOC,eAAeR,EAAQ,cAAcS,OAAM,GAAK,IAAI4D,GAAS9D,OAAO+D,QAAQ,SAASpF,GAAG,IAAI,GAAIC,GAAE,EAAEA,EAAEoF,UAAUrE,OAAOf,IAAI,CAAC,GAAIC,GAAEmF,UAAUpF,EAAG,KAAI,GAAIE,KAAKD,GAAEmB,OAAOiE,UAAUC,eAAexE,KAAKb,EAAEC,KAAKH,EAAEG,GAAGD,EAAEC,IAAI,MAAOH,IAAGwF,EAAa,WAAW,QAASxF,GAAEA,EAAEC,GAAG,IAAI,GAAIC,GAAE,EAAEA,EAAED,EAAEe,OAAOd,IAAI,CAAC,GAAIC,GAAEF,EAAEC,EAAGC,GAAEsF,WAAWtF,EAAEsF,aAAY,EAAGtF,EAAEuF,cAAa,EAAG,SAAUvF,KAAIA,EAAEwF,UAAS,GAAItE,OAAOC,eAAetB,EAAEG,EAAEyF,IAAIzF,IAAI,MAAO,UAASF,EAAEC,EAAEC,GAAG,MAAOD,IAAGF,EAAEC,EAAEqF,UAAUpF,GAAGC,GAAGH,EAAEC,EAAEE,GAAGF,MIPpkB4F,EAAA,WACnB,QADmBA,GACPC,EAAYC,EAAcC,EAAUC,EAAMC,EAAOC,EAAMC,EAAKC,GAAAA,GAAAA,GAAAA,IAAAA,GAAAA,KADrDR,GAEjBV,EAAc1D,MAAQuE,SAAAA,EAAUC,KAAAA,EAAMC,MAAAA,EAAOC,KAAAA,EAAMC,IAAAA,EAAKC,MAAAA,IAExD5E,KAAK6E,SAASP,EAAa5C,MACxBoD,KAAK,WAAA,MAAMT,GAAWU,MAAQC,EAAKN,KAAKO,QAAUD,EAAKN,KAAKO,QAAQF,MAAQ,OAAA,MAAAhB,GAL9DK,IAAAA,IAAAA,WAAAA,MAAAA,SAaVc,GAAAA,GAAAA,GAAAA,IAEP,OADAlF,MAAKmF,SAAAA,EACEnF,KAAK0E,KACTU,SAAUF,SAAAA,IACVJ,KAAK,SAAApD,GACJ2D,EAAKX,KAAKO,QAAUvD,EACpB2D,EAAKV,IAAIW,OAAQ5D,KAAMA,EAAK6D,QAJzBvF,SAME,SAAAwF,GACLH,EAAKG,MAAQA,EAAMC,QACnBJ,EAAKX,KAAKO,QAAU,OAErBH,KAAK,WAAA,MAAMO,GAAKF,SAAAA,OAAUhB,IAAA,OAAArE,MAAA,SAS1B4B,GAAAA,GAAAA,GAAAA,KAAMC,EAAAiC,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAQ,KAAAA,UAAA,EACjB5D,MAAK2F,OAAAA,EACL3F,KAAK2E,IAAIiB,KAAKlE,EAAMC,GACjBmD,KAAK,WACJe,EAAKlB,IAAIW,QACTO,EAAKlB,IAAIW,OAAQ5D,KAAMA,EAAK6D,MAC5BM,EAAKtB,SAASuB,QAAQ,gBAJ1B9F,SAMS,WAAA,MAAM6F,GAAKtB,SAASiB,MAAM,6BAChCV,KAAK,WAAA,MAAMe,GAAKF,OAAAA,QA3CFvB,IAAAA,GAAAA,WAAAA,EA+CrBA,EAAS2B,SAAW,aAAc,eAAgB,WAAY,OAAQ,QAAS,OAAQ,MAAO,cJvCxFC,GAAG,SAASjH,EAAQU,EAAOJ,GKRjCI,EAAOJ,QAAU,k9DLUX4G,GAAG,SAASlH,ECVGU,EACLJ,GDUhB,YAAa,SAASiB,GAAuB/B,GAAG,MAAOA,IAAGA,EAAEgC,WAAWhC,GAAGiC,UAAUjC,GAAGqB,OAAOC,eAAeR,EAAQ,cAAcS,OAAM,IAAKT,EAAQqC,KAAKrC,EAAQ+C,QAAQ,MAAO,IAAI3B,GAAS1B,EAAQ,WAAW2B,EAAUJ,EAAuBG,GAAUyF,EAAenH,EAAQ,kBAAkBoH,EAAgB7F,EAAuB4F,GAAgBE,EAAMrH,EAAQ,uBAAuBsH,EAAO/F,EAAuB8F,GAAOE,EAAOvH,EAAQ,wBAAwBwH,EAAQjG,EAAuBgG,GAAQE,EAAMzH,EAAQ,uBAAuB0H,EAAOnG,EAAuBkG,GAAOE,EAAK3H,EAAQ,sBAAsB4H,EAAMrG,EAAuBoG,GAAME,EAAO7H,EAAQ,wBAAwB8H,EAAQvG,EAAuBsG,GAAQE,EAAW/H,EAAQ,gBAAgBgI,EAAYzG,EAAuBwG,GAAYE,EAAUjI,EAAQ,cAAckI,EAAW3G,EAAuB0G,GAAW9F,EAAMnC,EAAQ,eAAemI,EAAO5G,EAAuBY,EMGl6B7B,GAAA+C,QAAA8E,EAAAA,WAEA7H,EAAAqC,KAAOhB,EAAAA,WAAQjB,OAAO,uBAAuB0G,EAAAA,WAAAE,EAAAA,WAAAE,EAAAA,WAAAE,EAAAA,WAAAE,EAAAA,WAAAE,EAAAA,WAAAE,EAAAA,aACrDjF,WAAW,WADImF,EAAAA,YAEftE,OLhBCwE,qBAAA,GADYC,sBAAA,GAAAC,uBAAA,GAAAC,uBAAA,GAAAC,sBAAA,GAAAC,eAAA,GAAAC,aAAA,EAAAC,cAAA,EAAApE,QAAA,UAAAqE,iBAAA,mBAAAC,GAAA,SAAA7I,EAAAU,EAAAJ,GDYhB,YCZE,SAAAiB,GAAA/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAE,GAAA,KAAAF,YAAAE,IAAA,KAAA,IAAAkB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAE,GAAA,EAAAA,EAAAmF,UAAArE,OAAAd,IAAA,CAAA,GAAAD,GAAAoF,UAAAnF,EAAA,KAAA,GAAAC,KAAAF,GAAAoB,OAAAiE,UAAAC,eAAAxE,KAAAd,EAAAE,KAAAH,EAAAG,GAAAF,EAAAE,IAAA,MAAAH,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAE,GAAA,IAAA,GAAAD,GAAA,EAAAA,EAAAC,EAAAc,OAAAf,IAAA,CAAA,GAAAE,GAAAD,EAAAD,EAAAE,GAAAsF,WAAAtF,EAAAsF,aAAA,EAAAtF,EAAAuF,cAAA,EAAA,SAAAvF,KAAAA,EAAAwF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAG,EAAAyF,IAAAzF,IAAA,MAAA,UAAAD,EAAAD,EAAAE,GAAA,MAAAF,IAAAD,EAAAE,EAAAoF,UAAArF,GAAAE,GAAAH,EAAAE,EAAAC,GAAAD,MAAAoJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAAE,EAAAhJ,EAAA,cAAAiJ,EAAA1H,EAAAyH,GMEIE,EAAa,EAEEC,EAAA,WACnB,QADmBA,GACP7D,EAAYC,EAAcC,EAAUC,EAAMC,EAAO0D,EAAUxD,EAAKC,GAAAA,GAAAA,GAAAA,IAAAA,GAAAA,KADzDsD,GAEjBxE,EAAc1D,MAAQuE,SAAAA,EAAUC,KAAAA,EAAMC,MAAAA,EAAO0D,SAAAA,EAAUxD,IAAAA,EAAKC,MAAAA,IADqB5E,KAI5EoI,oBAAL,iBAA4CC,KAAKC,OAAM,EAAAN,EAAAA,YAAW1D,EAAa3C,SAAWsG,GAAnC,OACvDjI,KAAKuI,SAAW,KAEhBvI,KAAKwI,UAAUlE,EAAa3C,OACzBmD,KAAK,WAAA,MAAMT,GAAWU,MAAQC,EAAKP,MAAMQ,QAAUD,EAAKP,MAAMQ,QAAQtC,KAAO,OAAA,MAAAoB,GAT/DmE,IAAAA,IAAAA,YAAAA,MAAAA,SAiBTO,GAAAA,GAAAA,GAAAA,IAER,OADAzI,MAAKmF,SAAAA,EACEnF,KAAKyE,MACTW,SAAUqD,QAAAA,IACV3D,KAAK,SAAAnD,GACJ0D,EAAKZ,MAAMQ,QAAUtD,EACrB0D,EAAKV,IAAIW,OAAQ3D,MAAOA,EAAM4D,MAC9BF,EAAKqD,aAAa/G,KALf3B,SAOE,SAAAwF,GACLH,EAAKG,MAAQA,EAAMC,QACnBJ,EAAKZ,MAAMQ,QAAU,OAEtBH,KAAK,WAAA,MAAMO,GAAKF,SAAAA,OAAUhB,IAAA,eAAArE,MAAA,SAQlB6B,GAAAA,GAAAA,GAAAA,IACX3B,MAAKmI,SAAS/C,SAAUzD,MAAOA,EAAM4D,IAAKoD,QAAAA,IAA1C3I,SACS,WAAA,MAAM,QACZ8E,KAAK,SAAAyD,GACJ1C,EAAK0C,SAAWA,EACZ1C,EAAK0C,WACP1C,EAAKlB,IAAIW,OAAQiD,SAAU1C,EAAK0C,SAAShD,MACzCM,EAAK+C,YAAcd,EAAAA,WAAEe,SAAShD,EAAK0C,SAASO,OAASC,WAAAA,KAEvDlD,EAAKmD,kBAAoBnD,EAAKoD,iBAAiBpD,EAAK0C,SAAU1C,EAAKpB,MAAMQ,QAASY,EAAKrB,KAAKS,cAAAA,IAAAA,eAAAA,MAAAA,SAWrFsD,EAAU7G,GAAAA,GAAAA,GAAAA,KAAMqH,EAAAnF,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,IAAA,EAAYA,UAAA,EACvC5D,MAAKmI,SAASe,aAAaX,EAAU7G,EAAMqH,GACxCjE,KAAK,WAAA,MAAMqE,GAAKT,aAAaS,EAAK1E,MAAMQ,WAD3CjF,SAES,SAAAoJ,GAAAA,MAAO,WAAAjF,IAAA,mBAAArE,MAAA,SAYDyI,EAAU5G,EAAOC,GAChC,MACEkG,GAAAA,WAAEuB,OAAOd,IACTT,EAAAA,WAAEwB,IAAI3H,EAAO,WACbmG,EAAAA,WAAEwB,IAAI1H,EAAM,QACuB,KAAnCD,EAAM4H,OAAOC,QAAQ5H,EAAK2D,QAAAA,IAAAA,iBAAAA,MAAAA,SAUf3D,EAAMD,GAAAA,GAAAA,GAAAA,IACnB3B,MAAKwE,KAAKiF,OAAO7H,GAAQ8H,OAAQ/H,EAAM4D,MACpCT,KAAK,WACJ6E,EAAKnF,KAAK7C,MAAQA,EAClBgI,EAAKpF,SAASuB,QAAQ,kBAH1B9F,SAKS,SAAAwF,GAAAA,MAAS,WAAArB,IAAA,gBAAArE,MAAA,SAQN6B,GAAAA,GAAAA,GAAAA,IACZ3B,MAAK4E,MAAMgF,iBAAiB,QAASjI,GAClCmD,KAAK,WAAA,MAAM+E,GAAKnB,aAAa/G,KADhC3B,SAES,SAAAwF,GAAAA,MAAS,YAzGD0C,IAAAA,GAAAA,WAAAA,EA6GrBA,EAAUnC,SAAW,aAAc,eAAgB,WAAY,OAAQ,QAAS,WAAY,MAAO,WPpGhG+D,OAAS,SAASC,WAAa,eAAeC,GAAG,SAASjL,EAAQU,EAAOJ,GQd5EI,EAAOJ,QAAU,2/LRgBX4K,GAAG,SAASlL,EAAQU,EAAOJ,GACjC,YAAa,SAASiB,GAAuB/B,GAAG,MAAOA,IAAGA,EAAEgC,WAAWhC,GAAGiC,UAAUjC,GAAGqB,OAAOC,eAAeR,EAAQ,cAAcS,OAAM,IAAKT,EAAQsC,MAAMtC,EAAQgD,SAAS,MAAO,IAAI5B,GAAS1B,EAAQ,WAAW2B,EAAUJ,EAAuBG,GAAUyF,EAAenH,EAAQ,kBAAkBoH,EAAgB7F,EAAuB4F,GAAgBgE,EAAUnL,EAAQ,2BAA2BoL,EAAW7J,EAAuB4J,GAAW9D,EAAMrH,EAAQ,uBAAuBsH,EAAO/F,EAAuB8F,GAAOE,EAAOvH,EAAQ,wBAAwBwH,EAAQjG,EAAuBgG,GAAQ8D,EAAUrL,EAAQ,2BAA2BsL,EAAW/J,EAAuB8J,GAAW1D,EAAK3H,EAAQ,sBAAsB4H,EAAMrG,EAAuBoG,GAAME,EAAO7H,EAAQ,wBAAwB8H,EAAQvG,EAAuBsG,GAAQ0D,EAAWvL,EAAQ,gBAAgBwL,EAAYjK,EAAuBgK,GAAYE,EAAWzL,EAAQ,eAAe0L,EAAYnK,EAAuBkK,GAAYrJ,EAAOpC,EAAQ,gBAAgB2L,EAAQpK,EAAuBa,ESFrhC9B,GAAAgD,SAAAqI,EAAAA,WAEArL,EAAAsC,MAAQjB,EAAAA,WAAQjB,OAAO,wBAAwB0G,EAAAA,WAAAgE,EAAAA,WAAA9D,EAAAA,WAAAE,EAAAA,WAAA8D,EAAAA,WAAA1D,EAAAA,WAAAE,EAAAA,WAAA0D,EAAAA,aAUvDzI,WAAW,YAVK2I,EAAAA,YAWhB9H,OTVAwE,qBAAqB,GAAGwD,0BAA0B,GAAGC,0BAA0B,GAAGvD,uBAAuB,GAAGC,uBAAuB,GAAGC,sBAAsB,GAAGsD,eAAe,GAAGC,cAAc,EAAEC,eAAe,EAAEzH,QAAU,UAAUqE,iBAAiB,mBAAmBqD,IAAI,SAASjM,EAAQU,EAAOJ,GACzS,YInBqB,SAAAK,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IMAAmL,GACnB,QADmBA,GACP5G,GAAAA,EAAAA,KADO4G,GAEjB5G,EAAWU,MAAQ,KAAA1F,GAAA,WAFF4L,EAMrBA,EAASlF,SAAW,mBNLlBmF,IAAA,SAAAnM,EAAYU,EAAYJ,GOD1BI,EAAOJ,QAAU,wFXsBX8L,IAAI,SAASpM,EAAQU,EAAOJ,GAClC,YAAa,SAASiB,GItB2D/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,IAAAT,EAAAoC,KAAApC,EAAA8C,QAAA,MAAA,IAAA1B,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA6J,EAAAvL,EAAA,gBAAAwL,EAAAjK,EAAAgK,GAAAc,EAAArM,EAAA,cAAAsM,EAAA/K,EAAA8K,GAAAE,EAAAvM,EAAA,cAAAwM,EAAAjL,EAAAgL,GAAArK,EAAAlC,EAAA,eAAAyM,EAAAlL,EAAAW,EQQtE5B,GAAA8C,QAAAqJ,EAAAA,WAEAnM,EAAAoC,KAAOf,EAAAA,WAAQjB,OAAO,uBAAuB8K,EAAAA,WAAAc,EAAAA,aAIrDvJ,WAAW,WAJIyJ,EAAAA,YAKf5I,OZQAkI,eAAe,GAAGY,aAAa,GAAGC,aAAa,GAAGC,cAAc,GAAGrI,QAAU,YAAYsI,IAAI,SAAS7M,EAAQU,EAAOJ,GItBpH,YAAc,SAAQK,GAAAlB,EAAFD,GAAY,KAAAC,YAAMD,IAAA,KAAO,IAAAoB,WAAM,qCAD0BC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,ISD5D+L,GACnB,QADmBA,KAAAA,EAAAA,KAAAA,GAEjB7L,KAAK8L,QACHC,mBAAA,OAA2B/L,KAAKgM,WAAL,KAAA3M,GAAA,WAHZwM,Ob0BfI,IAAI,SAASlN,EAAQU,EAAOJ,GItB9B,YAAK,SAASiB,GMHQ/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAAW,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAAyL,EAAAnN,EAAA,mBAAAoN,EAAA7L,EAAA4L,GAAA5B,EAAAvL,EAAA,oBAAAwL,EAAAjK,EAAAgK,EAAAjL,GAAA,WIKXqB,EAAAA,WAAQjB,OAAO,+BAC3BoC,UAAU,aACTC,WAAAqK,EAAAA,WACApK,SAAAwI,EAAAA,WACA6B,UACEC,MAAO,IACPL,WAAY,IACZjH,MAAO,IACPuH,KAAM,OAGT3J,OdWA4J,kBIvBe,GAAWC,mBAAkB,GAAAlJ,QAAU,YAAUmJ,IAAQ,SAAQ1N,EAA9CU,EAAAJ,GWLrCI,EXCiFJ,QWDhE,qaXCfqN,IAAA,SMCE3N,EADsBU,EAAAJ,GV8B1B,YU9BE,SAAAK,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAE,GAAAkF,UAAApF,EAAA,KAAA,GAAAC,KAAAC,GAAAkB,OAAAiE,UAAAC,eAAAxE,KAAAZ,EAAAD,KAAAF,EAAAE,GAAAC,EAAAD,IAAA,MAAAF,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAE,GAAA,EAAAA,EAAAF,EAAAe,OAAAb,IAAA,CAAA,GAAAD,GAAAD,EAAAE,EAAAD,GAAAuF,WAAAvF,EAAAuF,aAAA,EAAAvF,EAAAwF,cAAA,EAAA,SAAAxF,KAAAA,EAAAyF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAE,EAAA0F,IAAA1F,IAAA,MAAA,UAAAD,EAAAE,EAAAD,GAAA,MAAAC,IAAAH,EAAAC,EAAAqF,UAAAnF,GAAAD,GAAAF,EAAAC,EAAAC,GAAAD,MMDImO,EAAmB,EAEJC,EAAA,WACnB,QADmBA,GACPC,EAAWrI,EAAMC,EAAOE,EAAKC,GAAAA,EAAAA,KADtBgI,GAEjBlJ,EAAc1D,MAAQ6M,UAAAA,EAAWrI,KAAAA,EAAMC,MAAAA,EAAOE,IAAAA,EAAKC,MAAAA,IAEnD5E,KAAK0J,UACL1J,KAAK2B,MAAQ,KAEb3B,KAAK2E,IAAIW,QAAAA,MAAAA,GAPQsH,IAAAA,IAAAA,gBAAAA,MAAAA,SAiBLE,GAAAA,GAAAA,GAAAA,IAGZ,OAFA9M,MAAK0J,UAEDoD,EAAMvN,OAASoN,GAAAA,EAIZ3M,KAAKyE,MAAMsI,OAAOD,GAASE,OAAQ,qBACvClI,KAAK,SAAAmI,GAAAA,MAAYjI,GAAK0E,OAASuD,EAASC,UAAAA,IAAAA,cAAAA,MAAAA,SAQjCC,GACVnN,KAAK2B,MAAQ,KACb3B,KAAK6M,UAAUO,KAAf,MAA0BD,EAAK1E,YAAAA,IAAAA,eAAAA,MAAAA,SAQpB9G,GACX3B,KAAKwE,KAAK7C,MAAQA,EAClB3B,KAAKqN,YAAY1L,OA7CAiL,IAAAA,GAAAA,WAAAA,EAiDrBA,EAAW7G,SAAW,YAAa,OAAQ,QAAS,MAAO,chBnBrDuH,IAAI,SAASvO,EAAQU,EAAOJ,GAClC,YajCqB,SACnBiB,GAAc/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAAW,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA8M,EAAAxO,EAAA,oBAAAyO,EAAAlN,EAAAiN,GAAA1M,EAAA9B,EAAA,aAAA+B,EAAAR,EAAAO,GAAAuF,EAAArH,EAAA,uBAAAsH,EAAA/F,EAAA8F,GAAAE,EAAAvH,EAAA,wBAAAwH,EAAAjG,EAAAgG,GAAAI,EAAA3H,EAAA,sBAAA4H,EAAArG,EAAAoG,GAAAE,EAAA7H,EAAA,wBAAA8H,EAAAvG,EAAAsG,GAAA6G,EAAA1O,EAAA,gBAAA2O,EAAApN,EAAAmN,GAAA1M,EAAAhC,EAAA,iBAAAiC,EAAAV,EAAAS,EAAA1B,GAAA,WIaDqB,EAAAA,WAAQjB,OAAO,yBAAyB+N,EAAAA,WAAA1M,EAAAA,WAAAuF,EAAAA,WAAAE,EAAAA,WAAAI,EAAAA,WAAAE,EAAAA,aAQpDhF,UAAU,UACTC,WAAA4L,EAAAA,WACA3L,SAAAf,EAAAA,aAED2B,OjBQAwE,qBalCkB,GAAAE,uBACL,GAAAC,uBAAA,GAAAC,sBAAA,GAAAoG,eAAA,GAAAC,gBAAA,GAAAtK,QAAA,UAAAuK,mBAAA,mBAAArK,YAAA,cAAAsK,IAAA,SAAA/O,EAAAU,EAAAJ,GKDhBI,EAAOJ,QAAU,woIRMjB0O,IAAS,SAAUhP,EAACU,EAApBJ,GGHM,YNEe,SAAAK,GMFiBnB,EAAAC,GAAA,KAALD,YAA3BC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IMHekO,GACnB,QADmBA,GACP3J,EAAYC,GAAAA,EAAAA,KADL0J,GAEjBhO,KAAK2C,KAAO2B,EAAa1C,KACzByC,EAAWU,MAAQ/E,KAAK2C,KAAAA,GAAAA,WAHPqL,EAOrBA,EAASjI,SAAW,aAAc,qBNNlBkI,IAAA,SNIKlP,EACPU,EAAYJ,GPiC1B,YatCE,STDmBiB,GAAA/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,IAAAT,EAAAuC,KAAAvC,EAAAiD,QAAA,MAAA,IAAA7B,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA6J,EAAAvL,EAAA,gBAAAwL,EAAAjK,EAAAgK,GAAA4D,EAAAnP,EAAA,cAAAoP,EAAA7N,EAAA4N,GAAA9M,EAAArC,EAAA,eAAAqP,EAAA9N,EAAAc,EgBQV/B,GAAAiD,QAAA8L,EAAAA,WAEA/O,EAAAuC,KAAOlB,EAAAA,WAAQjB,OAAO,uBAAuB8K,EAAAA,aACrDzI,WAAW,WADIqM,EAAAA,YAEfxL,OpB4BAkI,eAAe,GAAGwD,aAAa,GAAGC,cAAc,GAAGhL,QAAU,YAAYiL,IAAI,SAASxP,EAAQU,EAAOJ,GqBxCxGI,EAAOJ,QAAU,kTrB0CXmP,IAAI,SAASzP,EAAQU,EAAOJ,GOnC9B,YAAc,SAAQiB,GAAU/B,GAAA,MAAMA,IAAAA,EAAAgC,WAAOhC,GAAAiC,UAAAjC,GAAUqB,OAAAC,eAAnCR,EAApB,cAAAS,OAAA,GAAA,IAAAW,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAAgO,EAAA1P,EAAA,yBAAA2P,EAAApO,EAAAmO,GAAA3H,EAAA/H,EAAA,oBAAAgI,EAAAzG,EAAAwG,EAAAzH,GAAA,WeCWqB,EAAAA,WAAQjB,OAAO,4BAA4BiP,EAAAA,aACvD7M,UAAU,aACTE,SAAAgF,EAAAA,WACAqF,UACEuC,QAAS,IACTC,SAAU,OAGbjM,OlBFCkM,mBAAe,GAAfvL,QADiB,UAAAwL,wBAAA,0BAAAC,IAAA,SAAAhQ,EAAAU,EAAAJ,GAEjBI,EmBfGJ,QJCL,kefiBM2P,IGRC,SHQDjQ,EAAAU,EAAAJ,GACA,YGRC,SAAWK,GHQgBnB,EAAAC,GAA5B,KAFYD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAC,GAAAmF,UAAApF,EAAA,KAAA,GAAAE,KAAAD,GAAAmB,OAAAiE,UAAAC,eAAAxE,KAAAb,EAAAC,KAAAH,EAAAG,GAAAD,EAAAC,IAAA,MAAAH,IoBjBC0Q,EACnB,QADmBA,GACPzK,EAAMC,EAAOE,EAAKC,GAAAA,GAAAA,GAAAA,IAAAA,GAAAA,KADXqK,GAEjBvL,EAAc1D,MAAQ2E,IAAAA,EAAKC,MAAAA,IAE3BH,EAAMyK,MAAO5J,OAAAA,IACVR,KAAK,SAAAmI,GAAAA,MAAYjI,GAAKmK,eAAiBC,OAAOnC,EAASC,QAE1D1I,EAAK0K,MAAO5J,OAAAA,IACTR,KAAK,SAAAmI,GAAAA,MAAYjI,GAAKqK,cAAgBD,OAAOnC,EAASC,QAAAA,GAAAA,WARxC+B,EAYrBA,EAAYlJ,SAAW,OAAQ,QAAS,MAAO,cLV3CuJ,IfmBG,SUfQvQ,EKJcU,EfmBPJ,GACd,YYlBU,SAAQiB,GTUd/B,GAAA,MSV+BA,IAAAA,EAAAgC,WAAOhC,GAAAiC,UAAKjC,GAAAqB,OAAnDC,eAD8CR,EAAA,cAAAS,OAAA,GAAA,IAAAW,GAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA2F,EAAArH,EAAA,uBAAAsH,EAAA/F,EAAA8F,GAAAE,EAAAvH,EAAA,wBAAAwH,EAAAjG,EAAAgG,GAAAI,EAAA3H,EAAA,sBAAA4H,EAAArG,EAAAoG,GAAAE,EAAA7H,EAAA,wBAAA8H,EAAAvG,EAAAsG,GAAA2I,EAAAxQ,EAAA,iBAAAyQ,EAAAlP,EAAAiP,GAAAnE,EAAArM,EAAA,kBAAAsM,EAAA/K,EAAA8K,EAAA/L,GAAA,WSSnCqB,EAAAA,WAAQjB,OAAO,0BAA0B4G,EAAAA,WAAAE,EAAAA,WAAAI,EAAAA,WAAAE,EAAAA,aAMrDhF,UAAU,WACTC,WAAA0N,EAAAA,WACAzN,SAAAsJ,EAAAA,aAED1I,ONrBDwE,qBZa2B,GHSrBE,uBGTwC,GAAXC,uBAAwC,GAAnBC,sBAArB,GAAAkI,gBAAA,GAAAC,iBAAA,GAAApM,QAAA,YAAAqM,IAAA,SAAA5Q,EAAAU,EAAAJ,GSRjCI,EZeSJ,QYfT;MTAFuQ,ISCO,SGPY7Q,EfyBEU,EAAUJ,GUb3B,YVCe,SUDfiB,GAAA/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA+H,GAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAApH,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GYPAoP,GACJC,UAAW,wBACXC,iBAAkB,qBAAA1Q,GAAA,WAGLqB,EAAAA,WAAQjB,OAAO,iBAC3BuQ,SAAS,SAAUlI,EAAAA,WAAE+H,SAASI,gBAAmBJ,IACjDlN,OVHCW,QAAS,UANqCwG,OAAA,WAAAoG,IAAA,SAAAnR,EAAAU,EAAAJ,GGIlD,YLOM,SKPciB,GAAc/B,GAAf,MAAnBA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAAqB,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA+H,GAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAApH,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,EAAApB,GAAA,WQJeqB,EAAAA,WAAQjB,OAAO,yBAC3B0Q,OAAO,aAAc,WAAA,MAAMrI,GAAAA,WAAEsI,aAC7BD,OAAO,YAAa,WAAA,MAAMrI,GAAAA,WAAEuI,YAC5B1N,ObICW,QFDO,UAAAwG,OAAA,WAAAwG,IAAJ,SAAAvR,EAAAU,EAAAJ,GZgDP,YcnDe,SULbiB,GAAkB/B,GAAA,MAAlBA,IAA8BA,EAAAgC,WAAOhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAM,GAAA8E,UAAApF,EAAA,KAAA,GAAAE,KAAAI,GAAAc,OAAAiE,UAAAC,eAAAxE,KAAAR,EAAAJ,KAAAH,EAAAG,GAAAI,EAAAJ,IAAA,MAAAH,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAM,GAAA,EAAAA,EAAAN,EAAAe,OAAAT,IAAA,CAAA,GAAAJ,GAAAF,EAAAM,EAAAJ,GAAAsF,WAAAtF,EAAAsF,aAAA,EAAAtF,EAAAuF,cAAA,EAAA,SAAAvF,KAAAA,EAAAwF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAG,EAAAyF,IAAAzF,IAAA,MAAA,UAAAF,EAAAM,EAAAJ,GAAA,MAAAI,IAAAP,EAAAC,EAAAqF,UAAA/E,GAAAJ,GAAAH,EAAAC,EAAAE,GAAAF,MAAAqJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAApH,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA8P,EAAAxR,EAAA,aAAAyR,EAAAlQ,EAAAiQ,GIKjC5L,EAAA,WACJ,QADIA,GACQ8L,EAAOzO,GAAAA,EAAAA,KADf2C,GAEFjB,EAAc1D,MAAQyQ,MAAAA,IAEtBzQ,KAAK0Q,QAAa1O,EAAO8N,UAAP,QAClB9P,KAAK2Q,YAAAA,MAAAA,GALHhM,IAAAA,IAAAA,QAAAA,MAAAA,WAAAA,GAAAA,GAAAA,KAeEiM,EAAAhN,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAASA,UAAA,EAGb,OAFAgN,GAAS9I,EAAAA,WAAE+H,SAASe,GAAUtL,OAAAA,IAEvBtF,KAAKyQ,MAAMI,IAAI7Q,KAAK0Q,SAAWE,OAAAA,IACnC9L,KAAK,SAAAmI,GASJ,MARAA,GAASC,KAAOkC,OAAOnC,EAASC,MAE5B0D,EAAOhP,KAAMoD,EAAK2L,SAASC,EAAOhP,MAAQqL,EAASC,KAC9C0D,EAAOjP,MAAOqD,EAAK2L,SAASC,EAAOjP,OAASsL,EAASC,KACrD0D,EAAOrI,SAAUvD,EAAK2L,SAASC,EAAOrI,UAAY0E,EAASC,KAC3D0D,EAAOlP,KAAMsD,EAAK2L,SAASC,EAAOlP,MAAQuL,EAASC,KACvDlI,EAAK2L,SAASG,OAAS7D,EAASC,KAE9BD,OAAAA,IAAAA,OAAAA,MAAAA,SAYRvL,GAAAA,GAAMC,GAAAiC,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAQ,KAAAA,UAAA,EACjB,OAAO5D,MAAKyQ,MAAMM,KAAK/Q,KAAK0Q,SAC1BhP,KAAMA,EAAK6D,IACX5D,MAAOmG,EAAAA,WAAEwB,IAAI3H,EAAO,OAASA,EAAM4D,IAAM,WA3CzCZ,IAgDNA,GAAIoB,SAAW,QAAS,UAAA1G,EAAA,WAETqB,EAAAA,WAAQjB,OAAO,oBAAoB+Q,EAAAA,aAC/CQ,QAAQ,MAAOrM,GACfhC,OhB/CIsO,YAAI,GAAA3N,QAAO,UAAAwG,OAAQ,WAAOoH,IAAA,SAAAnS,EAAuBU,EAAAJ,GZgDxD,YAAa,SAASiB,GAAuB/B,GAAG,MAAOA,IAAGA,EAAEgC,WAAWhC,GAAGiC,UAAUjC,GAAGqB,OAAOC,eAAeR,EAAQ,cAAcS,OAAM,GAAK,IAAIW,GAAS1B,EAAQ,WAAW2B,EAAUJ,EAAuBG,GAAU0Q,EAAUpS,EAAQ,eAAeqS,EAAW9Q,EAAuB6Q,EAAW9R,GAAQ,W6BxDhSqB,EAAAA,WAAQjB,OAAO,4BAC3B4R,QAAQ,WAAY,WAKnB,MAJAD,GAAAA,WACG3O,MAAM,aACN6O,YAAY,cAYbC,IAAA,SAAI9L,GAAAA,GAAS+L,GAAA5N,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAO,cAAAA,UAAA,EAClB,OAAOwN,GAAAA,WACJK,eAAe,SAAAC,GAAAA,MAAAA,yBAAkCF,EAAA,UAAcE,IAC/DH,IAAI9L,IAWTK,QAAA,SAAQL,GAAAA,GAAS+L,GAAA5N,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAO,eAAAA,UAAA,EACtB,OAAOwN,GAAAA,WACJK,eAAe,SAAAC,GAAAA,MAAAA,yBAAkCF,EAAA,UAAcE,IAC/D5L,QAAQL,IAWbD,MAAA,SAAMC,GAAAA,GAAS+L,GAAA5N,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAO,qBAAAA,UAAA,EACpB,OAAOwN,GAAAA,WACJK,eAAe,SAAAC,GAAAA,MAAAA,yBAAkCF,EAAA,UAAcE,IAC/DlM,MAAMC,OAKd9C,O7BKAgP,cAAc,cwB5DIrO,QACkB,YAAAsO,IAAA,SAAA7S,EAAAU,EAAAJ,GlBahC,YAAI,SCTUiB,GAAA/B,GDSd,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAC,GAAAmF,UAAApF,EAAA,KAAA,GAAAE,KAAAD,GAAAmB,OAAAiE,UAAAC,eAAAxE,KAAAb,EAAAC,KAAAH,EAAAG,GAAAD,EAAAC,IAAA,MAAAH,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAe,OAAAd,IAAA,CAAA,GAAAC,GAAAF,EAAAC,EAAAC,GAAAsF,WAAAtF,EAAAsF,aAAA,EAAAtF,EAAAuF,cAAA,EAAA,SAAAvF,KAAAA,EAAAwF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAG,EAAAyF,IAAAzF,IAAA,MAAA,UAAAF,EAAAC,EAAAC,GAAA,MAAAD,IAAAF,EAAAC,EAAAqF,UAAApF,GAAAC,GAAAH,EAAAC,EAAAE,GAAAF,MAAAiC,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA8P,EAAAxR,EAAA,aAAAyR,EAAAlQ,EAAAiQ,GwBTDpI,EAAA,WACJ,QADIA,GACQsI,EAAOoB,EAAI7P,GAAAA,EAAAA,KADnBmG,GAEFzE,EAAc1D,MAAQyQ,MAAAA,EAAOoB,GAAAA,IAE7B7R,KAAK0Q,QAAa1O,EAAO8N,UAAP,aAAA,MAAA/L,GAJhBoE,IAAAA,IAAAA,OAAAA,MAAAA,WAAAA,GAcCyI,GAAAhN,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAASA,UAAA,EACZ,OAAO5D,MAAKyQ,MAAMI,IAAI7Q,KAAK0Q,SAAWE,OAAAA,OAAAA,IAAAA,UAAAA,MAAAA,SAUhCA,GAAAA,GAAAA,GAAAA,IACN,OAAO5Q,MAAK6R,GAAG,SAACC,EAASC,GACvB/M,EAAKkK,KAAK0B,GACP9L,KAAK,SAAAmI,GACyB,IAAzBA,EAASC,KAAK3N,OAChBuS,EAAQ7E,EAASC,KAAK,IAEtB6E,EAAO,GAAI7S,OAAM,yBALvB8F,SAQS,WAAA,MAAM+M,GAAO,GAAI7S,OAAM,uCAAAiF,IAAA,OAAArE,MAAA,SAW/ByI,GACH,MAAIyJ,GAAE1I,IAAIf,EAAU,OACXvI,KAAKyQ,MAAMwB,IAAOjS,KAAK0Q,QAAL,IAAgBnI,EAAShD,IAAOgD,GAElDvI,KAAKyQ,MAAMM,KAAK/Q,KAAK0Q,QAASnI,MAAAA,IAAAA,eAAAA,MAAAA,SAY5BA,EAAU7G,GAAAA,GAAMqH,GAAAnF,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,IAAA,EAAYA,UAAA,GACnCsO,EAASnJ,EAAY,OAAS,QAElC,OAAO/I,MAAKyQ,MAAMyB,GAAWlS,KAAK0Q,QAAL,IAAgBnI,EAAShD,IAAT,UAAsB7D,EAAK6D,IAAL,kBAjEjE4C,IAqENA,GAASpC,SAAW,QAAS,KAAM,UAAA1G,EAAA,WAEpBqB,EAAAA,WAAQjB,OAAO,yBAAyB+Q,EAAAA,aACpDQ,QAAQ,WAAY7I,GACpBxF,ON5ECsO,YAAA,GAAoB3N,QAAA,YAAO6O,IAA3B,SADmCpT,EAAAU,EAAAJ,GxB8DvC,YAAa,SAASiB,GOzCD/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAC,GAAAmF,UAAApF,EAAA,KAAA,GAAAE,KAAAD,GAAAmB,OAAAiE,UAAAC,eAAAxE,KAAAb,EAAAC,KAAAH,EAAAG,GAAAD,EAAAC,IAAA,MAAAH,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAe,OAAAd,IAAA,CAAA,GAAAC,GAAAF,EAAAC,EAAAC,GAAAsF,WAAAtF,EAAAsF,aAAA,EAAAtF,EAAAuF,cAAA,EAAA,SAAAvF,KAAAA,EAAAwF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAG,EAAAyF,IAAAzF,IAAA,MAAA,UAAAF,EAAAC,EAAAC,GAAA,MAAAD,IAAAF,EAAAC,EAAAqF,UAAApF,GAAAC,GAAAH,EAAAC,EAAAE,GAAAF,MAAAiC,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA8P,EAAAxR,EAAA,aAAAyR,EAAAlQ,EAAAiQ,GwBjBjB3H,EAAc,KAEZlE,EAAA,WACJ,QADIA,GACQ+L,EAAOoB,EAAI7P,GAAAA,EAAAA,KADnB0C,GAEFhB,EAAc1D,MAAQyQ,MAAAA,EAAOoB,GAAAA,IAE7B7R,KAAK0Q,QAAa1O,EAAO8N,UAAP,SAAA,MAAA/L,GAJhBW,IAAAA,IAAAA,OAAAA,MAAAA,WAAAA,GAcCkM,GAAAhN,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAASA,UAAA,EACZ,OAAO5D,MAAKyQ,MAAMI,IAAI7Q,KAAK0Q,SAAWE,OAAAA,OAAAA,IAAAA,UAAAA,MAAAA,SAUhCA,GAAAA,GAAAA,GAAAA,IACN,OAAO5Q,MAAK6R,GAAG,SAACC,EAASC,GACvB/M,EAAKkK,KAAK0B,GACP9L,KAAK,SAAAmI,GACyB,IAAzBA,EAASC,KAAK3N,OAChBuS,EAAQ7E,EAASC,KAAK,IAEtB6E,EAAO,GAAI7S,OAAM,qBALvB8F,SAQS,WAAA,MAAM+M,GAAO,GAAI7S,OAAM,uCAAAiF,IAAA,MAAArE,MAAA,SAYhCsS,GAAAA,GAAQxB,GAAAhN,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAASA,UAAA,EACnB,OAAO5D,MAAKyQ,MAAMI,IAAO7Q,KAAK0Q,QAAL,IAAgB0B,GAAYxB,OAAAA,OAAAA,IAAAA,UAAAA,IAAAA,SAQ3ClP,GACVkH,EAAclH,GAAAA,IAAAA,WASd,MAAOkH,OAlELlE,IAsENA,GAAKqB,SAAW,QAAS,KAAM,UAAA1G,EAAA,WAEhBqB,EAAAA,WAAQjB,OAAO,qBAAqB+Q,EAAAA,aAChDQ,QAAQ,OAAQtM,GAChB/B,OP7ECsO,YAAa,GFIF3N,QEJX,YFImB+O,IAAO,SAAAtT,EAAAU,EAAAJ,GFAvB,YIHiB,SAAKiB,GAAwB/B,GJG9C,MIHiBA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAG,GAAA,KAAAH,YAAAG,IAAA,KAAA,IAAAiB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAG,GAAA,EAAAA,EAAAkF,UAAArE,OAAAb,IAAA,CAAA,GAAAF,GAAAoF,UAAAlF,EAAA,KAAA,GAAAD,KAAAD,GAAAoB,OAAAiE,UAAAC,eAAAxE,KAAAd,EAAAC,KAAAF,EAAAE,GAAAD,EAAAC,IAAA,MAAAF,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAG,GAAA,IAAA,GAAAF,GAAA,EAAAA,EAAAE,EAAAa,OAAAf,IAAA,CAAA,GAAAC,GAAAC,EAAAF,EAAAC,GAAAuF,WAAAvF,EAAAuF,aAAA,EAAAvF,EAAAwF,cAAA,EAAA,SAAAxF,KAAAA,EAAAyF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAE,EAAA0F,IAAA1F,IAAA,MAAA,UAAAC,EAAAF,EAAAC,GAAA,MAAAD,IAAAD,EAAAG,EAAAmF,UAAArF,GAAAC,GAAAF,EAAAG,EAAAD,GAAAC,MAAAmJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAApH,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA8P,EAAAxR,EAAA,aAAAyR,EAAAlQ,EAAAiQ,GAAAnK,EAAArH,EAAA,UAAAsH,EAAA/F,EAAA8F,GQEpBkM,EAAe,KAEb7N,EAAA,WACJ,QADIA,GACQgM,EAAOoB,EAAI7P,EAAQwC,GAAAA,EAAAA,KAD3BC,GAEFf,EAAc1D,MAAQyQ,MAAAA,EAAOoB,GAAAA,EAAIrN,KAAAA,IAEjCxE,KAAK0Q,QAAa1O,EAAO8N,UAAP,UAAA,MAAA/L,GAJhBU,IAAAA,IAAAA,OAAAA,MAAAA,WAAAA,GAcCmM,GAAAhN,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAASA,UAAA,EACZ,OAAO5D,MAAKyQ,MAAMI,IAAI7Q,KAAK0Q,SAAWE,OAAAA,OAAAA,IAAAA,UAAAA,MAAAA,SAUhCA,GAAAA,GAAAA,GAAAA,IACN,OAAO5Q,MAAK6R,GAAG,SAACC,EAASC,GACvB/M,EAAKkK,KAAK0B,GACP9L,KAAK,SAAAmI,GACyB,IAAzBA,EAASC,KAAK3N,OAChBuS,EAAQ7E,EAASC,KAAK,IAEtB6E,EAAO,GAAI7S,OAAM,sBALvB8F,SAQS,WAAA,MAAM+M,GAAO,GAAI7S,OAAM,uCAAAiF,IAAA,SAAArE,MAAA,SAY7BgN,EAAO8D,GAGZ,MAFAA,GAAS9I,EAAAA,WAAEyK,OAAQzF,MAAAA,GAAS8D,GAErB5Q,KAAKkP,KAAK0B,MAAAA,IAAAA,OAAAA,MAAAA,SAUdjP,GACH,MAAImG,GAAAA,WAAEwB,IAAI3H,EAAO,OACR3B,KAAKyQ,MAAMwB,IAAOjS,KAAK0Q,QAAL,IAAgB/O,EAAM4D,IAAO5D,GAE/C3B,KAAKyQ,MAAMM,KAAK/Q,KAAK0Q,QAAS/O,MAAAA,IAAAA,UAAAA,MAAAA,SAYjCA,EAAOC,GACb,MAAOkG,GAAAA,WAAEwB,IAAI3H,EAAO,WAAamG,EAAAA,WAAEwB,IAAI1H,EAAM,QAAUD,EAAM4H,OAAOC,QAAQ5H,EAAK2D,KAAO,MAAApB,IAAA,UAAAqO,IAAA,SAQ9E7Q,GACV2Q,EAAe3Q,EAGX3B,KAAKwE,KAAKS,SAAW6C,EAAAA,WAAEoH,KAAKlP,KAAKwE,KAAKS,QAAQyE,QAAS,KAAM/H,EAAM4D,QACrEvF,KAAKwE,KAAK7C,MAAQA,IAAAA,IAAAA,WAUpB,MAAO2Q,OApGL7N,IAwGNA,GAAMsB,SAAW,QAAS,KAAM,SAAU,QAAA1G,EAAA,WAE3BqB,EAAAA,WAAQjB,OAAO,sBAAsB+Q,EAAAA,WAAAnK,EAAAA,aACjD2K,QAAQ,QAASvM,GACjB9B,ORhHSsO,YRHS,GTqBjBwB,SDPc,GAAAnP,QAAA,UAAAwG,OAAe,WAAA4I,IAAuB,SAAA3T,EAAAU,EAAAJ,GCQpD,YAAO,SAAKiB,GACC/B,GAAA,MACVA,IAFIA,EAECgC,WAAAhC,GAAAiC,UAASjC,GAAA,QAAAmB,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAC,GAAAmF,UAAApF,EAAA,KAAA,GAAAM,KAAAL,GAAAmB,OAAAiE,UAAAC,eAAAxE,KAAAb,EAAAK,KAAAP,EAAAO,GAAAL,EAAAK,IAAA,MAAAP,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAe,OAAAd,IAAA,CAAA,GAAAK,GAAAN,EAAAC,EAAAK,GAAAkF,WAAAlF,EAAAkF,aAAA,EAAAlF,EAAAmF,cAAA,EAAA,SAAAnF,KAAAA,EAAAoF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAO,EAAAqF,IAAArF,IAAA,MAAA,UAAAN,EAAAC,EAAAK,GAAA,MAAAL,IAAAF,EAAAC,EAAAqF,UAAApF,GAAAK,GAAAP,EAAAC,EAAAM,GAAAN,MAAAqJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,G0BxBA8K,EAAA,WACnB,QADmBA,GACPC,EAAmBrO,EAAU4D,EAAUzD,EAAME,EAAOsN,EAAQvQ,EAAO4G,GAAAA,EAAAA,KAD5DoK,GAEjBjP,EAAc1D,MAAQ4S,kBAAAA,EAAmBrO,SAAAA,EAAU4D,SAAAA,EAAUzD,KAAAA,EAAME,MAAAA,EAAOsN,OAAAA,EAAQvQ,MAAAA,EAAO4G,SAAAA,IAEzFvI,KAAKwF,MAAQ,KACbxF,KAAK8I,SAEL9I,KAAK6S,YACA7S,KAAKuI,UACRvI,KAAK8S,cAAAA,MAAAA,GATUH,IAAAA,IAAAA,cAAAA,MAAAA,WAiBjB3S,KAAKuI,UACH5G,MAAO3B,KAAK2B,MAAM4D,IAClBuD,aAAAA,IAAAA,OAAAA,MAAAA,SASCP,GAAAA,GAAAA,GAAAA,KACCwK,EAASzP,QAAQ0P,KAAKzK,EAC1BwK,GAAOjK,MAAQhB,EAAAA,WAAEmL,IAAIF,EAAOjK,MAAO,SAAApH,GAAAA,OAAWA,KAAMA,EAAK6D,OAEzDvF,KAAKkT,QAAAA,EACLlT,KAAKwF,MAAQ,KACbxF,KAAKmI,SAASgL,KAAKJ,GAChBjO,KAAK,WACJE,EAAK4N,kBAAkBQ,QACvBpO,EAAKT,SAASuB,QAAQ,oBAH1B9F,SAKS,SAAAiN,GAAAA,MAAYjI,GAAKQ,MAAQyH,EAASC,KAAK1H,QAC7CV,KAAK,WAAA,MAAME,GAAKkO,QAAAA,OAAS/O,IAAA,YAAArE,MAAA,WAAA,GAAAvB,GAAAyB,IAQ5BA,MAAKmF,SAAAA,EACLnF,KAAK0E,KAAKwK,MAAOlC,OAAQ,cACtBlI,KAAK,SAAAmI,GAAAA,MAAY5H,GAAKyD,MAAQmE,EAASC,OAD1ClN,SAES,SAAAiN,GAAAA,MAAY5H,GAAKG,MAAQyH,EAASC,KAAK1H,QAC7CV,KAAK,WAAA,MAAMO,GAAKF,SAAAA,QApDFwN,IAAAA,GAAAA,WAAAA,EAwDrBA,EAAiB5M,SAAW,oBAAqB,WAAY,WAAY,OAAQ,QAAS,SAAU,QAAS,c1B/BrG+D,OiBpBM,WjBoBKuJ,IiBpBf,SjBoBItU,ESReU,EAAAJ,GTSfI,E2B5BDJ,Q3B4BM,6pGiB3B0BiU,IFOxB,SlB2BEvU,EGNTU,EAAAJ,GHOJ,YAAK,SYhBLK,GZiBQnB,EAAAE,GuBlCkB,KAAAF,YvBkCZE,IuBlCH,KACZ,IAAAkB,WAAO,qCAAcC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAE,GAAA,EAAAA,EAAAmF,UAAArE,OAAAd,IAAA,CAAA,GAAAD,GAAAoF,UAAAnF,EAAA,KAAA,GAAAC,KAAAF,GAAAoB,OAAAiE,UAAAC,eAAAxE,KAAAd,EAAAE,KAAAH,EAAAG,GAAAF,EAAAE,IAAA,MAAAH,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAE,GAAA,IAAA,GAAAD,GAAA,EAAAA,EAAAC,EAAAc,OAAAf,IAAA,CAAA,GAAAE,GAAAD,EAAAD,EAAAE,GAAAsF,WAAAtF,EAAAsF,aAAA,EAAAtF,EAAAuF,cAAA,EAAA,SAAAvF,KAAAA,EAAAwF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAG,EAAAyF,IAAAzF,IAAA,MAAA,UAAAD,EAAAD,EAAAE,GAAA,MAAAF,IAAAD,EAAAE,EAAAoF,UAAArF,GAAAE,GAAAH,EAAAE,EAAAC,GAAAD,MQJH8U,EAAA,WACnB,QADmBA,GACPX,EAAmBlO,EAAM0N,GAAAA,EAAAA,KADlBmB,GAEjB7P,EAAc1D,MAAQ4S,kBAAAA,EAAmBlO,KAAAA,IAEzC1E,KAAKwF,MAAQ,KAEbxF,KAAK6E,SAASuN,GAAAA,MAAAA,GANGmB,IAAAA,IAAAA,WAAAA,MAAAA,SAcVnB,GAAAA,GAAAA,GAAAA,IACPpS,MAAKmF,SAAAA,EACLnF,KAAK0E,KAAKmM,IAAIuB,GACXtN,KAAK,SAAAmI,GAAAA,MAAYjI,GAAKtD,KAAOuL,EAASC,OADzClN,SAES,SAAAiN,GAAAA,MAAYjI,GAAKQ,MAAQ,mBAC/BV,KAAK,WAAA,MAAME,GAAKG,SAAAA,QAnBFoO,IAAAA,GAAAA,WAAAA,EAuBrBA,EAAYxN,SAAW,oBAAqB,OAAQ,e/Be5CyN,IuBlCsB,SvBkCbzU,EADCU,EGLSJ,GHOnBI,EgCvCDJ,QhCuCM,8lDKxBFoU,IFoBJ,SHKM1U,EuBnCkBU,EvBmCDJ,GJmC9B,YIjCO,SGPgBiB,GsBhCO/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAfhC,GACZiC,UAAQjC,GAAA,QAAYmB,GAAMnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAE,GAAAkF,UAAApF,EAAA,KAAA,GAAAI,KAAAF,GAAAkB,OAAAiE,UAAAC,eAAAxE,KAAAZ,EAAAE,KAAAL,EAAAK,GAAAF,EAAAE,IAAA,MAAAL,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAE,GAAA,EAAAA,EAAAF,EAAAe,OAAAb,IAAA,CAAA,GAAAE,GAAAJ,EAAAE,EAAAE,GAAAoF,WAAApF,EAAAoF,aAAA,EAAApF,EAAAqF,cAAA,EAAA,SAAArF,KAAAA,EAAAsF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAK,EAAAuF,IAAAvF,IAAA,MAAA,UAAAJ,EAAAE,EAAAE,GAAA,MAAAF,IAAAH,EAAAC,EAAAqF,UAAAnF,GAAAE,GAAAL,EAAAC,EAAAI,GAAAJ,MAAAqJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAA6L,EAAA3U,EAAA,eAAA4U,EAAArT,EAAAoT,GAAAE,EAAA7U,EAAA,YAAA8U,EAAAvT,EAAAsT,GQDzBE,EAAY,GAAID,GAAAA,WAASE,UAERC,EAAA,WACnB,QADmBA,GACPpB,EAAmBqB,EAAQC,EAAUrH,EAAWtI,EAAUC,EAAMC,EAAOG,EAAOsN,EAAQvQ,GAAAA,EAAAA,KAD/EqS,GAEjBtQ,EAAc1D,MAAQ4S,kBAAAA,EAAmBqB,OAAAA,EAAQC,SAAAA,EAAUrH,UAAAA,EAAWtI,SAAAA,EAAUC,KAAAA,EAAMC,MAAAA,EAAOG,MAAAA,EAAOsN,OAAAA,EAAQvQ,MAAAA,IAE5G3B,KAAKwF,MAAQ,KAETxF,KAAK2B,MACP3B,KAAK2B,MAAMwS,eAAiBL,EAAUM,SAASpU,KAAK2B,MAAMwS,gBAE1DnU,KAAK8S,cAGHhL,EAAAA,WAAEuM,SAASrU,KAAKwE,KAAKS,UACvBjF,KAAKsU,oBAAAA,MAAAA,GAbUN,IAAAA,IAAAA,cAAAA,MAAAA,WAqBjBhU,KAAK2B,OACHgB,KAAM,GACN4R,KAAM,GACNC,WAAY,GACZL,eAAgB,OAAAhQ,IAAA,oBAAArE,MAAA,WAAA,GAAAvB,GAAAyB,IAUlBA,MAAKkU,SAAS,WACZlP,EAAKyP,OAAS,GAAIC,cAAaC,SAASC,iBAAiB,oBACvDC,aAAevI,KAAM,8BACrBwI,SAAWC,SAAU,OAAQ,SAAU,YAAa,SAAU,cAAe,kBAC7EC,UAAAA,IAGFhQ,EAAKyP,OAAOQ,UAAU,gBAAiB,SAACC,EAAOC,GAC7CnQ,EAAKiP,OAAOmB,OAAO,WACjBpQ,EAAKrD,MAAMwS,gBAAiB,EAAAR,EAAAA,YAAWwB,EAASE,WAC9CC,aAEEnF,OAAQ,SAAUoF,GAChB,MAAyB,SAAlBA,EAAKC,UAAyC,QAAlBD,EAAKC,UAE1CC,YAAa,SAAUC,GACrB,MAAOA,YAOjB1Q,EAAKiP,OAAO0B,IAAI,WAAY,WAAA,MAAM3Q,GAAKyP,OAAOmB,iBAAAA,IAAAA,iBAAAA,MAAAA,WAAAA,GAAAA,GAAAA,IAQhD5V,MAAK4E,MAAMiR,YACR/Q,KAAK,WAAA,MAAMO,GAAKb,KAAKsR,gBACrBhR,KAAK,WAAA,MAAMO,GAAKiP,sBAFnBtU,SAGS,SAACoJ,GAAAA,MAAQ,WAAAjF,IAAA,OAAArE,MAAA,SAQf6B,GAAAA,GAAAA,GAAAA,IACH3B,MAAKkT,QAAAA,EACLlT,KAAKwF,MAAQ,KACbxF,KAAKyE,MAAM0O,KAAKxR,GACbmD,KAAK,SAAAmI,GACJpH,EAAKpB,MAAMQ,QAAUgI,EAASC,KAC9BrH,EAAKrB,KAAKsR,cAEVjQ,EAAKgH,UAAUO,KAAf,MAA0BH,EAASC,KAAKzE,SACxC5C,EAAK+M,kBAAkBQ,QACvBvN,EAAKtB,SAASuB,QAAWgC,EAAAA,WAAEsI,WAAWvK,EAAKqM,QAAL,aAP1ClS,SASS,SAAAiN,GAAAA,MAAYpH,GAAKL,MAAQyH,EAASC,KAAK1H,QAC7CV,KAAK,WAAA,MAAMe,GAAKqN,QAAAA,QA1FFc,IAAAA,GAAAA,WAAAA,EA8FrBA,EAAcjO,SAAW,oBAAqB,SAAU,WAAY,YAAa,WAAY,OAAQ,QAAS,QAAS,SAAU,W5BlF1H+D,OeLK,SKNLiM,SzBoC0B,WsBhCHC,cAAc,KtBgCzBC,IyBtCU,SpBaVlX,EiBNGU,EAAAJ,GVelBI,EZgBSJ,QkC1CI,s5KTSb6W,IAAO,SzBkCOnX,EAAAU,EAAaJ,GJoC/B,YI7C2B,SAAAiB,GAAA/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAG,GAAA,KAAAH,YAAAG,IAAA,KAAA,IAAAiB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAG,GAAA,EAAAA,EAAAkF,UAAArE,OAAAb,IAAA,CAAA,GAAAI,GAAA8E,UAAAlF,EAAA,KAAA,GAAAF,KAAAM,GAAAc,OAAAiE,UAAAC,eAAAxE,KAAAR,EAAAN,KAAAD,EAAAC,GAAAM,EAAAN,IAAA,MAAAD,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAG,GAAA,IAAA,GAAAI,GAAA,EAAAA,EAAAJ,EAAAa,OAAAT,IAAA,CAAA,GAAAN,GAAAE,EAAAI,EAAAN,GAAAwF,WAAAxF,EAAAwF,aAAA,EAAAxF,EAAAyF,cAAA,EAAA,SAAAzF,KAAAA,EAAA0F,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAC,EAAA2F,IAAA3F,IAAA,MAAA,UAAAE,EAAAI,EAAAN,GAAA,MAAAM,IAAAP,EAAAG,EAAAmF,UAAA/E,GAAAN,GAAAD,EAAAG,EAAAF,GAAAE,MAAAmJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GAAApH,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAAE,EAAA5B,EAAA,iBAAA6B,EAAAN,EAAAK,GAAAwV,EAAApX,EAAA,mBAAAqX,EAAA9V,EAAA6V,GAAAE,EAAAtX,EAAA,wBAAAuX,EAAAhW,EAAA+V,GAAAnQ,EAAAnH,EAAA,kBAAAoH,EAAA7F,EAAA4F,GAAAuI,EAAA1P,EAAA,yBAAA2P,EAAApO,EAAAmO,EAAA1P,GAAA,oBAAA,IAAAwX,GAAAxX,EAAA,wBAAAyX,EAAAlW,EAAAiW,GAAArM,EAAAnL,EAAA,2BAAAqH,GAAA9F,EAAA4J,GAAAnL,EAAA,wBAAAsH,EAAA/F,EAAA8F,GAAAE,EAAAvH,EAAA,wBAAAwH,EAAAjG,EAAAgG,GAAA8D,EAAArL,EAAA,2BAAAsL,EAAA/J,EAAA8J,GAAA5D,EAAAzH,EAAA,uBAAA0H,EAAAnG,EAAAkG,GAAAiQ,EAAA1X,EAAA,qBAAA2X,EAAApW,EAAAmW,GAAAE,EAAA5X,EAAA,sBAAA6X,EAAAtW,EAAAqW,GAAAE,EAAA9X,EAAA,8BAAA+X,EAAAxW,EAAAuW,GAAAE,EAAAhY,EAAA,gCAAAiY,EAAA1W,EAAAyW,GAAAE,EAAAlY,EAAA,oCAAAmY,EAAA5W,EAAA2W,GAAAE,EAAApY,EAAA,sCAAAqY,EAAA9W,EAAA6W,GAAAE,EAAAtY,EAAA,8BAAAuY,EAAAhX,EAAA+W,GAAAE,EAAAxY,EAAA,oCAAAyY,EAAAlX,EAAAiX,GmCPrB3S,EAAA,WACJ,QADIA,GACQ6S,EAAW5F,GAAAA,EAAAA,KADnBjN,GAEFlB,EAAc1D,MAAQyX,UAAAA,EAAW5F,GAAAA,IAEjC7R,KAAK6P,UACH3N,aAAc,QACdwV,KAAM,MAAA,MAAA3T,GANNa,IAAAA,IAAAA,YAAAA,MAAAA,WAgBF,MAAO5E,MAAKyX,UAAUE,KAAK7P,EAAAA,WAAE+H,UAC3B/N,WAAA4U,EAAAA,WACA3U,SAAA6U,EAAAA,WACAc,KAAM,MACL1X,KAAK6P,WAAW+H,UAAAA,IAAAA,gBAAAA,MAAAA,WAAAA,GAWP1F,GAAAtO,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAS,SAAAA,UAAA,GAAUjC,EAAAiC,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAQ,KAAAA,UAAA,EACvC,OAAO5D,MAAKyX,UAAUE,KAAK7P,EAAAA,WAAE+H,UAC3B/N,WAAAgV,EAAAA,WACA/U,SAAAiV,EAAAA,WACAlF,SACEI,OAAQlS,KAAK6R,GAAGC,QAAQI,GACxBvQ,MAAO3B,KAAK6R,GAAGC,QAAQpR,EAAAA,WAAQsS,KAAKrR,MAErC3B,KAAK6P,WAAW+H,UAAAA,IAAAA,mBAAAA,MAAAA,WAAAA,GAYJ1F,GAAAtO,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAS,QAAAA,UAAA,GAASjC,EAAAiC,UAAA,GAAO2E,EAAA3E,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,GAAW,KAAAA,UAAA,EACnD,OAAO5D,MAAKyX,UAAUE,KAAK7P,EAAAA,WAAE+H,UAC3B/N,WAAAoV,EAAAA,WACAnV,SAAAqV,EAAAA,WACAtF,SACEI,OAAQlS,KAAK6R,GAAGC,QAAQI,GACxBvQ,MAAO3B,KAAK6R,GAAGC,QAAQpR,EAAAA,WAAQsS,KAAKrR,IACpC4G,SAAUvI,KAAK6R,GAAGC,QAAQpR,EAAAA,WAAQsS,KAAKzK,MAExCvI,KAAK6P,WAAW+H,UAAAA,IAAAA,kBAAAA,MAAAA,SAULxF,GACd,MAAOpS,MAAKyX,UAAUE,KAAK7P,EAAAA,WAAE+H,UAC3B/N,WAAAwV,EAAAA,WACAvV,SAAAyV,EAAAA,WACA1F,SACEM,OAAQpS,KAAK6R,GAAGC,QAAQM,KAEzBpS,KAAK6P,WAAW+H,WA7EjBhT,IAiFNA,GAAMmB,SAAW,YAAa,MAAA1G,EAAA,WAEfqB,EAAAA,WAAQjB,OAAO,sBAAsBmB,EAAAA,YAElD,EAAAwV,EAAAA,YAAA1V,EAAAA,YAFkD4V,EAAAA,WAAAnQ,EAAAA,WAAAuI,EAAAA,WAMlD,WANkD8H,EAAAA,WAAAnQ,EAAAA,WAAAE,EAAAA,WAAA8D,EAAAA,WAAA5D,EAAAA,aAajDuK,QAAQ,QAASpM,GACjBjC,KAGHjC,EAAAA,WAAQjB,OAAR6W,EAAAA,YACGuB,UAAU,kBAAmB,UAAW,SAAAC,GACvC,OACEC,SAAU,EACVC,KAAM,SAACC,EAAOC,GAOZ,QAASC,KACPD,EACGhJ,KAAK,eACLkJ,KACCC,UAA6B,IAAlBC,EAAOC,SAAkB,GACpCC,UAAW,SAVjB,GAAIF,GAAS5X,EAAAA,WAAQwX,QAAQJ,EAC7BQ,GAAOG,GAAG,SAAUN,GACpBF,EAAMtC,IAAI,WAAY,WAAA,MAAM2C,GAAOI,IAAI,SAAUP,KACjDA,WvCxDLQ,uBAAuB,GAAGhO,0BAA0B,GAAGC,0BAA0B,GAAGxD,sBAAsB,GAAGC,uBAAuB,GAAGE,sBAAsB,GAAGqR,mCAAmC,GAAGC,qCAAqC,GAAGC,6BAA6B,GAAGC,mCAAmC,GAAGC,6BAA6B,GAAGC,+BAA+B,GAAGC,oBAAoB,GAAGC,qBAAqB,GAAG7V,QAAU,UAAU8V,kBAAkB,kBAAkBzR,iBAAiB,iBAAiBpE,gBAAgB,gBAAgB8V,uBAAuB,uBAAuBC,oBAAoB,oBAAoBxK,wBAAwB,wBAAwBhF,OAAS,WAAWyP,IAAI,SAASxa,EAAQU,EAAOJ,GACxtB,YAAa,SiBnEEiB,GAAe/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAyBhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAQ1CC,OAAUC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAC,GAAAmF,UAAApF,EAAA,KAAA,GAAAE,KAAAD,GAAAmB,OAAAiE,UAAAC,eAAAxE,KAAAb,EAAAC,KAAAH,EAAAG,GAAAD,EAAAC,IAAA,MAAAH,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAe,OAAAd,IAAA,CAAA,GAAAC,GAAAF,EAAAC,EAAAC,GAAAsF,WAAAtF,EAAAsF,aAAA,EAAAtF,EAAAuF,cAAA,EAAA,SAAAvF,KAAAA,EAAAwF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAG,EAAAyF,IAAAzF,IAAA,MAAA,UAAAF,EAAAC,EAAAC,GAAA,MAAAD,IAAAF,EAAAC,EAAAqF,UAAApF,GAAAC,GAAAH,EAAAC,EAAAE,GAAAF,MAAAqJ,EAAA9I,EAAA,UAAA+I,EAAAxH,EAAAuH,GuBpBF2R,EAAA,WACnB,QADmBA,GACP5G,EAAmBtO,EAAcC,EAAUC,EAAMC,GAAAA,EAAAA,KAD1C+U,GAEjB9V,EAAc1D,MAAQ4S,kBAAAA,EAAmBtO,aAAAA,EAAcC,SAAAA,EAAUC,KAAAA,EAAMC,MAAAA,IAEvEzE,KAAKyZ,UAAY,KACb3R,EAAAA,WAAEwB,IAAIhF,EAAc,WACtBtE,KAAKyZ,WAAAA,GAAY,MAAA1V,GANFyV,IAAAA,IAAAA,uBAAAA,MAAAA,SAeEC,GAAAA,GAAAA,GAAAA,KACfC,IACAD,KACFC,EAAS/X,MAAQ3B,KAAKyE,MAAMQ,QAAQM,KAGtCvF,KAAKwE,KAAKmV,qBAAqBD,GAC5B5U,KAAK,WACA2U,IACFzU,EAAKR,KAAK7C,MAAQqD,EAAKP,MAAMQ,SAG/BD,EAAK4N,kBAAkBQ,QACvBpO,EAAKT,SAASuB,QAAQ,eAP1B9F,SASS,WAAA,MAAMgF,GAAKT,SAASiB,MAAM,0BAAArB,IAAA,oBAAArE,MAAA,SASnB8Z,EAAOC,GAAAA,GAAAA,GAAAA,IACvB7Z,MAAKwE,KAAKsV,kBAAkBF,EAAOC,GAChC/U,KAAK,WACJO,EAAKuN,kBAAkBQ,QACvB/N,EAAKd,SAASuB,QAAQ,eAH1B9F,SAKS,WAAA,MAAMqF,GAAKd,SAASiB,MAAM,2BA7ClBgU,IAAAA,GAAAA,WAAAA,EAiDrBA,EAAUzT,SAAW,oBAAqB,eAAgB,WAAY,OAAQ,WvB5B1E+D,OAAA,WAAAiQ,IAAA,SADmBhb,EAAAU,EAAAJ,GAEnBI,EwBxBGJ,QAAU,g8DxB0Bd2a,IAZY,SkBdMjb,EACPU,EAAAJ;AnCoFd,YiCnFqB,SAAAiB,GED0B/B,GAAA,MAAAA,IAAAA,EAAAgC,WAAAhC,GAAAiC,UAAAjC,GAAA,QAAAmB,GAAAnB,EAAAC,GAAA,KAAAD,YAAAC,IAAA,KAAA,IAAAmB,WAAA,qCAAAC,OAAAC,eAAAR,EAAA,cAAAS,OAAA,GAAA,IAAA4D,GAAA9D,OAAA+D,QAAA,SAAApF,GAAA,IAAA,GAAAC,GAAA,EAAAA,EAAAoF,UAAArE,OAAAf,IAAA,CAAA,GAAAE,GAAAkF,UAAApF,EAAA,KAAA,GAAAC,KAAAC,GAAAkB,OAAAiE,UAAAC,eAAAxE,KAAAZ,EAAAD,KAAAF,EAAAE,GAAAC,EAAAD,IAAA,MAAAF,IAAAwF,EAAA,WAAA,QAAAxF,GAAAA,EAAAC,GAAA,IAAA,GAAAE,GAAA,EAAAA,EAAAF,EAAAe,OAAAb,IAAA,CAAA,GAAAD,GAAAD,EAAAE,EAAAD,GAAAuF,WAAAvF,EAAAuF,aAAA,EAAAvF,EAAAwF,cAAA,EAAA,SAAAxF,KAAAA,EAAAyF,UAAA,GAAAtE,OAAAC,eAAAtB,EAAAE,EAAA0F,IAAA1F,IAAA,MAAA,UAAAD,EAAAE,EAAAD,GAAA,MAAAC,IAAAH,EAAAC,EAAAqF,UAAAnF,GAAAD,GAAAF,EAAAC,EAAAC,GAAAD,MAAAiC,EAAA1B,EAAA,WAAA2B,EAAAJ,EAAAG,GAAA8P,EAAAxR,EAAA,aAAAyR,EAAAlQ,EAAAiQ,GAAA0J,EAAAlb,EAAA,cAAAmb,EAAA5Z,EAAA2Z,GAAA/P,EAAAnL,EAAA,cAAAoL,EAAA7J,EAAA4J,GOM3CiQ,EAAc,KACd7H,EAAe,KAEb9N,EAAA,WACJ,QADIA,GACQ4V,EAAO3J,EAAOoB,EAAI7P,EAAQuC,GAAAA,EAAAA,KADlCC,GAEFd,EAAc1D,MAAQoa,MAAAA,EAAO3J,MAAAA,EAAOoB,GAAAA,EAAItN,SAAAA,IAExCvE,KAAK0Q,QAAa1O,EAAO8N,UAAP,SAElB9P,KAAK8V,cAAL9V,SAAyB,WAAA,MAAM,QAAA,MAAA+D,GAN7BS,IAAAA,IAAAA,uBAAAA,MAAAA,WAAAA,GAAAA,GAAAA,KAgBiBkV,EAAA9V,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAAWA,UAAA,EAC9B,OAAO5D,MAAKoa,MAAMC,aAAa,WAAYX,GACxC5U,KAAK,SAAAmI,GAEJ,MADAjI,GAAKoV,MAAME,SAASrN,EAASC,KAAKqN,OAC3BvV,EAAK8Q,mBAAAA,IAAAA,oBAAAA,MAAAA,SAYA8D,EAAOC,GAAAA,GAAAA,GAAAA,IACvB,OAAKD,IAAUC,EAIR7Z,KAAKoa,MAAMI,OAAQZ,MAAAA,EAAOC,SAAAA,IAC9B/U,KAAK,SAAAmI,GAEJ,MADA5H,GAAK+U,MAAME,SAASrN,EAASC,KAAKqN,OAC3BlV,EAAKyQ,gBANP9V,KAAK6R,GAAGE,OAAO,yCAAA5N,IAAA,kBAAArE,MAAA,WAgBxB,MAAOE,MAAKoa,MAAMK,qBAAAA,IAAAA,kBAAAA,MAAAA,SAQJ9Y,GACd,MACEqQ,GAAE1I,IAAI6Q,EAAa,WACnBnI,EAAE1I,IAAI3H,EAAO,QACbqQ,EAAE0I,KAAKP,EAAYzQ,OAAQ,SAAAiR,GAAAA,MAAaA,GAAUpV,MAAQ5D,EAAM4D,SAAAA,IAAAA,SAAAA,MAAAA,WAAAA,GAAAA,GAAAA,IAUlE,OAAOvF,MAAKoa,MAAMQ,SAAS9V,KAAK,WAC9BqV,EAAc,KACdtU,EAAKtB,SAASuB,QAAQ,mBAAA3B,IAAA,OAAArE,MAAA,WAAA,GAWrB8Q,GAAAhN,UAAArE,QAAA,GAAAmG,SAAA9B,UAAA,MAASA,UAAA,EACZ,OAAO5D,MAAKyQ,MAAMI,IAAI7Q,KAAK0Q,SAAWE,OAAAA,OAAAA,IAAAA,cAAAA,MAAAA,WAStC,MAAK5Q,MAAKya,kBAIHza,KAAKyQ,MAAMI,IAAO7Q,KAAK0Q,QAAL,OACtB5L,KAAK,SAAAmI,GAQJ,MAPAkN,GAAclN,EAASC,KAGnBiN,EAAYzQ,OAAOnK,SACrB+S,EAAe6H,EAAYzQ,OAAO,IAG7BuD,IAZFjN,KAAK6R,GAAGE,OAAO,oBAAA5N,IAAA,SAAArE,MAAA,SAwBnB8B,EAAMiZ,GAAAA,GAAAA,GAAAA,IACX,OAAO7a,MAAKyQ,MAAMqK,MAAS9a,KAAK0Q,QAAL,IAAgB9O,EAAK2D,IAAOsV,GACpD/V,KAAK,SAAAmI,GAAAA,MAAY9D,GAAK2M,mBAAAA,IAAAA,UAAAA,IAAAA,WASzB,MAAOqE,MAAAA,IAAAA,QAAAA,IAAAA,SAQCxY,GACR2Q,EAAe3Q,GAAAA,IAAAA,WASf,MAAO2Q,OArJL9N,IAyJNA,GAAKuB,SAAW,QAAS,QAAS,KAAM,SAAU,YAAA1G,EAAA,WAEnCqB,EAAAA,WAAQjB,OAAO,qBAAqB+Q,EAAAA,WAAA0J,EAAAA,WAAA/P,EAAAA,aAKhDnI,QAAQ,gBAAiB,SAAU,SAAC+Y,EAAe/Y,GAClD+Y,EAAcC,SAAchZ,EAAO8N,UAAP,cAC5BiL,EAAcE,UAAejZ,EAAO8N,UAAP,eAC7BiL,EAAcG,UACZC,SAAUnZ,EAAO+N,iBACjBqL,IAAQpZ,EAAO8N,UAAP,sBAGXkB,QAAQ,OAAQxM,GAChB7B,OThLDsO,YADmB,GAAAoK,aACP,GAAA/X,QAAA,UAAmBgY,WAAoB,eAAaC,IAAhE,SAA+Exc,EAA/EU,EAAyFJ,GLIzFI,EeFKJ,SACL,UVJmB,UUMnB,QVLyF,QUOzF,aACA,SACA,KACA,MACA,KACA,WACA,aACA,SACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,SACA,SACA,KACA,OACA,MACA,WACA,KACA,SACA,IACA,MACA,UACA,QACA,QACA,KACA,cZnCEmc,IAAA,SAAczc,EHCZU,EACuBJ,SGAvBoc,IFYa,SDXK1c,ErBoCpBU,EqBpCoBJ,GGAtB,YaUF,SXf2Fqc,GWetEnG,GACnB,SAAUA,IAAQoG,EAAcpG,EAAKC,WASvC,QAASoG,GAAOrG,GACd,SAAUA,IAAQsG,EAAatG,EAAKC,WAatC,QAASsG,GAAmBC,EAAMC,GAChC,GAAKD,EAAKE,YAAgC,QAAlBF,EAAKvG,SAA7B,CAEuB,kBAAZwG,KACTA,EAAUN,EASZ,KANA,GAAIQ,GAAW,KACXC,GAAAA,EAEAC,EAAO,KACP7G,EAAO8G,EAAKD,EAAML,GAEfxG,IAASwG,GAAM,CACpB,GAAsB,IAAlBxG,EAAK+G,SAAgB,CAEvB,GAAIhQ,GAAOiJ,EAAKrI,KAAKqP,QAAQ,cAAe,IAO5C,IALML,IAAY,KAAKM,KAAKN,EAAShP,OAAWiP,GAAwB,MAAZ7P,EAAK,KAC/DA,EAAOA,EAAKmQ,OAAO,KAIhBnQ,EAAM,CACTiJ,EAAOmH,EAAOnH,EACd,UAGFA,EAAKrI,KAAOZ,EACZ4P,EAAW3G,MACN,CAAA,GAAsB,IAAlBA,EAAK+G,SAcT,CACL/G,EAAOmH,EAAOnH,EACd,UAdIyG,EAAQzG,IAA2B,OAAlBA,EAAKC,UACpB0G,IACFA,EAAShP,KAAOgP,EAAShP,KAAKqP,QAAQ,KAAM,KAG9CL,EAAW,KACXC,GAAAA,GACSP,EAAOrG,KAEhB2G,EAAW,KACXC,GAAAA,GAOJ,GAAIQ,GAAWN,EAAKD,EAAM7G,EAC1B6G,GAAO7G,EACPA,EAAOoH,EAGLT,IACFA,EAAShP,KAAOgP,EAAShP,KAAKqP,QAAQ,KAAM,IACvCL,EAAShP,MACZwP,EAAOR,KAYb,QAASQ,GAAOnH,GACd,GAAI8G,GAAO9G,EAAKqH,aAAerH,EAAKsH,UAIpC,OAFAtH,GAAKsH,WAAWC,YAAYvH,GAErB8G,EAWT,QAASA,GAAKD,EAAMnX,GAClB,MAAImX,IAAQA,EAAKS,aAAe5X,GAAgC,QAArBA,EAAQuQ,SAC1CvQ,EAAQ2X,aAAe3X,EAAQ4X,WAGjC5X,EAAQgX,YAAchX,EAAQ2X,aAAe3X,EAAQ4X,WAlI9D,GAAIhB,GAAe9c,EAAQ,gBAC3Ba,QAAOmd,KAAKlB,GAAcmB,QAAQ,SAAUra,GAC1CkZ,EAAalZ,EAAKsa,eAAiB,GAGrC,IAAItB,KACJ5c,GAAQ,kBAAkBie,QAAQ,SAAUra,GAC1CgZ,EAAchZ,EAAKsa,eAAiB,IA8HtCxd,EAAOJ,QAAUyc,InBjHdoB,iBTeC,GAAeC,gBAAgB,KAAAC,IAFf,Sc7Bare,EAAAU,EAAAJ,GFK7B,YiBqBJ,SjBrBIge,GiBqBUC,GACZ,MAAOA,GAAOf,QAAQ,2BAA4B,IAWpD,QAASP,GAAQzG,GACf,MAAuD,KAAhDgI,EAAO/T,QAAQ+L,EAAKC,SAASgI,eAQtC,QAAS5B,GAAOrG,GACd,MAAsD,KAA/CkI,EAAMjU,QAAQ+L,EAAKC,SAASgI,eAOrC,QAASE,KACP,GAAIC,GAASC,EAAQC,UAAWC,GAAAA,CAIhC,MAAA,GAEUH,IAASI,gBAAgB,GAAI,eACnCD,GAAAA,GAEF,MAAOvf,IACT,MAAOuf,GAGT,QAASE,KACP,GAAIL,GAAS,YAab,OAXAA,GAAO9Z,UAAUka,gBAAkB,SAAUT,GAC3C,GAAIW,GAASC,EAAUC,eAAeC,mBAAmB,GAQzD,OANId,GAAOE,cAAchU,QAAQ,aAAe,GAC9CyU,EAAOI,gBAAgBhJ,UAAYiI,EAGnCW,EAAOK,KAAKjJ,UAAYiI,EAEnBW,GAEFN,EAKT,QAASY,GAAUjB,GACjB,GAAIkB,IAAAA,GAAWC,IAAaV,gBAAgBT,EAAQ,YAEpD,OADAoB,GAASF,EAAMxC,GACRwC,EAOT,QAASG,GAASpJ,GAKhB,IAJA,GAEIwG,GAAM6C,EAAU5f,EAFhB6f,GAAWtJ,GACXuJ,KAGGD,EAAQtf,OAAS,GAItB,IAHAwc,EAAO8C,EAAQE,QACfD,EAASE,KAAKjD,GACd6C,EAAW7C,EAAKkD,WACXjgB,EAAI,EAAIA,EAAI4f,EAASrf,OAAQP,IACH,IAAzB4f,EAAS5f,GAAGsd,UAAkBuC,EAAQG,KAAKJ,EAAS5f,GAI5D,OADA8f,GAASC,QACFD,EAOT,QAASI,GAAW3J,GAElB,IAAK,GADDjJ,GAAO,GACFtN,EAAI,EAAGA,EAAIuW,EAAK0J,WAAW1f,OAAQP,IAC1C,GAAoC,IAAhCuW,EAAK0J,WAAWjgB,GAAGsd,SACrBhQ,GAAQiJ,EAAK0J,WAAWjgB,GAAGmgB,iBAExB,CAAA,GAAoC,IAAhC5J,EAAK0J,WAAWjgB,GAAGsd,SAGrB,QAFLhQ,IAAQiJ,EAAK0J,WAAWjgB,GAAGkO,KAI/B,MAAOZ,GAOT,QAAS8S,GAAM7J,EAAMG,GACnB,MAAOH,GAAK8J,WAAAA,GAAiBC,UAAU/C,QAAQ,KAAM,IAAK7G,EAAS,KAGrE,QAAS6J,GAAWhK,EAAMpF,GACxB,GAAsB,gBAAXA,GACT,MAAOA,KAAWoF,EAAKC,SAASgI,aAElC,IAAIgC,MAAMC,QAAQtP,GAChB,MAAuD,KAAhDA,EAAO3G,QAAQ+L,EAAKC,SAASgI,cAEjC,IAAsB,kBAAXrN,GACd,MAAOA,GAAO7Q,KAAKogB,EAAYnK,EAG/B,MAAM,IAAI5V,WAAU,qDAIxB,QAASggB,GAAsBC,EAAMrK,GACnC,GAAIsK,GAASC,EAAQC,CAmBrB,OAjBa,SAATH,GACFC,EAAUtK,EAAKyK,gBACfF,EAAS,OAGTD,EAAUtK,EAAKqH,YACfkD,EAAS,MAGPD,IACuB,IAArBA,EAAQvD,SACVyD,EAAYD,EAAOtD,KAAKqD,EAAQI,WAEL,IAArBJ,EAAQvD,UAAmBN,EAAQ6D,KACzCE,EAAYD,EAAOtD,KAAKqD,EAAQK,eAG7BH,EAGT,QAASI,GAAmB5K,GAC1B,GAAI6K,GAAU,GAAIC,EAAW,EAE7B,KAAKrE,EAAQzG,GAAO,CAClB,GAAI+K,GAAa,aAAa9D,KAAKjH,EAAKF,WACpCkL,EAAc,aAAa/D,KAAKjH,EAAKF,UAErCiL,KAAeX,EAAsB,OAAQpK,KAC/C6K,EAAU,KAERG,IAAgBZ,EAAsB,QAASpK,KACjD8K,EAAW,KAIf,OAASD,QAASA,EAASC,SAAUA,GAQvC,QAASG,GAAQjL,GACf,GAAIE,GAAaC,EAAUwJ,EAAW3J,EAGtC,KAAKqG,EAAOrG,KAAU,IAAIiH,KAAKjH,EAAKC,WAAa,SAASgH,KAAK9G,GAE7D,YADAH,EAAK4J,aAAe,GAItB,KAAK,GAAIngB,GAAI,EAAGA,EAAIsW,EAAW/V,OAAQP,IAAK,CAC1C,GAAI8U,GAAYwB,EAAWtW,EAE3B,IAAIugB,EAAWhK,EAAMzB,EAAU3D,QAAS,CACtC,GAAqC,kBAA1B2D,GAAU2B,YACnB,KAAM,IAAI9V,WACR,6DAIJ,IAAI8gB,GAAaN,EAAmB5K,IAEhCkL,EAAWL,SAAWK,EAAWJ,YACnC3K,EAAU2H,EAAK3H,IAEjBD,EAAcgL,EAAWL,QACXtM,EAAU2B,YAAYnW,KAAKogB,EAAYhK,EAASH,GAChDkL,EAAWJ,QACzB,QAIJ9K,EAAK4J,aAAe1J,EArOtB,GAAIiK,GACApK,EAS2D4I,EAR3DwC,EAAe3hB,EAAQ,uBACvB4hB,EAAgB5hB,EAAQ,wBACxB2f,EAAW3f,EAAQ,uBAMnB6e,EAA6B,mBAAXtF,QAAyBA,OAAStY,IAEtDke,GADsB,mBAAbvJ,UACG5V,EAAQ,SAAS6hB,QAGjBjM,QAWd,IAAI4I,IAAU,UAAW,UAAW,QAAS,QAAS,aAAc,OAClE,SAAU,SAAU,KAAM,MAAO,MAAO,KAAM,KAAM,WAAY,aAChE,SAAU,SAAU,OAAQ,WAAY,KAAM,KAAM,KAAM,KAAK,KAAM,KACrE,SAAU,SAAU,KAAM,OAAQ,UAAW,KAAM,OAAQ,OAAQ,MACnE,WAAY,WAAY,KAAM,SAAU,IAAK,MAAO,UAAW,QAC/D,QAAS,KAAM,QAAS,KAAM,QAAS,KAAM,MAO3CE,GACF,OAAQ,OAAQ,KAAM,MAAO,UAAW,QAAS,KAAM,MAAO,QAC9D,SAAU,OAAQ,OAAQ,QAAS,SAAU,QAAS,OA0CpDgB,EAAaf,IAAiBE,EAAQC,UAAYG,GAsJtD0B,GAAa,SAAUhO,EAAOmP,GAG5B,GAFAA,EAAUA,MAEW,gBAAVnP,GACT,KAAM,IAAI/R,WAAU+R,EAAQ,mBAI9BA,GAAQA,EAAM6K,QAAQ,YAAa,SAEnC,IAEIuE,GAFAC,EAAQxC,EAAU7M,GAAO4M,KACzB0C,EAAQrC,EAASoC,EAGrBzL,GAAaoL,EAAaO,MAAM,GAC5BJ,EAAQK,MACV5L,EAAaqL,EAAcQ,OAAO7L,IAGhCuL,EAAQvL,aACVA,EAAauL,EAAQvL,WAAW6L,OAAO7L,GAIzC,KAAK,GAAItW,GAAIgiB,EAAMzhB,OAAS,EAAGP,GAAK,EAAGA,IACrCwhB,EAAQQ,EAAMhiB,GAIhB,OAFA8hB,GAAS5B,EAAW6B,GAEbD,EAAOvE,QAAQ,2BAA4B,IACpCA,QAAQ,WAAY,QACpBA,QAAQ,UAAW,SAGnCmD,EAAW1D,QAAUA,EACrB0D,EAAW9D,OAASA,EACpB8D,EAAWrC,KAAOA,EAClBqC,EAAWN,MAAQA,EAEnB3f,EAAOJ,QAAUqgB,IjBlRf0B,uBCYuC,GtB6BdC,sBwBxCM,GAAAC,sBAAA,GAAAV,MAAA,KAAAW,IAAA,SAAAxiB,EAAAU,EAAAJ,GxByCvB,YuC/CV,SbQSmiB,G1BuCgBjjB,EAAEC,GuC9CzB,GAAIijB,GAAQjC,MAAM3b,UvC8CiB2F,QADVlK,KuC7CgBiW,EAAKsH,WAAWoC,WAAY1J,GACjEmM,EAAS,GAEb,OADc,KAAVD,IAAeC,EAAS,MACrBA,EAAShM,EAAU,KAG5B,GAAIiM,GAAiB,2BAErBliB,GAAOJ,UAEH8Q,OAAQ,KACRsF,YAAa,WACX,MAAO,QAITtF,QAAS,MAAO,IAAK,UACrBsF,YAAa,SAAUC,GACrB,MAAO,KAAOA,EAAU,QAK1BvF,OAAQ,SAAUoF,GAChB,MAAqB,aAAdA,EAAKqM,MAAoD,OAA7BrM,EAAKsH,WAAWrH,UAErDC,YAAa,SAAUC,EAASH,GAC9B,OAAQA,EAAKsM,QAAU,MAAQ,OAAS,OAK1C1R,QAAS,KAAM,MACfsF,YAAa,SAAUC,EAASH,GAC9B,MAAOiM,GAAK9L,EAASH,MAKvBpF,OAAQ,KACRsF,YAAa,SAAUC,EAASH,GAC9B,GAAIuM,GAAc,GACdC,GAAaC,KAAM,MAAOC,MAAO,MAAOC,OAAQ,MAEpD,IAAiC,UAA7B3M,EAAKsH,WAAWrH,SAClB,IAAK,GAAIxW,GAAI,EAAGA,EAAIuW,EAAK0J,WAAW1f,OAAQP,IAAK,CAC/C,GAAImjB,GAAQ5M,EAAK0J,WAAWjgB,GAAGojB,WAAWD,MACtCE,EAAS,KAETF,KAASE,EAASN,EAASI,EAAMriB,QAAUuiB,GAE/CP,GAAeN,EAAKa,EAAQ9M,EAAK0J,WAAWjgB,IAGhD,MAAO,KAAO0W,GAAWoM,EAAc,KAAOA,EAAc,OAK9D3R,OAAQ,QACRsF,YAAa,SAAUC,GACrB,MAAO,OAASA,EAAU,UAK5BvF,QAAS,QAAS,QAAS,SAC3BsF,YAAa,SAAUC,GACrB,MAAOA,MAMTvF,OAAQ,SAAUoF,GAChB,MAAyB,QAAlBA,EAAKC,UACLD,EAAK0G,YACwB,SAA7B1G,EAAK0G,WAAWzG,UAEzBC,YAAa,SAASC,EAASH,GAC7B,MAAO,YAAcA,EAAK0G,WAAWiE,YAAc,eAMrD/P,OAAQ,SAAUoF,GAChB,MAAyB,QAAlBA,EAAKC,UACwB,QAA7BD,EAAKsH,WAAWrH,UAChBmM,EAAenF,KAAKjH,EAAKsH,WAAWyF,YAE7C7M,YAAa,SAAUC,EAASH,GAC9B,GAAIgN,GAAWhN,EAAKsH,WAAWyF,UAAUE,MAAMb,GAAgB,EAC/D,OAAO,UAAYY,EAAW,KAAOhN,EAAK2K,YAAc,eAK1D/P,OAAQ,SAAUoF,GAChB,MAAyB,QAAlBA,EAAKC,UACLmM,EAAenF,KAAKjH,EAAK+M,YAElC7M,YAAa,SAAUC,GACrB,MAAO,OAASA,EAAU,ef/F5B+M,IAAK,SAAa1jB,EAAOU,ExBuCAJ,GwClD7B,YAEAI,GAAOJ,UAEH8Q,OAAQ,IACRsF,YAAa,SAAUC,GACrB,MAAO,OAASA,EAAU,UAK5BvF,OAAQ,KACRsF,YAAa,WACX,MAAO,UAKTtF,QAAS,KAAM,KAAM,KAAM,KAAK,KAAM,MACtCsF,YAAa,SAASC,EAASH,GAG7B,IAAI,GAFAmN,GAASnN,EAAKC,SAASmN,OAAO,GAC9BC,EAAU,GACN5jB,EAAI,EAAO0jB,EAAJ1jB,EAAYA,IACzB4jB,GAAW,GAEb,OAAO,OAASA,EAAU,IAAMlN,EAAU,UAK5CvF,OAAQ,KACRsF,YAAa,WACX,MAAO,mBAKTtF,QAAS,KAAM,KACfsF,YAAa,SAAUC,GACrB,MAAO,IAAMA,EAAU,OAKzBvF,QAAS,SAAU,KACnBsF,YAAa,SAAUC,GACrB,MAAO,KAAOA,EAAU,QAM1BvF,OAAQ,SAAUoF,GAChB,GAAIsN,GAActN,EAAKyK,iBAAmBzK,EAAKqH,YAC3CkG,EAA2C,QAA7BvN,EAAKsH,WAAWrH,WAAuBqN,CAEzD,OAAyB,SAAlBtN,EAAKC,WAAwBsN,GAEtCrN,YAAa,SAASC,GACpB,MAAO,IAAMA,EAAU,OAKzBvF,OAAQ,SAAUoF,GAChB,MAAyB,MAAlBA,EAAKC,UAAoBD,EAAKwN,aAAa,SAEpDtN,YAAa,SAASC,EAASH,GAC7B,GAAIyN,GAAYzN,EAAKxQ,MAAQ,KAAMwQ,EAAKxQ,MAAO,IAAM,EACrD,OAAO,IAAM2Q,EAAU,KAAOH,EAAKwN,aAAa,QAAUC,EAAY,OAKxE7S,OAAQ,MACRsF,YAAa,SAASC,EAASH,GAC7B,GAAI0N,GAAM1N,EAAK0N,KAAO,GAClBC,EAAM3N,EAAKwN,aAAa,QAAU,GAClChe,EAAQwQ,EAAKxQ,OAAS,GACtBie,EAAYje,EAAQ,KAAMA,EAAO,IAAM,EAC3C,OAAOme,GAAM,KAAOD,EAAM,KAAYC,EAAMF,EAAY,IAAM,MAMhE7S,OAAQ,SAAUoF,GAChB,MAAyB,QAAlBA,EAAKC,UAAmD,SAA7BD,EAAK0G,WAAWzG,UAEpDC,YAAa,SAASC,EAASH,GAC7B,MAAO,WAAaA,EAAK0G,WAAWiE,YAAY3D,QAAQ,MAAO,UAAY,UAK7EpM,OAAQ,aACRsF,YAAa,SAAUC,GAIrB,MAHAA,GAAU1V,KAAKqd,KAAK3H,GACpBA,EAAUA,EAAQ6G,QAAQ,UAAW,QACrC7G,EAAUA,EAAQ6G,QAAQ,MAAO,MAC1B,OAAS7G,EAAU,UAK5BvF,OAAQ,KACRsF,YAAa,SAAUC,EAASH,GAC9BG,EAAUA,EAAQ6G,QAAQ,OAAQ,IAAIA,QAAQ,OAAQ,SACtD,IAAImF,GAAS,OACTyB,EAAS5N,EAAKsH,WACd4E,EAAQjC,MAAM3b,UAAU2F,QAAQlK,KAAK6jB,EAAOvE,SAAUrJ,GAAQ,CAGlE,OADAmM,GAAS,MAAMlF,KAAK2G,EAAO3N,UAAYiM,EAAQ,MAAQ,OAChDC,EAAShM,KAKlBvF,QAAS,KAAM,MACfsF,YAAa,SAAUC,EAASH,GAE9B,IAAK,GADD6N,MACKpkB,EAAI,EAAGA,EAAIuW,EAAK0J,WAAW1f,OAAQP,IAC1CokB,EAAQpE,KAAKzJ,EAAK0J,WAAWjgB,GAAGmgB,aAGlC,OAAI,MAAM3C,KAAKjH,EAAKsH,WAAWrH,UACtB,KAAO4N,EAAQC,KAAK,MAEtB,OAASD,EAAQC,KAAK,MAAQ,UAKvClT,OAAQ,SAAUoF,GAChB,MAAOvV,MAAKgc,QAAQzG,IAEtBE,YAAa,SAAUC,EAASH,GAC9B,MAAO,OAASvV,KAAKof,MAAM7J,EAAMG,GAAW,UAM9CvF,OAAQ,WACN,OAAA,GAEFsF,YAAa,SAAUC,EAASH,GAC9B,MAAOvV,MAAKof,MAAM7J,EAAMG,Wf5I1B4N,IAAA,SAAevkB,EAAfU,EzB6CIJ,GyC/CRI,EzCyCYJ,SyCxCVkkB,MAAAA,EACAC,MAAAA,EACAC,IAAAA,EACAC,KAAAA,EACAC,OAAAA,EACAC,IAAAA,EACAC,KAAAA,EACAnS,OAAAA,EACAoS,QAAAA,EACA9L,MAAAA,EACA+L,UAAAA,EACAC,MAAAA,EACAC,OAAAA,EACAC,QAAAA,EACAC,OAAAA,EACAC,KAAAA,aRnBmB","file":"app-ba5f909727.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var AppCtrl=function t(){_classCallCheck(this,t),this.date=Date.now()};exports[\"default\"]=AppCtrl;\n},{}],2:[function(require,module,exports){\nmodule.exports='<navbar></navbar>\\n\\n<ng-view></ng-view>\\n\\n<footer class=\"footer\">\\n  <div class=\"container\">\\n    <div class=\"pull-left\">\\n      <small>\\n        &copy; {{ $ctrl.date | date:\\'yyyy\\' }} The Love is our Weapon Campaign\\n      </small>\\n    </div>\\n    <!-- TODO: add Help, Privacy & Terms links -->\\n    <!--<div class=\"pull-right\">\\n      <small>\\n        <ul class=\"list-inline\">\\n          <li><a href=\"#\">Help</a></li>\\n          <li><a href=\"#\">Privacy &amp; Terms</a></li>\\n        </ul>\\n      </small>\\n    </div>-->\\n  </div>\\n</footer>\\n';\n},{}],3:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularRoute=require(\"angular-route\"),_angularRoute2=_interopRequireDefault(_angularRoute),_uiSelect=require(\"ui-select\"),_uiSelect2=_interopRequireDefault(_uiSelect),_navbar=require(\"../navbar\"),_navbar2=_interopRequireDefault(_navbar),_home=require(\"../home\"),_deed=require(\"../deed\"),_group=require(\"../group\"),_user=require(\"../user\"),_AppCtrl=require(\"./AppCtrl\"),_AppCtrl2=_interopRequireDefault(_AppCtrl),_app=require(\"./app.html\"),_app2=_interopRequireDefault(_app);exports[\"default\"]=_angular2[\"default\"].module(\"app\",[_angularRoute2[\"default\"],_uiSelect2[\"default\"],_navbar2[\"default\"],_home.home,_deed.deed,_group.group,_user.user]).component(\"app\",{controller:_AppCtrl2[\"default\"],template:_app2[\"default\"]}).config([\"$routeProvider\",\"$locationProvider\",\"uiSelectConfig\",function(e,r,t){e.when(\"/\",{controller:\"HomeCtrl\",controllerAs:\"$ctrl\",template:_home.homeTpl}).when(\"/d/:deed\",{controller:\"DeedCtrl\",controllerAs:\"$ctrl\",template:_deed.deedTpl}).when(\"/g/:group\",{controller:\"GroupCtrl\",controllerAs:\"$ctrl\",template:_group.groupTpl}).when(\"/u/:user\",{controller:\"UserCtrl\",controllerAs:\"$ctrl\",template:_user.userTpl}).otherwise(\"/\"),r.html5Mode(!0),t.theme=\"bootstrap\",t.appendToBody=!0}]).name,_angular2[\"default\"].module(_uiSelect2[\"default\"]).config([\"$provide\",function(e){function r(r,t){e.decorator(r,[\"$delegate\",function(e){var r=e[0],l=r.templateUrl;return r.templateUrl=function(e){return e.addClass(t),l(e)},e}])}r(\"uiSelectChoicesDirective\",\"ui-select-choices\"),r(\"uiSelectMatchDirective\",\"ui-select-match\")}]);\n},{\"../deed\":6,\"../group\":9,\"../home\":12,\"../navbar\":17,\"../user\":20,\"./AppCtrl\":1,\"./app.html\":2,\"angular\":\"angular\",\"angular-route\":\"angular-route\",\"ui-select\":\"ui-select\"}],4:[function(require,module,exports){\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),DeedCtrl=function(){function e(t,n,r,o,i,u,c,a){var l=this;_classCallCheck(this,e),_extends(this,{Alertify:r,User:o,Group:i,Deed:u,Act:c,Modal:a}),this.loadDeed(n.deed).then(function(){return t.title=l.Deed.current?l.Deed.current.title:null})}return _createClass(e,[{key:\"loadDeed\",value:function(e){var t=this;return this.loading=!0,this.Deed.findOne({urlTitle:e}).then(function(e){t.Deed.current=e,t.Act.count({deed:e._id})})[\"catch\"](function(e){t.error=e.message,t.Deed.current=null}).then(function(){return t.loading=!1})}},{key:\"done\",value:function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.doing=!0,this.Act.done(e,n).then(function(){t.Act.count(),t.Act.count({deed:e._id}),t.Alertify.success(\"Deed done!\")})[\"catch\"](function(){return t.Alertify.error(\"Failed registering deed\")}).then(function(){return t.doing=!1})}}]),e}();exports[\"default\"]=DeedCtrl,DeedCtrl.$inject=[\"$rootScope\",\"$routeParams\",\"Alertify\",\"User\",\"Group\",\"Deed\",\"Act\",\"Modal\"];\n},{}],5:[function(require,module,exports){\nmodule.exports='<videotron video-url=\"$ctrl.Deed.current.videoUrl\"></videotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-3 col-sm-push-9\">\\n        <p>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary btn-block btn-lg\"\\n                  ng-click=\"$ctrl.done($ctrl.Deed.current, $ctrl.User.group)\"\\n                  ng-if=\"$ctrl.User.isAuthenticated()\"\\n                  ng-disabled=\"$ctrl.doing\">\\n            <img src=\"/images/logo-invert.png\" class=\"img-responsive img-btn\" ng-hide=\"$ctrl.doing\">\\n            <i class=\"fa fa-cog fa-lg fa-spin\" ng-show=\"$ctrl.doing\"></i>\\n            Done\\n          </button>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary btn-block btn-lg\"\\n                  ng-click=\"$ctrl.Modal.openLogin()\"\\n                  ng-if=\"!$ctrl.User.isAuthenticated()\">\\n            <i class=\"fa fa-fw fa-user\"></i>\\n            Login\\n          </button>\\n        </p>\\n      </div>\\n\\n      <div class=\"col-sm-9 col-sm-pull-3\">\\n        <div class=\"deed-header m-b-md\">\\n          <img src=\"/images/deed.png\" class=\"img-responsive img-circle pull-left m-t-xxs m-r-sm\">\\n          <h1 class=\"m-none\">\\n            {{ $ctrl.Deed.current.title }}\\n          </h1>\\n          <p class=\"m-none\">\\n            <span class=\"f-lg\">\\n              {{ $ctrl.Act.counters[$ctrl.Deed.current._id] | number }}\\n            </span>\\n            acts of love\\n          </p>\\n        </div>\\n        <div marked=\"$ctrl.Deed.current.content\"></div>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],6:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.deed=exports.deedTpl=void 0;var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularMarked=require(\"angular-marked\"),_angularMarked2=_interopRequireDefault(_angularMarked),_User=require(\"../../services/User\"),_User2=_interopRequireDefault(_User),_Group=require(\"../../services/Group\"),_Group2=_interopRequireDefault(_Group),_Deed=require(\"../../services/Deed\"),_Deed2=_interopRequireDefault(_Deed),_Act=require(\"../../services/Act\"),_Act2=_interopRequireDefault(_Act),_Modal=require(\"../../services/Modal\"),_Modal2=_interopRequireDefault(_Modal),_videotron=require(\"../videotron\"),_videotron2=_interopRequireDefault(_videotron),_DeedCtrl=require(\"./DeedCtrl\"),_DeedCtrl2=_interopRequireDefault(_DeedCtrl),_deed=require(\"./deed.html\"),_deed2=_interopRequireDefault(_deed),deedTpl=exports.deedTpl=_deed2[\"default\"],deed=exports.deed=_angular2[\"default\"].module(\"app.components.deed\",[_angularMarked2[\"default\"],_User2[\"default\"],_Group2[\"default\"],_Deed2[\"default\"],_Act2[\"default\"],_Modal2[\"default\"],_videotron2[\"default\"]]).controller(\"DeedCtrl\",_DeedCtrl2[\"default\"]).name;\n},{\"../../services/Act\":29,\"../../services/Deed\":32,\"../../services/Group\":33,\"../../services/Modal\":40,\"../../services/User\":43,\"../videotron\":22,\"./DeedCtrl\":4,\"./deed.html\":5,\"angular\":\"angular\",\"angular-marked\":\"angular-marked\"}],7:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_seedrandom=require(\"seedrandom\"),_seedrandom2=_interopRequireDefault(_seedrandom),NUM_IMAGES=6,GroupCtrl=function(){function e(n,t,r,a,u,o,i,l){var s=this;_classCallCheck(this,e),_extends(this,{Alertify:r,User:a,Group:u,Campaign:o,Act:i,Modal:l}),this.jumbotronBackground=\"/images/header\"+Math.floor((0,_seedrandom2[\"default\"])(t.group)()*NUM_IMAGES)+\".jpg\",this.campaign=null,this.loadGroup(t.group).then(function(){return n.title=s.Group.current?s.Group.current.name:null})}return _createClass(e,[{key:\"loadGroup\",value:function(e){var n=this;return this.loading=!0,this.Group.findOne({urlName:e}).then(function(e){n.Group.current=e,n.Act.count({group:e._id}),n.loadCampaign(e)})[\"catch\"](function(e){n.error=e.message,n.Group.current=null}).then(function(){return n.loading=!1})}},{key:\"loadCampaign\",value:function(e){var n=this;this.Campaign.findOne({group:e._id,active:!0})[\"catch\"](function(){return null}).then(function(e){n.campaign=e,n.campaign&&(n.Act.count({campaign:n.campaign._id}),n.currentDeed=_lodash2[\"default\"].findLast(n.campaign.deeds,{published:!0})),n.showCampaignAlert=n.setCampaignAlert(n.campaign,n.Group.current,n.User.current)})}},{key:\"setPublished\",value:function(e,n){var t=this,r=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];this.Campaign.setPublished(e,n,r).then(function(){return t.loadCampaign(t.Group.current)})[\"catch\"](function(e){return null})}},{key:\"setCampaignAlert\",value:function(e,n,t){return _lodash2[\"default\"].isNull(e)&&_lodash2[\"default\"].has(n,\"admins\")&&_lodash2[\"default\"].has(t,\"_id\")&&-1!==n.admins.indexOf(t._id)}},{key:\"addUserToGroup\",value:function(e,n){var t=this;this.User.update(e,{groups:n._id}).then(function(){t.User.group=n,t.Alertify.success(\"Joined group\")})[\"catch\"](function(e){return null})}},{key:\"setupCampaign\",value:function(e){var n=this;this.Modal.openCampaignEdit(\"setup\",e).then(function(){return n.loadCampaign(e)})[\"catch\"](function(e){return null})}}]),e}();exports[\"default\"]=GroupCtrl,GroupCtrl.$inject=[\"$rootScope\",\"$routeParams\",\"Alertify\",\"User\",\"Group\",\"Campaign\",\"Act\",\"Modal\"];\n},{\"lodash\":\"lodash\",\"seedrandom\":\"seedrandom\"}],8:[function(require,module,exports){\nmodule.exports='<jumbotron image=\"/images/group.png\"\\n           background=\"{{ $ctrl.jumbotronBackground }}\"\\n           title=\"{{ $ctrl.Group.current.name }}\"\\n           text=\"\\n             <span class=\\'f-lg\\'>\\n               {{ $ctrl.Act.counters[$ctrl.Group.current._id] | number }}\\n             </span> acts of love\\n           \"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-3 col-sm-push-9 m-b-lg\">\\n        <div class=\"well well-sm\"\\n             ng-if=\"$ctrl.User.isMemberOfGroup($ctrl.Group.current) && $ctrl.campaign !== null\">\\n          <h5 class=\"text-center\">\\n            Current Campaign\\n            <br>\\n            <small>\\n              <span class=\\'label label-default m-r-xs\\'>\\n                {{ $ctrl.Act.counters[$ctrl.campaign._id] | number }}\\n              </span>\\n              acts of love\\n            </small>\\n          </h5>\\n\\n          <!-- TODO: move buttons to a directive -->\\n          <!-- Show buttons with publish/unpublish menu for admins -->\\n          <div class=\"btn-group btn-block\"\\n               ng-repeat=\"item in $ctrl.campaign.deeds\"\\n               ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            <a class=\"btn col-sm-10\"\\n               ng-class=\"{\\n                 \\'btn-primary\\': item.published,\\n                 \\'btn-default\\': !item.published,\\n                 \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n               }\"\\n               ng-href=\"/d/{{ item.deed.urlTitle }}\">\\n              {{ item.deed.title }}\\n            </a>\\n            <button type=\"button\"\\n                    class=\"btn dropdown-toggle col-sm-2\"\\n                    ng-class=\"{\\n                      \\'btn-primary\\': item.published,\\n                      \\'btn-default\\': !item.published,\\n                      \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n                    }\"\\n                    data-toggle=\"dropdown\"\\n                    aria-haspopup=\"true\"\\n                    aria-expanded=\"false\">\\n              <span class=\"caret\"></span>\\n              <span class=\"sr-only\">Toggle Dropdown</span>\\n            </button>\\n            <ul class=\"dropdown-menu dropdown-menu-right\">\\n              <li ng-hide=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, true)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-up\"></i>\\n                  Publish\\n                </a>\\n              </li>\\n              <li ng-show=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, false)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-down\"></i>\\n                  Unpublish\\n                </a>\\n              </li>\\n            </ul>\\n          </div>\\n\\n          <!-- Show a normal button for non-admins -->\\n          <a class=\"btn btn-block\"\\n             ng-repeat=\"item in $ctrl.campaign.deeds\"\\n             ng-href=\"/d/{{ item.deed.urlTitle }}\"\\n             ng-class=\"{\\n               \\'btn-primary\\': item.published,\\n               \\'btn-default\\': !item.published,\\n               \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n             }\"\\n             ng-if=\"!$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            {{ item.deed.title }}\\n          </a>\\n        </div>\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.User.isAuthenticated() ?\\n                  $ctrl.addUserToGroup($ctrl.User.current, $ctrl.Group.current) :\\n                  $ctrl.Modal.openLogin()\"\\n                ng-if=\"!$ctrl.User.isMemberOfGroup($ctrl.Group.current)\">\\n          <i class=\"fa fa-fw fa-users\"></i>\\n          <span ng-hide=\"$ctrl.User.isAuthenticated()\">Login &amp; </span>\\n          Join us\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.setupCampaign($ctrl.Group.current)\"\\n                ng-if=\"$ctrl.showCampaignAlert\">\\n          <i class=\"fa fa-fw fa-bullhorn\"></i>\\n          Setup campaign\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.Modal.openGroupEdit(\\'update\\', $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n          <i class=\"fa fa-fw fa-edit\"></i>\\n          Update group\\n        </button>\\n      </div>\\n\\n      <div class=\"col-sm-9 col-sm-pull-3\">\\n        <uib-alert type=\"info\"\\n                   ng-show=\"$ctrl.showCampaignAlert\"\\n                   close=\"$ctrl.showCampaignAlert = false\">\\n          You haven\\'t got an active campaign, would you like to set one up now?&nbsp;\\n          <button class=\"btn btn-info m-t-xs p-xs\"\\n                  ng-click=\"$ctrl.setupCampaign($ctrl.Group.current)\">\\n            Setup Campaign\\n          </button>\\n        </uib-alert>\\n\\n        <blockquote marked=\"$ctrl.Group.current.welcomeMessage\"\\n                    ng-show=\"$ctrl.Group.current.welcomeMessage\"></blockquote>\\n\\n        <div ng-hide=\"$ctrl.Group.current.welcomeMessage\">\\n          <h2>\\n            The Love is our Weapon Campaign is a youth movement that exists to\\n            change cities through the love of Jesus by doing strategic practical\\n            acts of love.\\n          </h2>\\n          <p>\\n            Thousands of people, doing thousands of acts of love, bringing\\n            change, value, healing and hope throughout cities and communities\\n            everywhere.\\n          </p>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],9:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.group=exports.groupTpl=void 0;var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularMarked=require(\"angular-marked\"),_angularMarked2=_interopRequireDefault(_angularMarked),_Alertify=require(\"../../services/Alertify\"),_Alertify2=_interopRequireDefault(_Alertify),_User=require(\"../../services/User\"),_User2=_interopRequireDefault(_User),_Group=require(\"../../services/Group\"),_Group2=_interopRequireDefault(_Group),_Campaign=require(\"../../services/Campaign\"),_Campaign2=_interopRequireDefault(_Campaign),_Act=require(\"../../services/Act\"),_Act2=_interopRequireDefault(_Act),_Modal=require(\"../../services/Modal\"),_Modal2=_interopRequireDefault(_Modal),_jumbotron=require(\"../jumbotron\"),_jumbotron2=_interopRequireDefault(_jumbotron),_GroupCtrl=require(\"./GroupCtrl\"),_GroupCtrl2=_interopRequireDefault(_GroupCtrl),_group=require(\"./group.html\"),_group2=_interopRequireDefault(_group),groupTpl=exports.groupTpl=_group2[\"default\"],group=exports.group=_angular2[\"default\"].module(\"app.components.group\",[_angularMarked2[\"default\"],_Alertify2[\"default\"],_User2[\"default\"],_Group2[\"default\"],_Campaign2[\"default\"],_Act2[\"default\"],_Modal2[\"default\"],_jumbotron2[\"default\"]]).controller(\"GroupCtrl\",_GroupCtrl2[\"default\"]).name;\n},{\"../../services/Act\":29,\"../../services/Alertify\":30,\"../../services/Campaign\":31,\"../../services/Group\":33,\"../../services/Modal\":40,\"../../services/User\":43,\"../jumbotron\":14,\"./GroupCtrl\":7,\"./group.html\":8,\"angular\":\"angular\",\"angular-marked\":\"angular-marked\"}],10:[function(require,module,exports){\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var HomeCtrl=function e(t){_classCallCheck(this,e),t.title=null};exports[\"default\"]=HomeCtrl,HomeCtrl.$inject=[\"$rootScope\"];\n},{}],11:[function(require,module,exports){\nmodule.exports='<jumbotron background=\"/images/header.jpg\"></jumbotron>\\n\\n<welcome></welcome>\\n';\n},{}],12:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.home=exports.homeTpl=void 0;var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_jumbotron=require(\"../jumbotron\"),_jumbotron2=_interopRequireDefault(_jumbotron),_welcome=require(\"../welcome\"),_welcome2=_interopRequireDefault(_welcome),_HomeCtrl=require(\"./HomeCtrl\"),_HomeCtrl2=_interopRequireDefault(_HomeCtrl),_home=require(\"./home.html\"),_home2=_interopRequireDefault(_home),homeTpl=exports.homeTpl=_home2[\"default\"],home=exports.home=_angular2[\"default\"].module(\"app.components.home\",[_jumbotron2[\"default\"],_welcome2[\"default\"]]).controller(\"HomeCtrl\",_HomeCtrl2[\"default\"]).name;\n},{\"../jumbotron\":14,\"../welcome\":25,\"./HomeCtrl\":10,\"./home.html\":11,\"angular\":\"angular\"}],13:[function(require,module,exports){\n\"use strict\";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var JumbotronCtrl=function t(){_classCallCheck(this,t),this.styles={\"background-image\":\"url(\"+this.background+\")\"}};exports[\"default\"]=JumbotronCtrl;\n},{}],14:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_JumbotronCtrl=require(\"./JumbotronCtrl\"),_JumbotronCtrl2=_interopRequireDefault(_JumbotronCtrl),_jumbotron=require(\"./jumbotron.html\"),_jumbotron2=_interopRequireDefault(_jumbotron);exports[\"default\"]=_angular2[\"default\"].module(\"app.components.jumbotron\",[]).component(\"jumbotron\",{controller:_JumbotronCtrl2[\"default\"],template:_jumbotron2[\"default\"],bindings:{image:\"@\",background:\"@\",title:\"@\",text:\"@\"}}).name;\n},{\"./JumbotronCtrl\":13,\"./jumbotron.html\":15,\"angular\":\"angular\"}],15:[function(require,module,exports){\nmodule.exports='<div class=\"jumbotron\"\\n     ng-style=\"$ctrl.styles\">\\n  <div class=\"container\">\\n    <div class=\"jumbotron-image\" ng-if=\"$ctrl.image\">\\n      <img ng-src=\"{{ $ctrl.image }}\" class=\"img-responsive img-circle\">\\n    </div>\\n    <h1 class=\"jumbotron-title\"\\n        ng-bind-html=\"$ctrl.title\"></h1>\\n    <p class=\"jumbotron-text\"\\n       ng-if=\"$ctrl.text\"\\n       ng-bind-html=\"$ctrl.text\"></p>\\n  </div>\\n</div>\\n';\n},{}],16:[function(require,module,exports){\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),MIN_QUERY_LENGTH=3,NavbarCtrl=function(){function e(t,r,n,a,o){_classCallCheck(this,e),_extends(this,{$location:t,User:r,Group:n,Act:a,Modal:o}),this.groups=[],this.group=null,this.Act.count()}return _createClass(e,[{key:\"refreshGroups\",value:function(e){var t=this;return this.groups=[],e.length<MIN_QUERY_LENGTH?!1:this.Group.search(e,{fields:\"_id,name,urlName\"}).then(function(e){return t.groups=e.data})}},{key:\"selectGroup\",value:function(e){this.group=null,this.$location.path(\"/g/\"+e.urlName)}},{key:\"setUserGroup\",value:function(e){this.User.group=e,this.selectGroup(e)}}]),e}();exports[\"default\"]=NavbarCtrl,NavbarCtrl.$inject=[\"$location\",\"User\",\"Group\",\"Act\",\"Modal\"];\n},{}],17:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularSanitize=require(\"angular-sanitize\"),_angularSanitize2=_interopRequireDefault(_angularSanitize),_uiSelect=require(\"ui-select\"),_uiSelect2=_interopRequireDefault(_uiSelect),_User=require(\"../../services/User\"),_User2=_interopRequireDefault(_User),_Group=require(\"../../services/Group\"),_Group2=_interopRequireDefault(_Group),_Act=require(\"../../services/Act\"),_Act2=_interopRequireDefault(_Act),_Modal=require(\"../../services/Modal\"),_Modal2=_interopRequireDefault(_Modal),_NavbarCtrl=require(\"./NavbarCtrl\"),_NavbarCtrl2=_interopRequireDefault(_NavbarCtrl),_navbar=require(\"./navbar.html\"),_navbar2=_interopRequireDefault(_navbar);exports[\"default\"]=_angular2[\"default\"].module(\"app.components.navbar\",[_angularSanitize2[\"default\"],_uiSelect2[\"default\"],_User2[\"default\"],_Group2[\"default\"],_Act2[\"default\"],_Modal2[\"default\"]]).component(\"navbar\",{controller:_NavbarCtrl2[\"default\"],template:_navbar2[\"default\"]}).name;\n},{\"../../services/Act\":29,\"../../services/Group\":33,\"../../services/Modal\":40,\"../../services/User\":43,\"./NavbarCtrl\":16,\"./navbar.html\":18,\"angular\":\"angular\",\"angular-sanitize\":\"angular-sanitize\",\"ui-select\":\"ui-select\"}],18:[function(require,module,exports){\nmodule.exports='<nav class=\"navbar navbar-default navbar-fixed-top\" id=\"liow-navbar\" role=\"navigation\">\\n  <div class=\"container\">\\n    <div class=\"navbar-header\">\\n      <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#liow-navbar-collapse\" aria-expanded=\"false\">\\n        <span class=\"sr-only\">Toggle navigation</span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n      </button>\\n\\n      <a class=\"navbar-brand\" href=\"/\">\\n        <img alt=\"Love is our Weapon\" src=\"/images/logo-navbar.png\">\\n        <div class=\"navbar-brand-label\">\\n          <span class=\"text-primary\">{{ $ctrl.Act.counters.global | number }}</span><br>\\n          <small>acts of love</small>\\n        </div>\\n      </a>\\n    </div>\\n\\n    <div class=\"collapse navbar-collapse\" id=\"liow-navbar-collapse\">\\n      <div class=\"navbar-divider navbar-left\"></div>\\n\\n      <form class=\"navbar-form navbar-left\" id=\"group-search\" role=\"search\">\\n        <div class=\"form-group\">\\n          <label class=\"input-group\">\\n            <div class=\"input-group-addon\"><i class=\"fa fa-search\"></i></div>\\n            <ui-select ng-model=\"$ctrl.group\"\\n                       on-select=\"$ctrl.selectGroup($item)\"\\n                       append-to-body=\"false\">\\n              <ui-select-match placeholder=\"Find a group...\">\\n                {{ $select.selected.name }}\\n              </ui-select-match>\\n              <ui-select-choices repeat=\"group in $ctrl.groups\"\\n                                 position=\"down\"\\n                                 refresh=\"$ctrl.refreshGroups($select.search)\"\\n                                 refresh-delay=\"200\">\\n                <div ng-bind-html=\"group.name | highlight:$select.search\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </label>\\n        </div>\\n      </form>\\n\\n      <ul class=\"nav navbar-nav navbar-right\">\\n        <li ng-show=\"$ctrl.User.isAuthenticated() && $ctrl.User.group\">\\n          <a ng-href=\"/g/{{ $ctrl.User.group.urlName }}\"\\n             title=\"{{ $ctrl.User.group.name }}\">\\n            Campaign\\n          </a>\\n        </li>\\n        <li class=\"dropdown\">\\n          <a class=\"dropdown-toggle user-dropdown\"\\n             data-toggle=\"dropdown\"\\n             role=\"button\"\\n             aria-haspopup=\"true\"\\n             aria-expanded=\"false\"\\n             href>\\n            <img ng-src=\"{{ $ctrl.User.current.picture || \\'images/user.png\\' }}\"\\n                 class=\"img-circle\">\\n            <span class=\"caret\"></span>\\n          </a>\\n          <ul class=\"dropdown-menu\">\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <i class=\"fa fa-fw fa-user\"></i>\\n              {{ $ctrl.User.current.name }}\\n            </li>\\n            <li ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.User.logout()\" href>\\n                <i class=\"fa fa-fw fa-sign-out\"></i>\\n                Logout\\n              </a>\\n            </li>\\n            <li ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.Modal.openLogin()\" href>\\n                <i class=\"fa fa-fw fa-sign-in\"></i>\\n                Login\\n              </a>\\n            </li>\\n            <li class=\"divider\" ng-show=\"$ctrl.User.isAuthenticated()\" role=\"separator\"></li>\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <i class=\"fa fa-fw fa-users\"></i>\\n              Groups\\n            </li>\\n            <li ng-repeat=\"group in $ctrl.User.current.groups\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\"\\n                ng-class=\"{ \\'active\\': $ctrl.User.group._id === group._id }\">\\n              <a ng-click=\"$ctrl.setUserGroup(group)\" href>\\n                {{ group.name }}\\n              </a>\\n            </li>\\n            <li>\\n              <a ng-click=\"$ctrl.Modal.openGroupEdit()\" href>\\n                <i class=\"fa fa-fw fa-pencil-square-o\"></i>\\n                Group sign up\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\\n';\n},{}],19:[function(require,module,exports){\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var UserCtrl=function e(t,s){_classCallCheck(this,e),this.name=s.user,t.title=this.name};exports[\"default\"]=UserCtrl,UserCtrl.$inject=[\"$rootScope\",\"$routeParams\"];\n},{}],20:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.user=exports.userTpl=void 0;var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_jumbotron=require(\"../jumbotron\"),_jumbotron2=_interopRequireDefault(_jumbotron),_UserCtrl=require(\"./UserCtrl\"),_UserCtrl2=_interopRequireDefault(_UserCtrl),_user=require(\"./user.html\"),_user2=_interopRequireDefault(_user),userTpl=exports.userTpl=_user2[\"default\"],user=exports.user=_angular2[\"default\"].module(\"app.components.user\",[_jumbotron2[\"default\"]]).controller(\"UserCtrl\",_UserCtrl2[\"default\"]).name;\n},{\"../jumbotron\":14,\"./UserCtrl\":19,\"./user.html\":21,\"angular\":\"angular\"}],21:[function(require,module,exports){\nmodule.exports='<jumbotron background=\"/images/header.jpg\"></jumbotron>\\n<div class=\"container\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\">\\n      <h1>Hello, {{ $ctrl.name }}</h1>\\n      <p>This is a User Homepage!</p>\\n      <p>Though it\\'s just a placeholder for now...</p>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],22:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularYoutubeEmbed=require(\"angular-youtube-embed\"),_angularYoutubeEmbed2=_interopRequireDefault(_angularYoutubeEmbed),_videotron=require(\"./videotron.html\"),_videotron2=_interopRequireDefault(_videotron);exports[\"default\"]=_angular2[\"default\"].module(\"app.components.videotron\",[_angularYoutubeEmbed2[\"default\"]]).component(\"videotron\",{template:_videotron2[\"default\"],bindings:{videoId:\"=\",videoUrl:\"=\"}}).name;\n},{\"./videotron.html\":23,\"angular\":\"angular\",\"angular-youtube-embed\":\"angular-youtube-embed\"}],23:[function(require,module,exports){\nmodule.exports='<div class=\"jumbotron videotron\">\\n  <div class=\"container\">\\n    <div class=\"embed-responsive embed-responsive-16by9\">\\n      <youtube-video ng-if=\"$ctrl.videoId\"\\n                     video-id=\"$ctrl.videoId\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n      <youtube-video ng-if=\"$ctrl.videoUrl\"\\n                     video-url=\"$ctrl.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],24:[function(require,module,exports){\n\"use strict\";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WelcomeCtrl=function e(t,n,r,a){var o=this;_classCallCheck(this,e),_extends(this,{Act:r,Modal:a}),n.find({count:!0}).then(function(e){return o.numberOfGroups=Number(e.data)}),t.find({count:!0}).then(function(e){return o.numberOfUsers=Number(e.data)})};exports[\"default\"]=WelcomeCtrl,WelcomeCtrl.$inject=[\"User\",\"Group\",\"Act\",\"Modal\"];\n},{}],25:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_User=require(\"../../services/User\"),_User2=_interopRequireDefault(_User),_Group=require(\"../../services/Group\"),_Group2=_interopRequireDefault(_Group),_Act=require(\"../../services/Act\"),_Act2=_interopRequireDefault(_Act),_Modal=require(\"../../services/Modal\"),_Modal2=_interopRequireDefault(_Modal),_WelcomeCtrl=require(\"./WelcomeCtrl\"),_WelcomeCtrl2=_interopRequireDefault(_WelcomeCtrl),_welcome=require(\"./welcome.html\"),_welcome2=_interopRequireDefault(_welcome);exports[\"default\"]=_angular2[\"default\"].module(\"app.components.welcome\",[_User2[\"default\"],_Group2[\"default\"],_Act2[\"default\"],_Modal2[\"default\"]]).component(\"welcome\",{controller:_WelcomeCtrl2[\"default\"],template:_welcome2[\"default\"]}).name;\n},{\"../../services/Act\":29,\"../../services/Group\":33,\"../../services/Modal\":40,\"../../services/User\":43,\"./WelcomeCtrl\":24,\"./welcome.html\":26,\"angular\":\"angular\"}],26:[function(require,module,exports){\nmodule.exports='<div class=\"Home__Welcome1\">\\n  <div class=\"container container-pad\">\\n    <div class=\"row\">\\n      <div class=\"col-sm-9\">\\n        <h2>\\n          The Love is our Weapon Campaign is a youth movement that exists to\\n          change cities through the love of Jesus by doing strategic practical\\n          acts of love.\\n        </h2>\\n        <p>\\n          Thousands of people, doing thousands of acts of love, bringing\\n          change, value, healing and hope throughout cities and communities\\n          everywhere.\\n        </p>\\n        <p class=\"text-center\">\\n          <br>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary btn-lg\"\\n                  ng-click=\"$ctrl.Modal.openLogin()\">\\n            Login\\n          </button>\\n          &nbsp;&nbsp; or &nbsp;&nbsp;\\n          <button type=\"button\"\\n                  class=\"btn btn-default btn-lg\"\\n                  ng-click=\"$ctrl.Modal.openGroupEdit()\">\\n            Group sign up\\n          </button>\\n        </p>\\n      </div>\\n\\n      <div class=\"col-sm-3\">\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.Act.counters.global\">\\n            {{ $ctrl.Act.counters.global | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.Act.counters.global\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">acts of love</h4>\\n        <p class=\"m-t-none\">done around the world</p>\\n\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.numberOfGroups\">\\n            {{ $ctrl.numberOfGroups | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.numberOfGroups\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">groups</h4>\\n        <p class=\"m-t-none\">serving together</p>\\n\\n        <h1 class=\"text-primary m-b-none\">\\n          <span ng-show=\"$ctrl.numberOfUsers\">\\n            {{ $ctrl.numberOfUsers | number }}\\n          </span>\\n          <span ng-hide=\"$ctrl.numberOfUsers\">&nbsp;</span>\\n        </h1>\\n        <h4 class=\"m-none\">individuals</h4>\\n        <p class=\"m-t-none\">causing change</p>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__Welcome1 -->\\n\\n<div class=\"Home__Welcome2\">\\n  <div class=\"container\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h2 class=\"text-center\">\\n          Running a campaign is as easy as 1, 2, 3.\\n        </h2>\\n        <img src=\"images/welcome-laptop.png\">\\n        <ol>\\n          <li>Sign up</li>\\n          <li>Join or start a group</li>\\n          <li>Start changing your world!</li>\\n        </ol>\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .Home__Welcome2 -->\\n\\n<div class=\"Home__Welcome3\">\\n  <div class=\"container\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <h2 class=\"text-center\">\\n          Heres how Love is Our Weapon can help you.\\n        </h2>\\n      </div>\\n    </div>\\n    <div class=\"row\">\\n      <div class=\"col-sm-6\">\\n        <h3>Title 1</h3>\\n        <p>\\n          After the Sabbath, as the first light of the new week dawned, Mary Magdalene and the other Mary came to keep vigil at the tomb. Suddenly the earth reeled and rocked under their feet as Gods angel came down from heaven, came right up to where they were standing. He rolled back the stone and then sat on it. Shafts of lightning blazed from him. His garments shimmered snow-white. The guards at the tomb were scared to death. They were so frightened, they couldnt move.\\n        </p>\\n        <h3>Title 2</h3>\\n        <p>\\n          The women, deep in wonder and full of joy, lost no time in leaving the tomb. They ran to tell the disciples. Then Jesus met them, stopping them in their tracks. Good morning! he said. They fell to their knees, embraced his feet, and worshiped him. Jesus said, Youre holding on to me for dear life! Dont be frightened like that. Go tell my brothers that they are to go to Galilee, and that Ill meet them there.\\n        </p>\\n      </div>\\n      <div class=\"col-sm-6\">\\n        <h3>Title 3</h3>\\n        <p>\\n          Meanwhile, the guards had scattered, but a few of them went into the city and told the high priests everything that had happened. They called a meeting of the religious leaders and came up with a plan: They took a large sum of money and gave it to the soldiers, bribing them to say, His disciples came in the night and stole the body while we were sleeping. They assured them, If the governor hears about your sleeping on duty, we will make sure you dont get blamed. The soldiers took the bribe and did as they were told. That story, cooked up in the Jewish High Council, is still going around.\\n        </p>\\n        <h3>Title 4</h3>\\n        <p>\\n          Jesus, undeterred, went right ahead and gave his charge: God authorized and commanded me to commission you: Go out and train everyone you meet, far and near, in this way of life, marking them by baptism in the threefold name: Father, Son, and Holy Spirit. Then instruct them in the practice of all I have commanded you. Ill be with you as you do this, day after day after day, right up to the end of the age.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n';\n},{}],27:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),defaults={serverUrl:\"http://localhost:3000\",facebookClientId:\"FACEBOOK_CLIENT_ID\"};exports[\"default\"]=_angular2[\"default\"].module(\"app.config\",[]).constant(\"config\",_lodash2[\"default\"].defaults(LIOW_CONFIG||{},defaults)).name;\n},{\"angular\":\"angular\",\"lodash\":\"lodash\"}],28:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular);exports[\"default\"]=_angular2[\"default\"].module(\"app.filters.lodash\",[]).filter(\"capitalize\",function(){return _lodash2[\"default\"].capitalize}).filter(\"kebabCase\",function(){return _lodash2[\"default\"].kebabCase}).name;\n},{\"angular\":\"angular\",\"lodash\":\"lodash\"}],29:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_config=require(\"../config\"),_config2=_interopRequireDefault(_config),Act=function(){function e(t,a){_classCallCheck(this,e),_extends(this,{$http:t}),this.baseUrl=a.serverUrl+\"/acts\",this.counters={}}return _createClass(e,[{key:\"count\",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t=_lodash2[\"default\"].defaults(t,{count:!0}),this.$http.get(this.baseUrl,{params:t}).then(function(a){return a.data=Number(a.data),t.user?e.counters[t.user]=a.data:t.group?e.counters[t.group]=a.data:t.campaign?e.counters[t.campaign]=a.data:t.deed?e.counters[t.deed]=a.data:e.counters.global=a.data,a})}},{key:\"done\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.$http.post(this.baseUrl,{deed:e._id,group:_lodash2[\"default\"].has(t,\"_id\")?t._id:null})}}]),e}();Act.$inject=[\"$http\",\"config\"],exports[\"default\"]=_angular2[\"default\"].module(\"app.services.Act\",[_config2[\"default\"]]).service(\"Act\",Act).name;\n},{\"../config\":27,\"angular\":\"angular\",\"lodash\":\"lodash\"}],30:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_alertify=require(\"alertify.js\"),_alertify2=_interopRequireDefault(_alertify);exports[\"default\"]=_angular2[\"default\"].module(\"app.services.Alertify\",[]).factory(\"Alertify\",function(){return _alertify2[\"default\"].theme(\"bootstrap\").logPosition(\"top right\"),{log:function(e){var r=arguments.length<=1||void 0===arguments[1]?\"info-circle\":arguments[1];return _alertify2[\"default\"].setLogTemplate(function(e){return'<i class=\"fa fa-fw fa-'+r+'\"></i> '+e}).log(e)},success:function(e){var r=arguments.length<=1||void 0===arguments[1]?\"check-circle\":arguments[1];return _alertify2[\"default\"].setLogTemplate(function(e){return'<i class=\"fa fa-fw fa-'+r+'\"></i> '+e}).success(e)},error:function(e){var r=arguments.length<=1||void 0===arguments[1]?\"exclamation-circle\":arguments[1];return _alertify2[\"default\"].setLogTemplate(function(e){return'<i class=\"fa fa-fw fa-'+r+'\"></i> '+e}).error(e)}}}).name;\n},{\"alertify.js\":\"alertify.js\",\"angular\":\"angular\"}],31:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_config=require(\"../config\"),_config2=_interopRequireDefault(_config),Campaign=function(){function e(t,n,r){_classCallCheck(this,e),_extends(this,{$http:t,$q:n}),this.baseUrl=r.serverUrl+\"/campaigns\"}return _createClass(e,[{key:\"find\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:\"findOne\",value:function(e){var t=this;return this.$q(function(n,r){t.find(e).then(function(e){1===e.data.length?n(e.data[0]):r(new Error(\"Campaign not found\"))})[\"catch\"](function(){return r(new Error(\"Failed connecting to server\"))})})}},{key:\"save\",value:function(e){return _.has(e,\"_id\")?this.$http.put(this.baseUrl+\"/\"+e._id,e):this.$http.post(this.baseUrl,e)}},{key:\"setPublished\",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],r=n?\"post\":\"delete\";return this.$http[r](this.baseUrl+\"/\"+e._id+\"/deeds/\"+t._id+\"/published\")}}]),e}();Campaign.$inject=[\"$http\",\"$q\",\"config\"],exports[\"default\"]=_angular2[\"default\"].module(\"app.services.Campaign\",[_config2[\"default\"]]).service(\"Campaign\",Campaign).name;\n},{\"../config\":27,\"angular\":\"angular\"}],32:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_config=require(\"../config\"),_config2=_interopRequireDefault(_config),currentDeed=null,Deed=function(){function e(t,n,r){_classCallCheck(this,e),_extends(this,{$http:t,$q:n}),this.baseUrl=r.serverUrl+\"/deeds\"}return _createClass(e,[{key:\"find\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:\"findOne\",value:function(e){var t=this;return this.$q(function(n,r){t.find(e).then(function(e){1===e.data.length?n(e.data[0]):r(new Error(\"Deed not found\"))})[\"catch\"](function(){return r(new Error(\"Failed connecting to server\"))})})}},{key:\"get\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this.$http.get(this.baseUrl+\"/\"+e,{params:t})}},{key:\"current\",set:function(e){currentDeed=e},get:function(){return currentDeed}}]),e}();Deed.$inject=[\"$http\",\"$q\",\"config\"],exports[\"default\"]=_angular2[\"default\"].module(\"app.services.Deed\",[_config2[\"default\"]]).service(\"Deed\",Deed).name;\n},{\"../config\":27,\"angular\":\"angular\"}],33:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_config=require(\"../config\"),_config2=_interopRequireDefault(_config),_User=require(\"./User\"),_User2=_interopRequireDefault(_User),currentGroup=null,Group=function(){function e(r,t,n,u){_classCallCheck(this,e),_extends(this,{$http:r,$q:t,User:u}),this.baseUrl=n.serverUrl+\"/groups\"}return _createClass(e,[{key:\"find\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:\"findOne\",value:function(e){var r=this;return this.$q(function(t,n){r.find(e).then(function(e){1===e.data.length?t(e.data[0]):n(new Error(\"Group not found\"))})[\"catch\"](function(){return n(new Error(\"Failed connecting to server\"))})})}},{key:\"search\",value:function(e,r){return r=_lodash2[\"default\"].merge({query:e},r),this.find(r)}},{key:\"save\",value:function(e){return _lodash2[\"default\"].has(e,\"_id\")?this.$http.put(this.baseUrl+\"/\"+e._id,e):this.$http.post(this.baseUrl,e)}},{key:\"isAdmin\",value:function(e,r){return _lodash2[\"default\"].has(e,\"admins\")&&_lodash2[\"default\"].has(r,\"_id\")&&e.admins.indexOf(r._id)>-1}},{key:\"current\",set:function(e){currentGroup=e,this.User.current&&_lodash2[\"default\"].find(this.User.current.groups,[\"id\",e._id])&&(this.User.group=e)},get:function(){return currentGroup}}]),e}();Group.$inject=[\"$http\",\"$q\",\"config\",\"User\"],exports[\"default\"]=_angular2[\"default\"].module(\"app.services.Group\",[_config2[\"default\"],_User2[\"default\"]]).service(\"Group\",Group).name;\n},{\"../config\":27,\"./User\":43,\"angular\":\"angular\",\"lodash\":\"lodash\"}],34:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),CampaignEditCtrl=function(){function e(t,n,a,r,i,s,o,u){_classCallCheck(this,e),_extends(this,{$uibModalInstance:t,Alertify:n,Campaign:a,Deed:r,Modal:i,action:s,group:o,campaign:u}),this.error=null,this.deeds=[],this.loadDeeds(),this.campaign||this.resetFields()}return _createClass(e,[{key:\"resetFields\",value:function(){this.campaign={group:this.group._id,deeds:[]}}},{key:\"save\",value:function(e){var t=this,n=angular.copy(e);n.deeds=_lodash2[\"default\"].map(n.deeds,function(e){return{deed:e._id}}),this.saving=!0,this.error=null,this.Campaign.save(n).then(function(){t.$uibModalInstance.close(),t.Alertify.success(\"Setup campaign\")})[\"catch\"](function(e){return t.error=e.data.error}).then(function(){return t.saving=!1})}},{key:\"loadDeeds\",value:function(){var e=this;this.loading=!0,this.Deed.find({fields:\"_id,title\"}).then(function(t){return e.deeds=t.data})[\"catch\"](function(t){return e.error=t.data.error}).then(function(){return e.loading=!1})}}]),e}();exports[\"default\"]=CampaignEditCtrl,CampaignEditCtrl.$inject=[\"$uibModalInstance\",\"Alertify\",\"Campaign\",\"Deed\",\"Modal\",\"action\",\"group\",\"campaign\"];\n},{\"lodash\":\"lodash\"}],35:[function(require,module,exports){\nmodule.exports='<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ $ctrl.action | capitalize }} Campaign for {{ $ctrl.group.name }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\" ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or contact us about it.\\n  </uib-alert>\\n\\n  <div class=\"col-xs-12\">\\n    <p>\\n      Create a campaign by dragging deeds from the \\'Available Deeds\\' list into the \\'Your Campaign\\' list.\\n      You can also re-order deeds within your campaign.\\n    </p>\\n    <p>\\n      We recommend choosing 1 deed for each week of the campaign,\\n      so choosing 6 deeds would work best for a 6 week campaign.\\n      In our experience with youth groups, a 4-6 week campaign works best\\n      to keep up interest and engagement with the campaign.\\n    </p>\\n  </div>\\n\\n  <form name=\"campaignEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.save($ctrl.campaign)\">\\n    <span ng-init=\"$ctrl.form = campaignEdit\"></span>\\n\\n    <div class=\"form-group\">\\n      <div class=\"col-xs-6\">\\n        <h5>Available Deeds</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"deed in $ctrl.deeds track by deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n\\n      <div class=\"col-xs-6\">\\n        <h5>Your Campaign</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.campaign.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"deed in $ctrl.campaign.deeds track by deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.campaign)\"\\n          ng-disabled=\"$ctrl.loading || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ $ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],36:[function(require,module,exports){\n\"use strict\";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),DeedPreview=function(){function e(n,t,r){_classCallCheck(this,e),_extends(this,{$uibModalInstance:n,Deed:t}),this.error=null,this.loadDeed(r)}return _createClass(e,[{key:\"loadDeed\",value:function(e){var n=this;this.loading=!0,this.Deed.get(e).then(function(e){return n.deed=e.data})[\"catch\"](function(e){return n.error=\"Deed not found\"}).then(function(){return n.loading=!1})}}]),e}();exports[\"default\"]=DeedPreview,DeedPreview.$inject=[\"$uibModalInstance\",\"Deed\",\"deedId\"];\n},{}],37:[function(require,module,exports){\nmodule.exports='<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Preview Deed\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-hide=\"$ctrl.loading || $ctrl.error\">\\n    <div class=\"embed-responsive embed-responsive-16by9\"\\n         ng-show=\"$ctrl.deed.videoUrl\">\\n      <youtube-video video-url=\"$ctrl.deed.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"deed-header m-b-md\">\\n      <img src=\"/images/deed.png\" class=\"img-responsive img-circle pull-left m-t-xxs m-r-sm\">\\n      <h1 class=\"m-none\">\\n        {{ $ctrl.deed.title }}\\n      </h1>\\n      <p class=\"m-none\">\\n        <span class=\\'f-lg\\'>12,001</span> acts of love\\n      </p>\\n    </div>\\n\\n    <div marked=\"$ctrl.deed.content\"></div>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n    <p class=\"text-center\">\\n      <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n    </p>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n    <uib-alert type=\"danger\">\\n      <i class=\"fa fa-exclamation-triangle\"></i>\\n      {{ $ctrl.error }}\\n    </uib-alert>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Close\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],38:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_toMarkdown=require(\"to-markdown\"),_toMarkdown2=_interopRequireDefault(_toMarkdown),_showdown=require(\"showdown\"),_showdown2=_interopRequireDefault(_showdown),converter=new _showdown2[\"default\"].Converter,GroupEditCtrl=function(){function e(t,r,o,n,a,u,i,s,l,c){_classCallCheck(this,e),_extends(this,{$uibModalInstance:t,$scope:r,$timeout:o,$location:n,Alertify:a,User:u,Group:i,Modal:s,action:l,group:c}),this.error=null,this.group?this.group.welcomeMessage=converter.makeHtml(this.group.welcomeMessage):this.resetFields(),_lodash2[\"default\"].isObject(this.User.current)&&this.setupMediumEditor()}return _createClass(e,[{key:\"resetFields\",value:function(){this.group={name:\"\",logo:\"\",coverImage:\"\",welcomeMessage:\"\"}}},{key:\"setupMediumEditor\",value:function(){var e=this;this.$timeout(function(){e.editor=new MediumEditor(document.querySelectorAll(\"#welcomeMessage\"),{placeholder:{text:\"Enter a welcome message...\"},toolbar:{buttons:[\"bold\",\"italic\",\"underline\",\"anchor\",\"orderedlist\",\"unorderedlist\"]},autoLink:!0}),e.editor.subscribe(\"editableInput\",function(t,r){e.$scope.$apply(function(){e.group.welcomeMessage=(0,_toMarkdown2[\"default\"])(r.innerHTML,{converters:[{filter:function(e){return\"SPAN\"===e.nodeName||\"DIV\"===e.nodeName},replacement:function(e){return e}}]})})}),e.$scope.$on(\"$destroy\",function(){return e.editor.destroy()})})}},{key:\"openLoginModal\",value:function(){var e=this;this.Modal.openLogin().then(function(){return e.User.loadCurrent()}).then(function(){return e.setupMediumEditor()})[\"catch\"](function(e){return null})}},{key:\"save\",value:function(e){var t=this;this.saving=!0,this.error=null,this.Group.save(e).then(function(e){t.Group.current=e.data,t.User.loadCurrent(),t.$location.path(\"/g/\"+e.data.urlName),t.$uibModalInstance.close(),t.Alertify.success(_lodash2[\"default\"].capitalize(t.action)+\"d group\")})[\"catch\"](function(e){return t.error=e.data.error}).then(function(){return t.saving=!1})}}]),e}();exports[\"default\"]=GroupEditCtrl,GroupEditCtrl.$inject=[\"$uibModalInstance\",\"$scope\",\"$timeout\",\"$location\",\"Alertify\",\"User\",\"Group\",\"Modal\",\"action\",\"group\"];\n},{\"lodash\":\"lodash\",\"showdown\":\"showdown\",\"to-markdown\":47}],39:[function(require,module,exports){\nmodule.exports='<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ $ctrl.action | capitalize }} Group\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\" ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or contact us about it.\\n  </uib-alert>\\n\\n  <form name=\"groupEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.save($ctrl.group)\"\\n        ng-if=\"$ctrl.User.isAuthenticated()\">\\n    <span ng-init=\"$ctrl.form = groupEdit\"></span>\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.name || $ctrl.error.errors.urlName }\">\\n      <label for=\"name\"\\n             class=\"col-xs-3 control-label\">\\n        Name\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"name\"\\n               name=\"name\"\\n               placeholder=\"Group name...\"\\n               ng-model=\"$ctrl.group.name\"\\n               required\\n               autofocus>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.name || $ctrl.error.errors.urlName\">\\n          https://loveisourweapon.com/g/{{ ($ctrl.group.name | kebabCase) || \\'...\\' }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.name\"\\n              ng-repeat=\"error in $ctrl.error.errors.name\">\\n          {{ error.message }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.urlName\"\\n              ng-repeat=\"error in $ctrl.error.errors.urlName\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.logo }\">\\n      <label for=\"logo\"\\n             class=\"col-xs-3 control-label\">\\n        Logo\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"logo\"\\n               name=\"logo\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.logo\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.logo\">\\n          Ideally 500px x 500px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.logo\"\\n              ng-repeat=\"error in $ctrl.error.errors.logo\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.coverImage }\">\\n      <label for=\"coverImage\"\\n             class=\"col-xs-3 control-label\">\\n        Cover Image\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"coverImage\"\\n               name=\"coverImage\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.coverImage\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.coverImage\">\\n          Ideally 1280px x 580px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.coverImage\"\\n              ng-repeat=\"error in $ctrl.error.errors.coverImage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.welcomeMessage }\">\\n      <label for=\"welcomeMessage\"\\n             class=\"col-xs-3 control-label\">\\n        Intro Message\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <div class=\"well well-sm medium-editor m-none\">\\n          <textarea id=\"welcomeMessage\"\\n                    ng-model=\"$ctrl.group.welcomeMessage\"></textarea>\\n        </div>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.welcomeMessage\">\\n          Select text to add links, bold, italics, etc.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.welcomeMessage\"\\n              ng-repeat=\"error in $ctrl.error.errors.welcomeMessage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n\\n  <div class=\"container-fluid\"\\n       ng-if=\"!$ctrl.User.isAuthenticated()\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <button type=\"button\"\\n                class=\"btn btn-primary m-r-sm\"\\n                ng-click=\"$ctrl.openLoginModal()\">\\n          Login\\n        </button>\\n        Please login to setup a new group\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.group)\"\\n          ng-disabled=\"!$ctrl.User.isAuthenticated() || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ $ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';\n},{}],40:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},_createClass=function(){function e(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,a,t){return a&&e(r.prototype,a),t&&e(r,t),r}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularRoute=require(\"angular-route\"),_angularRoute2=_interopRequireDefault(_angularRoute),_angularDragula=require(\"angular-dragula\"),_angularDragula2=_interopRequireDefault(_angularDragula),_angularUiBootstrap=require(\"angular-ui-bootstrap\"),_angularUiBootstrap2=_interopRequireDefault(_angularUiBootstrap),_angularMarked=require(\"angular-marked\"),_angularMarked2=_interopRequireDefault(_angularMarked),_angularYoutubeEmbed=require(\"angular-youtube-embed\"),_angularYoutubeEmbed2=_interopRequireDefault(_angularYoutubeEmbed);require(\"angular-ui-switch\");var _lodash3=require(\"../../filters/lodash\"),_lodash4=_interopRequireDefault(_lodash3),_Alertify=require(\"../../services/Alertify\"),_Alertify2=_interopRequireDefault(_Alertify),_User=require(\"../../services/User\"),_User2=_interopRequireDefault(_User),_Group=require(\"../../services/Group\"),_Group2=_interopRequireDefault(_Group),_Campaign=require(\"../../services/Campaign\"),_Campaign2=_interopRequireDefault(_Campaign),_Deed=require(\"../../services/Deed\"),_Deed2=_interopRequireDefault(_Deed),_LoginCtrl=require(\"./login/LoginCtrl\"),_LoginCtrl2=_interopRequireDefault(_LoginCtrl),_login=require(\"./login/login.html\"),_login2=_interopRequireDefault(_login),_GroupEditCtrl=require(\"./group-edit/GroupEditCtrl\"),_GroupEditCtrl2=_interopRequireDefault(_GroupEditCtrl),_groupEdit=require(\"./group-edit/group-edit.html\"),_groupEdit2=_interopRequireDefault(_groupEdit),_CampaignEditCtrl=require(\"./campaign-edit/CampaignEditCtrl\"),_CampaignEditCtrl2=_interopRequireDefault(_CampaignEditCtrl),_campaignEdit=require(\"./campaign-edit/campaign-edit.html\"),_campaignEdit2=_interopRequireDefault(_campaignEdit),_DeedPreview=require(\"./deed-preview/DeedPreview\"),_DeedPreview2=_interopRequireDefault(_DeedPreview),_deedPreview=require(\"./deed-preview/deed-preview.html\"),_deedPreview2=_interopRequireDefault(_deedPreview),Modal=function(){function e(r,a){_classCallCheck(this,e),_extends(this,{$uibModal:r,$q:a}),this.defaults={controllerAs:\"$ctrl\",size:\"md\"}}return _createClass(e,[{key:\"openLogin\",value:function(){return this.$uibModal.open(_lodash2[\"default\"].defaults({controller:_LoginCtrl2[\"default\"],template:_login2[\"default\"],size:\"sm\"},this.defaults)).result}},{key:\"openGroupEdit\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?\"create\":arguments[0],r=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.$uibModal.open(_lodash2[\"default\"].defaults({controller:_GroupEditCtrl2[\"default\"],template:_groupEdit2[\"default\"],resolve:{action:this.$q.resolve(e),group:this.$q.resolve(_angular2[\"default\"].copy(r))}},this.defaults)).result}},{key:\"openCampaignEdit\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?\"setup\":arguments[0],r=arguments[1],a=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return this.$uibModal.open(_lodash2[\"default\"].defaults({controller:_CampaignEditCtrl2[\"default\"],template:_campaignEdit2[\"default\"],resolve:{action:this.$q.resolve(e),group:this.$q.resolve(_angular2[\"default\"].copy(r)),campaign:this.$q.resolve(_angular2[\"default\"].copy(a))}},this.defaults)).result}},{key:\"openDeedPreview\",value:function(e){return this.$uibModal.open(_lodash2[\"default\"].defaults({controller:_DeedPreview2[\"default\"],template:_deedPreview2[\"default\"],resolve:{deedId:this.$q.resolve(e)}},this.defaults)).result}}]),e}();Modal.$inject=[\"$uibModal\",\"$q\"],exports[\"default\"]=_angular2[\"default\"].module(\"app.services.Modal\",[_angularRoute2[\"default\"],(0,_angularDragula2[\"default\"])(_angular2[\"default\"]),_angularUiBootstrap2[\"default\"],_angularMarked2[\"default\"],_angularYoutubeEmbed2[\"default\"],\"uiSwitch\",_lodash4[\"default\"],_User2[\"default\"],_Group2[\"default\"],_Campaign2[\"default\"],_Deed2[\"default\"]]).service(\"Modal\",Modal).name,_angular2[\"default\"].module(_angularUiBootstrap2[\"default\"]).directive(\"uibModalWindow\",[\"$window\",function(e){return{priority:1,link:function(r,a){function t(){a.find(\".modal-body\").css({maxHeight:.85*u.height()-80,overflowY:\"auto\"})}var u=_angular2[\"default\"].element(e);u.on(\"resize\",t),r.$on(\"$destroy\",function(){return u.off(\"resize\",t)}),t()}}}]);\n},{\"../../filters/lodash\":28,\"../../services/Alertify\":30,\"../../services/Campaign\":31,\"../../services/Deed\":32,\"../../services/Group\":33,\"../../services/User\":43,\"./campaign-edit/CampaignEditCtrl\":34,\"./campaign-edit/campaign-edit.html\":35,\"./deed-preview/DeedPreview\":36,\"./deed-preview/deed-preview.html\":37,\"./group-edit/GroupEditCtrl\":38,\"./group-edit/group-edit.html\":39,\"./login/LoginCtrl\":41,\"./login/login.html\":42,\"angular\":\"angular\",\"angular-dragula\":\"angular-dragula\",\"angular-marked\":\"angular-marked\",\"angular-route\":\"angular-route\",\"angular-ui-bootstrap\":\"angular-ui-bootstrap\",\"angular-ui-switch\":\"angular-ui-switch\",\"angular-youtube-embed\":\"angular-youtube-embed\",\"lodash\":\"lodash\"}],41:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_lodash=require(\"lodash\"),_lodash2=_interopRequireDefault(_lodash),LoginCtrl=function(){function e(t,n,r,a,i){_classCallCheck(this,e),_extends(this,{$uibModalInstance:t,$routeParams:n,Alertify:r,User:a,Group:i}),this.joinGroup=null,_lodash2[\"default\"].has(n,\"group\")&&(this.joinGroup=!0)}return _createClass(e,[{key:\"authenticateFacebook\",value:function(e){var t=this,n={};e&&(n.group=this.Group.current._id),this.User.authenticateFacebook(n).then(function(){e&&(t.User.group=t.Group.current),t.$uibModalInstance.close(),t.Alertify.success(\"Signed in\")})[\"catch\"](function(){return t.Alertify.error(\"Failed signing in\")})}},{key:\"authenticateEmail\",value:function(e,t){var n=this;this.User.authenticateEmail(e,t).then(function(){n.$uibModalInstance.close(),n.Alertify.success(\"Signed in\")})[\"catch\"](function(){return n.Alertify.error(\"Failed signing in\")})}}]),e}();exports[\"default\"]=LoginCtrl,LoginCtrl.$inject=[\"$uibModalInstance\",\"$routeParams\",\"Alertify\",\"User\",\"Group\"];\n},{\"lodash\":\"lodash\"}],42:[function(require,module,exports){\nmodule.exports='<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Login\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div ng-if=\"$ctrl.joinGroup !== null\">\\n    <p>\\n      <switch id=\"joinGroup\"\\n              name=\"joinGroup\"\\n              ng-model=\"$ctrl.joinGroup\"\\n              class=\"m-r-xs\"></switch>\\n      Join {{ $ctrl.Group.current.name }}\\n    </p>\\n    <hr>\\n  </div>\\n\\n  <p>\\n    <button ng-click=\"$ctrl.authenticateFacebook($ctrl.joinGroup)\"\\n            class=\"btn btn-facebook btn-block\">\\n      <i class=\"fa fa-fw fa-facebook-official\"></i>\\n      Sign in with Facebook\\n    </button>\\n  </p>\\n\\n  <hr>\\n\\n  <p>Email and password login coming soon, for now please just use Facebook sign in.</p>\\n\\n  <form ng-submit=\"$ctrl.authenticateEmail($ctrl.email, $ctrl.password)\">\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\"><i class=\"fa fa-fw fa-at\"></i></div>\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"email\"\\n               name=\"email\"\\n               ng-model=\"$ctrl.email\"\\n               placeholder=\"Email\"\\n               disabled>\\n      </div>\\n    </div>\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\"><i class=\"fa fa-fw fa-key\"></i></div>\\n        <input type=\"password\"\\n               class=\"form-control\"\\n               id=\"password\"\\n               name=\"password\"\\n               ng-model=\"$ctrl.password\"\\n               placeholder=\"Password\"\\n               disabled>\\n      </div>\\n    </div>\\n    <button type=\"submit\" class=\"btn btn-primary btn-block\" disabled>Login</button>\\n  </form>\\n</div><!-- .modal-body -->\\n';\n},{}],43:[function(require,module,exports){\n\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(exports,\"__esModule\",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_config=require(\"../config\"),_config2=_interopRequireDefault(_config),_satellizer=require(\"satellizer\"),_satellizer2=_interopRequireDefault(_satellizer),_Alertify=require(\"./Alertify\"),_Alertify2=_interopRequireDefault(_Alertify),currentUser=null,currentGroup=null,User=function(){function e(t,r,n,u,a){_classCallCheck(this,e),_extends(this,{$auth:t,$http:r,$q:n,Alertify:a}),this.baseUrl=u.serverUrl+\"/users\",this.loadCurrent()[\"catch\"](function(){return null})}return _createClass(e,[{key:\"authenticateFacebook\",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$auth.authenticate(\"facebook\",t).then(function(t){return e.$auth.setToken(t.data.token),e.loadCurrent()})}},{key:\"authenticateEmail\",value:function(e,t){var r=this;return e&&t?this.$auth.login({email:e,password:t}).then(function(e){return r.$auth.setToken(e.data.token),r.loadCurrent()}):this.$q.reject(\"Email and/or password not provided\")}},{key:\"isAuthenticated\",value:function(){return this.$auth.isAuthenticated()}},{key:\"isMemberOfGroup\",value:function(e){return _.has(currentUser,\"groups\")&&_.has(e,\"_id\")&&_.some(currentUser.groups,function(t){return t._id===e._id})}},{key:\"logout\",value:function(){var e=this;return this.$auth.logout().then(function(){currentUser=null,e.Alertify.success(\"Logged out\")})}},{key:\"find\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.$http.get(this.baseUrl,{params:e})}},{key:\"loadCurrent\",value:function(){return this.isAuthenticated()?this.$http.get(this.baseUrl+\"/me\").then(function(e){return currentUser=e.data,currentUser.groups.length&&(currentGroup=currentUser.groups[0]),e}):this.$q.reject(\"Not logged in\")}},{key:\"update\",value:function(e,t){var r=this;return this.$http.patch(this.baseUrl+\"/\"+e._id,t).then(function(e){return r.loadCurrent()})}},{key:\"current\",get:function(){return currentUser}},{key:\"group\",set:function(e){currentGroup=e},get:function(){return currentGroup}}]),e}();User.$inject=[\"$auth\",\"$http\",\"$q\",\"config\",\"Alertify\"],exports[\"default\"]=_angular2[\"default\"].module(\"app.services.User\",[_config2[\"default\"],_satellizer2[\"default\"],_Alertify2[\"default\"]]).config([\"$authProvider\",\"config\",function(e,t){e.loginUrl=t.serverUrl+\"/auth/login\",e.signupUrl=t.serverUrl+\"/auth/signup\",e.facebook({clientId:t.facebookClientId,url:t.serverUrl+\"/auth/facebook\"})}]).service(\"User\",User).name;\n},{\"../config\":27,\"./Alertify\":30,\"angular\":\"angular\",\"satellizer\":\"satellizer\"}],44:[function(require,module,exports){\nmodule.exports=[\"address\",\"article\",\"aside\",\"audio\",\"blockquote\",\"canvas\",\"dd\",\"div\",\"dl\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"hr\",\"main\",\"nav\",\"noscript\",\"ol\",\"output\",\"p\",\"pre\",\"section\",\"table\",\"tfoot\",\"ul\",\"video\"];\n},{}],45:[function(require,module,exports){\n\n},{}],46:[function(require,module,exports){\n\"use strict\";function isBlockElem(e){return!(!e||!blockElements[e.nodeName])}function isVoid(e){return!(!e||!voidElements[e.nodeName])}function collapseWhitespace(e,n){if(e.firstChild&&\"PRE\"!==e.nodeName){\"function\"!=typeof n&&(n=isBlockElem);for(var t=null,o=!1,a=null,r=next(a,e);r!==e;){if(3===r.nodeType){var i=r.data.replace(/[ \\r\\n\\t]+/g,\" \");if(t&&!/ $/.test(t.data)||o||\" \"!==i[0]||(i=i.substr(1)),!i){r=remove(r);continue}r.data=i,t=r}else{if(1!==r.nodeType){r=remove(r);continue}n(r)||\"BR\"===r.nodeName?(t&&(t.data=t.data.replace(/ $/,\"\")),t=null,o=!1):isVoid(r)&&(t=null,o=!0)}var l=next(a,r);a=r,r=l}t&&(t.data=t.data.replace(/ $/,\"\"),t.data||remove(t))}}function remove(e){var n=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),n}function next(e,n){return e&&e.parentNode===n||\"PRE\"===n.nodeName?n.nextSibling||n.parentNode:n.firstChild||n.nextSibling||n.parentNode}var voidElements=require(\"void-elements\");Object.keys(voidElements).forEach(function(e){voidElements[e.toUpperCase()]=1});var blockElements={};require(\"block-elements\").forEach(function(e){blockElements[e.toUpperCase()]=1}),module.exports=collapseWhitespace;\n},{\"block-elements\":44,\"void-elements\":50}],47:[function(require,module,exports){\n\"use strict\";function trim(e){return e.replace(/^[ \\r\\n\\t]+|[ \\r\\n\\t]+$/g,\"\")}function isBlock(e){return-1!==blocks.indexOf(e.nodeName.toLowerCase())}function isVoid(e){return-1!==voids.indexOf(e.nodeName.toLowerCase())}function canParseHtml(){var e=_window.DOMParser,r=!1;try{(new e).parseFromString(\"\",\"text/html\")&&(r=!0)}catch(t){}return r}function createHtmlParser(){var e=function(){};return e.prototype.parseFromString=function(e){var r=_document.implementation.createHTMLDocument(\"\");return e.toLowerCase().indexOf(\"<!doctype\")>-1?r.documentElement.innerHTML=e:r.body.innerHTML=e,r},e}function htmlToDom(e){var r=(new HtmlParser).parseFromString(e,\"text/html\");return collapse(r,isBlock),r}function bfsOrder(e){for(var r,t,n,o=[e],i=[];o.length>0;)for(r=o.shift(),i.push(r),t=r.childNodes,n=0;n<t.length;n++)1===t[n].nodeType&&o.push(t[n]);return i.shift(),i}function getContent(e){for(var r=\"\",t=0;t<e.childNodes.length;t++)if(1===e.childNodes[t].nodeType)r+=e.childNodes[t]._replacement;else{if(3!==e.childNodes[t].nodeType)continue;r+=e.childNodes[t].data}return r}function outer(e,r){return e.cloneNode(!1).outerHTML.replace(\"><\",\">\"+r+\"<\")}function canConvert(e,r){if(\"string\"==typeof r)return r===e.nodeName.toLowerCase();if(Array.isArray(r))return-1!==r.indexOf(e.nodeName.toLowerCase());if(\"function\"==typeof r)return r.call(toMarkdown,e);throw new TypeError(\"`filter` needs to be a string, array, or function\")}function isFlankedByWhitespace(e,r){var t,n,o;return\"left\"===e?(t=r.previousSibling,n=/ $/):(t=r.nextSibling,n=/^ /),t&&(3===t.nodeType?o=n.test(t.nodeValue):1!==t.nodeType||isBlock(t)||(o=n.test(t.textContent))),o}function flankingWhitespace(e){var r=\"\",t=\"\";if(!isBlock(e)){var n=/^[ \\r\\n\\t]/.test(e.innerHTML),o=/[ \\r\\n\\t]$/.test(e.innerHTML);n&&!isFlankedByWhitespace(\"left\",e)&&(r=\" \"),o&&!isFlankedByWhitespace(\"right\",e)&&(t=\" \")}return{leading:r,trailing:t}}function process(e){var r,t=getContent(e);if(!isVoid(e)&&!/A/.test(e.nodeName)&&/^\\s*$/i.test(t))return void(e._replacement=\"\");for(var n=0;n<converters.length;n++){var o=converters[n];if(canConvert(e,o.filter)){if(\"function\"!=typeof o.replacement)throw new TypeError(\"`replacement` needs to be a function that returns a string\");var i=flankingWhitespace(e);(i.leading||i.trailing)&&(t=trim(t)),r=i.leading+o.replacement.call(toMarkdown,t,e)+i.trailing;break}}e._replacement=r}var toMarkdown,converters,mdConverters=require(\"./lib/md-converters\"),gfmConverters=require(\"./lib/gfm-converters\"),collapse=require(\"collapse-whitespace\"),_window=\"undefined\"!=typeof window?window:this,_document;_document=\"undefined\"==typeof document?require(\"jsdom\").jsdom():document;var blocks=[\"address\",\"article\",\"aside\",\"audio\",\"blockquote\",\"body\",\"canvas\",\"center\",\"dd\",\"dir\",\"div\",\"dl\",\"dt\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"frameset\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"header\",\"hgroup\",\"hr\",\"html\",\"isindex\",\"li\",\"main\",\"menu\",\"nav\",\"noframes\",\"noscript\",\"ol\",\"output\",\"p\",\"pre\",\"section\",\"table\",\"tbody\",\"td\",\"tfoot\",\"th\",\"thead\",\"tr\",\"ul\"],voids=[\"area\",\"base\",\"br\",\"col\",\"command\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"],HtmlParser=canParseHtml()?_window.DOMParser:createHtmlParser();toMarkdown=function(e,r){if(r=r||{},\"string\"!=typeof e)throw new TypeError(e+\" is not a string\");e=e.replace(/(\\d+)\\. /g,\"$1\\\\. \");var t,n=htmlToDom(e).body,o=bfsOrder(n);converters=mdConverters.slice(0),r.gfm&&(converters=gfmConverters.concat(converters)),r.converters&&(converters=r.converters.concat(converters));for(var i=o.length-1;i>=0;i--)process(o[i]);return t=getContent(n),t.replace(/^[\\t\\r\\n]+|[\\t\\r\\n\\s]+$/g,\"\").replace(/\\n\\s+\\n/g,\"\\n\\n\").replace(/\\n{3,}/g,\"\\n\\n\")},toMarkdown.isBlock=isBlock,toMarkdown.isVoid=isVoid,toMarkdown.trim=trim,toMarkdown.outer=outer,module.exports=toMarkdown;\n},{\"./lib/gfm-converters\":48,\"./lib/md-converters\":49,\"collapse-whitespace\":46,\"jsdom\":45}],48:[function(require,module,exports){\n\"use strict\";function cell(e,t){var n=Array.prototype.indexOf.call(t.parentNode.childNodes,t),r=\" \";return 0===n&&(r=\"| \"),r+e+\" |\"}var highlightRegEx=/highlight highlight-(\\S+)/;module.exports=[{filter:\"br\",replacement:function(){return\"\\n\"}},{filter:[\"del\",\"s\",\"strike\"],replacement:function(e){return\"~~\"+e+\"~~\"}},{filter:function(e){return\"checkbox\"===e.type&&\"LI\"===e.parentNode.nodeName},replacement:function(e,t){return(t.checked?\"[x]\":\"[ ]\")+\" \"}},{filter:[\"th\",\"td\"],replacement:function(e,t){return cell(e,t)}},{filter:\"tr\",replacement:function(e,t){var n=\"\",r={left:\":--\",right:\"--:\",center:\":-:\"};if(\"THEAD\"===t.parentNode.nodeName)for(var i=0;i<t.childNodes.length;i++){var l=t.childNodes[i].attributes.align,a=\"---\";l&&(a=r[l.value]||a),n+=cell(a,t.childNodes[i])}return\"\\n\"+e+(n?\"\\n\"+n:\"\")}},{filter:\"table\",replacement:function(e){return\"\\n\\n\"+e+\"\\n\\n\"}},{filter:[\"thead\",\"tbody\",\"tfoot\"],replacement:function(e){return e}},{filter:function(e){return\"PRE\"===e.nodeName&&e.firstChild&&\"CODE\"===e.firstChild.nodeName},replacement:function(e,t){return\"\\n\\n```\\n\"+t.firstChild.textContent+\"\\n```\\n\\n\"}},{filter:function(e){return\"PRE\"===e.nodeName&&\"DIV\"===e.parentNode.nodeName&&highlightRegEx.test(e.parentNode.className)},replacement:function(e,t){var n=t.parentNode.className.match(highlightRegEx)[1];return\"\\n\\n```\"+n+\"\\n\"+t.textContent+\"\\n```\\n\\n\"}},{filter:function(e){return\"DIV\"===e.nodeName&&highlightRegEx.test(e.className)},replacement:function(e){return\"\\n\\n\"+e+\"\\n\\n\"}}];\n},{}],49:[function(require,module,exports){\n\"use strict\";module.exports=[{filter:\"p\",replacement:function(e){return\"\\n\\n\"+e+\"\\n\\n\"}},{filter:\"br\",replacement:function(){return\"  \\n\"}},{filter:[\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\"],replacement:function(e,n){for(var t=n.nodeName.charAt(1),r=\"\",i=0;t>i;i++)r+=\"#\";return\"\\n\\n\"+r+\" \"+e+\"\\n\\n\"}},{filter:\"hr\",replacement:function(){return\"\\n\\n* * *\\n\\n\"}},{filter:[\"em\",\"i\"],replacement:function(e){return\"_\"+e+\"_\"}},{filter:[\"strong\",\"b\"],replacement:function(e){return\"**\"+e+\"**\"}},{filter:function(e){var n=e.previousSibling||e.nextSibling,t=\"PRE\"===e.parentNode.nodeName&&!n;return\"CODE\"===e.nodeName&&!t},replacement:function(e){return\"`\"+e+\"`\"}},{filter:function(e){return\"A\"===e.nodeName&&e.getAttribute(\"href\")},replacement:function(e,n){var t=n.title?' \"'+n.title+'\"':\"\";return\"[\"+e+\"](\"+n.getAttribute(\"href\")+t+\")\"}},{filter:\"img\",replacement:function(e,n){var t=n.alt||\"\",r=n.getAttribute(\"src\")||\"\",i=n.title||\"\",l=i?' \"'+i+'\"':\"\";return r?\"![\"+t+\"](\"+r+l+\")\":\"\"}},{filter:function(e){return\"PRE\"===e.nodeName&&\"CODE\"===e.firstChild.nodeName},replacement:function(e,n){return\"\\n\\n    \"+n.firstChild.textContent.replace(/\\n/g,\"\\n    \")+\"\\n\\n\"}},{filter:\"blockquote\",replacement:function(e){return e=this.trim(e),e=e.replace(/\\n{3,}/g,\"\\n\\n\"),e=e.replace(/^/gm,\"> \"),\"\\n\\n\"+e+\"\\n\\n\"}},{filter:\"li\",replacement:function(e,n){e=e.replace(/^\\s+/,\"\").replace(/\\n/gm,\"\\n    \");var t=\"*   \",r=n.parentNode,i=Array.prototype.indexOf.call(r.children,n)+1;return t=/ol/i.test(r.nodeName)?i+\".  \":\"*   \",t+e}},{filter:[\"ul\",\"ol\"],replacement:function(e,n){for(var t=[],r=0;r<n.childNodes.length;r++)t.push(n.childNodes[r]._replacement);return/li/i.test(n.parentNode.nodeName)?\"\\n\"+t.join(\"\\n\"):\"\\n\\n\"+t.join(\"\\n\")+\"\\n\\n\"}},{filter:function(e){return this.isBlock(e)},replacement:function(e,n){return\"\\n\\n\"+this.outer(n,e)+\"\\n\\n\"}},{filter:function(){return!0},replacement:function(e,n){return this.outer(n,e)}}];\n},{}],50:[function(require,module,exports){\nmodule.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};\n},{}]},{},[3])\n\n\n","export default class AppCtrl {\n  constructor() {\n    this.date = Date.now();\n  }\n}\n","module.exports = '<navbar></navbar>\\n\\n<ng-view></ng-view>\\n\\n<footer class=\"footer\">\\n  <div class=\"container\">\\n    <div class=\"pull-left\">\\n      <small>\\n        &copy; {{ $ctrl.date | date:\\'yyyy\\' }} The Love is our Weapon Campaign\\n      </small>\\n    </div>\\n    <!-- TODO: add Help, Privacy & Terms links -->\\n    <!--<div class=\"pull-right\">\\n      <small>\\n        <ul class=\"list-inline\">\\n          <li><a href=\"#\">Help</a></li>\\n          <li><a href=\"#\">Privacy &amp; Terms</a></li>\\n        </ul>\\n      </small>\\n    </div>-->\\n  </div>\\n</footer>\\n';","\"use strict\";function _interopRequireDefault(e){return e&&e.__esModule?e:{\"default\":e}}Object.defineProperty(exports,\"__esModule\",{value:!0});var _angular=require(\"angular\"),_angular2=_interopRequireDefault(_angular),_angularRoute=require(\"angular-route\"),_angularRoute2=_interopRequireDefault(_angularRoute),_uiSelect=require(\"ui-select\"),_uiSelect2=_interopRequireDefault(_uiSelect),_navbar=require(\"../navbar\"),_navbar2=_interopRequireDefault(_navbar),_home=require(\"../home\"),_deed=require(\"../deed\"),_group=require(\"../group\"),_user=require(\"../user\"),_AppCtrl=require(\"./AppCtrl\"),_AppCtrl2=_interopRequireDefault(_AppCtrl),_app=require(\"./app.html\"),_app2=_interopRequireDefault(_app);exports[\"default\"]=_angular2[\"default\"].module(\"app\",[_angularRoute2[\"default\"],_uiSelect2[\"default\"],_navbar2[\"default\"],_home.home,_deed.deed,_group.group,_user.user]).component(\"app\",{controller:_AppCtrl2[\"default\"],template:_app2[\"default\"]}).config([\"$routeProvider\",\"$locationProvider\",\"uiSelectConfig\",function(e,r,t){e.when(\"/\",{controller:\"HomeCtrl\",controllerAs:\"$ctrl\",template:_home.homeTpl}).when(\"/d/:deed\",{controller:\"DeedCtrl\",controllerAs:\"$ctrl\",template:_deed.deedTpl}).when(\"/g/:group\",{controller:\"GroupCtrl\",controllerAs:\"$ctrl\",template:_group.groupTpl}).when(\"/u/:user\",{controller:\"UserCtrl\",controllerAs:\"$ctrl\",template:_user.userTpl}).otherwise(\"/\"),r.html5Mode(!0),t.theme=\"bootstrap\",t.appendToBody=!0}]).name,_angular2[\"default\"].module(_uiSelect2[\"default\"]).config([\"$provide\",function(e){function r(r,t){e.decorator(r,[\"$delegate\",function(e){var r=e[0],l=r.templateUrl;return r.templateUrl=function(e){return e.addClass(t),l(e)},e}])}r(\"uiSelectChoicesDirective\",\"ui-select-choices\"),r(\"uiSelectMatchDirective\",\"ui-select-match\")}]);","export default class DeedCtrl {\n  constructor($rootScope, $routeParams, Alertify, User, Group, Deed, Act, Modal) {\n    Object.assign(this, { Alertify, User, Group, Deed, Act, Modal });\n\n    this.loadDeed($routeParams.deed)\n      .then(() => $rootScope.title = this.Deed.current ? this.Deed.current.title : null);\n  }\n\n  /**\n   * Load a deed by urlTitle\n   *\n   * @param {string} urlTitle\n   */\n  loadDeed(urlTitle) {\n    this.loading = true;\n    return this.Deed\n      .findOne({ urlTitle })\n      .then(deed => {\n        this.Deed.current = deed;\n        this.Act.count({ deed: deed._id });\n      })\n      .catch(error => {\n        this.error = error.message;\n        this.Deed.current = null;\n      })\n      .then(() => this.loading = false);\n  }\n\n  /**\n   * Register a deed as done\n   *\n   * @param {object} deed\n   * @param {object} [group=null]\n   */\n  done(deed, group = null) {\n    this.doing = true;\n    this.Act.done(deed, group)\n      .then(() => {\n        this.Act.count();\n        this.Act.count({ deed: deed._id });\n        this.Alertify.success('Deed done!');\n      })\n      .catch(() => this.Alertify.error('Failed registering deed'))\n      .then(() => this.doing = false);\n  }\n}\n\nDeedCtrl.$inject = ['$rootScope', '$routeParams', 'Alertify', 'User', 'Group', 'Deed', 'Act', 'Modal'];\n","module.exports = '<videotron video-url=\"$ctrl.Deed.current.videoUrl\"></videotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-3 col-sm-push-9\">\\n        <p>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary btn-block btn-lg\"\\n                  ng-click=\"$ctrl.done($ctrl.Deed.current, $ctrl.User.group)\"\\n                  ng-if=\"$ctrl.User.isAuthenticated()\"\\n                  ng-disabled=\"$ctrl.doing\">\\n            <img src=\"/images/logo-invert.png\" class=\"img-responsive img-btn\" ng-hide=\"$ctrl.doing\">\\n            <i class=\"fa fa-cog fa-lg fa-spin\" ng-show=\"$ctrl.doing\"></i>\\n            Done\\n          </button>\\n          <button type=\"button\"\\n                  class=\"btn btn-primary btn-block btn-lg\"\\n                  ng-click=\"$ctrl.Modal.openLogin()\"\\n                  ng-if=\"!$ctrl.User.isAuthenticated()\">\\n            <i class=\"fa fa-fw fa-user\"></i>\\n            Login\\n          </button>\\n        </p>\\n      </div>\\n\\n      <div class=\"col-sm-9 col-sm-pull-3\">\\n        <div class=\"deed-header m-b-md\">\\n          <img src=\"/images/deed.png\" class=\"img-responsive img-circle pull-left m-t-xxs m-r-sm\">\\n          <h1 class=\"m-none\">\\n            {{ $ctrl.Deed.current.title }}\\n          </h1>\\n          <p class=\"m-none\">\\n            <span class=\"f-lg\">\\n              {{ $ctrl.Act.counters[$ctrl.Deed.current._id] | number }}\\n            </span>\\n            acts of love\\n          </p>\\n        </div>\\n        <div marked=\"$ctrl.Deed.current.content\"></div>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport angularMarked from 'angular-marked';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Deed from '../../services/Deed';\nimport Act from '../../services/Act';\nimport Modal from '../../services/Modal';\nimport videotron from '../videotron';\n\n// Component dependencies\nimport DeedCtrl from './DeedCtrl';\nimport template from './deed.html';\nexport let deedTpl = template;\n\nexport let deed = angular.module('app.components.deed', [angularMarked, User, Group, Deed, Act, Modal, videotron])\n  .controller('DeedCtrl', DeedCtrl)\n  .name;\n","import _ from 'lodash';\nimport seedrandom from 'seedrandom';\n\nconst NUM_IMAGES = 6;\n\nexport default class GroupCtrl {\n  constructor($rootScope, $routeParams, Alertify, User, Group, Campaign, Act, Modal) {\n    Object.assign(this, { Alertify, User, Group, Campaign, Act, Modal });\n\n    // Set a random jumbotron background image seeded by the group name\n    this.jumbotronBackground = `/images/header${Math.floor(seedrandom($routeParams.group)() * NUM_IMAGES)}.jpg`;\n    this.campaign = null;\n\n    this.loadGroup($routeParams.group)\n      .then(() => $rootScope.title = this.Group.current ? this.Group.current.name : null);\n  }\n\n  /**\n   * Load a group by it's urlName\n   *\n   * @param {string} urlName\n   */\n  loadGroup(urlName) {\n    this.loading = true;\n    return this.Group\n      .findOne({ urlName })\n      .then(group => {\n        this.Group.current = group;\n        this.Act.count({ group: group._id });\n        this.loadCampaign(group);\n      })\n      .catch(error => {\n        this.error = error.message;\n        this.Group.current = null;\n      })\n      .then(() => this.loading = false);\n  }\n\n  /**\n   * Load all active campaigns\n   *\n   * @param {object} group\n   */\n  loadCampaign(group) {\n    this.Campaign.findOne({ group: group._id, active: true })\n      .catch(() => null)\n      .then(campaign => {\n        this.campaign = campaign;\n        if (this.campaign) {\n          this.Act.count({ campaign: this.campaign._id });\n          this.currentDeed = _.findLast(this.campaign.deeds, { published: true });\n        }\n        this.showCampaignAlert = this.setCampaignAlert(this.campaign, this.Group.current, this.User.current);\n      });\n  }\n\n  /**\n   * Set a deed as published/unpublished for a campaign\n   *\n   * @param {object}  campaign\n   * @param {object}  deed\n   * @param {boolean} [published=true]\n   */\n  setPublished(campaign, deed, published = true) {\n    this.Campaign.setPublished(campaign, deed, published)\n      .then(() => this.loadCampaign(this.Group.current))\n      .catch(err => null);\n  }\n\n  /**\n   * Show hint to setup a campaign if logged in as admin of group with no active campaign\n   *\n   * @param {object} campaign\n   * @param {object} group\n   * @param {object} user\n   *\n   * @returns {boolean}\n   */\n  setCampaignAlert(campaign, group, user) {\n    return (\n      _.isNull(campaign) &&\n      _.has(group, 'admins') &&\n      _.has(user, '_id') &&\n      group.admins.indexOf(user._id) !== -1\n    );\n  }\n\n  /**\n   * Add the current logged in user to this group\n   *\n   * @param {object} user\n   * @param {object} group\n   */\n  addUserToGroup(user, group) {\n    this.User.update(user, { groups: group._id })\n      .then(() => {\n        this.User.group = group;\n        this.Alertify.success('Joined group');\n      })\n      .catch(error => null);\n  }\n\n  /**\n   * Setup a campaign for the current group\n   *\n   * @param {group} group\n   */\n  setupCampaign(group) {\n    this.Modal.openCampaignEdit('setup', group)\n      .then(() => this.loadCampaign(group))\n      .catch(error => null);\n  }\n}\n\nGroupCtrl.$inject = ['$rootScope', '$routeParams', 'Alertify', 'User', 'Group', 'Campaign', 'Act', 'Modal'];\n","module.exports = '<jumbotron image=\"/images/group.png\"\\n           background=\"{{ $ctrl.jumbotronBackground }}\"\\n           title=\"{{ $ctrl.Group.current.name }}\"\\n           text=\"\\n             <span class=\\'f-lg\\'>\\n               {{ $ctrl.Act.counters[$ctrl.Group.current._id] | number }}\\n             </span> acts of love\\n           \"></jumbotron>\\n\\n<div class=\"container container-pad\">\\n  <div class=\"row\">\\n    <div ng-hide=\"$ctrl.loading || $ctrl.error\">\\n      <div class=\"col-sm-3 col-sm-push-9 m-b-lg\">\\n        <div class=\"well well-sm\"\\n             ng-if=\"$ctrl.User.isMemberOfGroup($ctrl.Group.current) && $ctrl.campaign !== null\">\\n          <h5 class=\"text-center\">\\n            Current Campaign\\n            <br>\\n            <small>\\n              <span class=\\'label label-default m-r-xs\\'>\\n                {{ $ctrl.Act.counters[$ctrl.campaign._id] | number }}\\n              </span>\\n              acts of love\\n            </small>\\n          </h5>\\n\\n          <!-- TODO: move buttons to a directive -->\\n          <!-- Show buttons with publish/unpublish menu for admins -->\\n          <div class=\"btn-group btn-block\"\\n               ng-repeat=\"item in $ctrl.campaign.deeds\"\\n               ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            <a class=\"btn col-sm-10\"\\n               ng-class=\"{\\n                 \\'btn-primary\\': item.published,\\n                 \\'btn-default\\': !item.published,\\n                 \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n               }\"\\n               ng-href=\"/d/{{ item.deed.urlTitle }}\">\\n              {{ item.deed.title }}\\n            </a>\\n            <button type=\"button\"\\n                    class=\"btn dropdown-toggle col-sm-2\"\\n                    ng-class=\"{\\n                      \\'btn-primary\\': item.published,\\n                      \\'btn-default\\': !item.published,\\n                      \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n                    }\"\\n                    data-toggle=\"dropdown\"\\n                    aria-haspopup=\"true\"\\n                    aria-expanded=\"false\">\\n              <span class=\"caret\"></span>\\n              <span class=\"sr-only\">Toggle Dropdown</span>\\n            </button>\\n            <ul class=\"dropdown-menu dropdown-menu-right\">\\n              <li ng-hide=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, true)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-up\"></i>\\n                  Publish\\n                </a>\\n              </li>\\n              <li ng-show=\"item.published\">\\n                <a ng-click=\"$ctrl.setPublished($ctrl.campaign, item.deed, false)\" href>\\n                  <i class=\"fa fa-fw fa-thumbs-down\"></i>\\n                  Unpublish\\n                </a>\\n              </li>\\n            </ul>\\n          </div>\\n\\n          <!-- Show a normal button for non-admins -->\\n          <a class=\"btn btn-block\"\\n             ng-repeat=\"item in $ctrl.campaign.deeds\"\\n             ng-href=\"/d/{{ item.deed.urlTitle }}\"\\n             ng-class=\"{\\n               \\'btn-primary\\': item.published,\\n               \\'btn-default\\': !item.published,\\n               \\'btn-lg\\': item.deed._id === $ctrl.currentDeed.deed._id\\n             }\"\\n             ng-if=\"!$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n            {{ item.deed.title }}\\n          </a>\\n        </div>\\n        <button type=\"button\"\\n                class=\"btn btn-primary btn-block btn-lg\"\\n                ng-click=\"$ctrl.User.isAuthenticated() ?\\n                  $ctrl.addUserToGroup($ctrl.User.current, $ctrl.Group.current) :\\n                  $ctrl.Modal.openLogin()\"\\n                ng-if=\"!$ctrl.User.isMemberOfGroup($ctrl.Group.current)\">\\n          <i class=\"fa fa-fw fa-users\"></i>\\n          <span ng-hide=\"$ctrl.User.isAuthenticated()\">Login &amp; </span>\\n          Join us\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.setupCampaign($ctrl.Group.current)\"\\n                ng-if=\"$ctrl.showCampaignAlert\">\\n          <i class=\"fa fa-fw fa-bullhorn\"></i>\\n          Setup campaign\\n        </button>\\n        <button type=\"button\"\\n                class=\"btn btn-default btn-block\"\\n                ng-click=\"$ctrl.Modal.openGroupEdit(\\'update\\', $ctrl.Group.current)\"\\n                ng-if=\"$ctrl.Group.isAdmin($ctrl.Group.current, $ctrl.User.current)\">\\n          <i class=\"fa fa-fw fa-edit\"></i>\\n          Update group\\n        </button>\\n      </div>\\n\\n      <div class=\"col-sm-9 col-sm-pull-3\">\\n        <uib-alert type=\"info\"\\n                   ng-show=\"$ctrl.showCampaignAlert\"\\n                   close=\"$ctrl.showCampaignAlert = false\">\\n          You haven\\'t got an active campaign, would you like to set one up now?&nbsp;\\n          <button class=\"btn btn-info m-t-xs p-xs\"\\n                  ng-click=\"$ctrl.setupCampaign($ctrl.Group.current)\">\\n            Setup Campaign\\n          </button>\\n        </uib-alert>\\n\\n        <blockquote marked=\"$ctrl.Group.current.welcomeMessage\"\\n                    ng-show=\"$ctrl.Group.current.welcomeMessage\"></blockquote>\\n\\n        <div ng-hide=\"$ctrl.Group.current.welcomeMessage\">\\n          <h2>\\n            The Love is our Weapon Campaign is a youth movement that exists to\\n            change cities through the love of Jesus by doing strategic practical\\n            acts of love.\\n          </h2>\\n          <p>\\n            Thousands of people, doing thousands of acts of love, bringing\\n            change, value, healing and hope throughout cities and communities\\n            everywhere.\\n          </p>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n      <p class=\"text-center\">\\n        <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n      </p>\\n    </div>\\n\\n    <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n      <uib-alert type=\"danger\">\\n        <i class=\"fa fa-exclamation-triangle\"></i>\\n        {{ $ctrl.error }}\\n      </uib-alert>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport angularMarked from 'angular-marked';\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Campaign from '../../services/Campaign';\nimport Act from '../../services/Act';\nimport Modal from '../../services/Modal';\nimport jumbotron from '../jumbotron';\n\n// Component dependencies\nimport GroupCtrl from './GroupCtrl';\nimport template from './group.html';\nexport let groupTpl = template;\n\nexport let group = angular.module('app.components.group', [\n  angularMarked,\n  Alertify,\n  User,\n  Group,\n  Campaign,\n  Act,\n  Modal,\n  jumbotron\n])\n  .controller('GroupCtrl', GroupCtrl)\n  .name;\n","export default class HomeCtrl {\n  constructor($rootScope) {\n    $rootScope.title = null;\n  }\n}\n\nHomeCtrl.$inject = ['$rootScope'];\n","module.exports = '<jumbotron background=\"/images/header.jpg\"></jumbotron>\\n\\n<welcome></welcome>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport jumbotron from '../jumbotron';\nimport welcome from '../welcome';\n\n// Component dependencies\nimport HomeCtrl from './HomeCtrl';\nimport template from './home.html';\nexport let homeTpl = template;\n\nexport let home = angular.module('app.components.home', [\n  jumbotron,\n  welcome\n])\n  .controller('HomeCtrl', HomeCtrl)\n  .name;\n","export default class JumbotronCtrl {\n  constructor() {\n    this.styles = {\n      'background-image': `url(${this.background})`\n    };\n  }\n}\n","import angular from 'angular';\n\n// Component dependencies\nimport JumbotronCtrl from './JumbotronCtrl';\nimport jumbotronTpl from './jumbotron.html';\n\nexport default angular.module('app.components.jumbotron', [])\n  .component('jumbotron', {\n    controller: JumbotronCtrl,\n    template: jumbotronTpl,\n    bindings: {\n      image: '@',\n      background: '@',\n      title: '@',\n      text: '@'\n    }\n  })\n  .name;\n","module.exports = '<div class=\"jumbotron\"\\n     ng-style=\"$ctrl.styles\">\\n  <div class=\"container\">\\n    <div class=\"jumbotron-image\" ng-if=\"$ctrl.image\">\\n      <img ng-src=\"{{ $ctrl.image }}\" class=\"img-responsive img-circle\">\\n    </div>\\n    <h1 class=\"jumbotron-title\"\\n        ng-bind-html=\"$ctrl.title\"></h1>\\n    <p class=\"jumbotron-text\"\\n       ng-if=\"$ctrl.text\"\\n       ng-bind-html=\"$ctrl.text\"></p>\\n  </div>\\n</div>\\n';","const MIN_QUERY_LENGTH = 3;\n\nexport default class NavbarCtrl {\n  constructor($location, User, Group, Act, Modal) {\n    Object.assign(this, { $location, User, Group, Act, Modal });\n\n    this.groups = [];\n    this.group = null;\n\n    this.Act.count();\n  }\n\n  /**\n   * Refresh list of groups using search query\n   *\n   * @param {string} query\n   *\n   * @returns {Promise|boolean}\n   */\n  refreshGroups(query) {\n    this.groups = [];\n\n    if (query.length < MIN_QUERY_LENGTH) {\n      return false;\n    }\n\n    return this.Group.search(query, { fields: '_id,name,urlName' })\n      .then(response => this.groups = response.data);\n  }\n\n  /**\n   * Redirect to the selected group homepage\n   *\n   * @param {object} item\n   */\n  selectGroup(item) {\n    this.group = null;\n    this.$location.path(`/g/${item.urlName}`);\n  }\n\n  /**\n   * Set the current user's group, redirect to group homepage\n   *\n   * @param {object} group\n   */\n  setUserGroup(group) {\n    this.User.group = group;\n    this.selectGroup(group);\n  }\n}\n\nNavbarCtrl.$inject = ['$location', 'User', 'Group', 'Act', 'Modal'];\n","import angular from 'angular';\n\n// Module dependencies\nimport ngSanitize from 'angular-sanitize';\nimport uiSelect from 'ui-select';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Act from '../../services/Act';\nimport Modal from '../../services/Modal';\n\n// Component dependencies\nimport NavbarCtrl from './NavbarCtrl';\nimport navbarTpl from './navbar.html';\n\nexport default angular.module('app.components.navbar', [\n  ngSanitize,\n  uiSelect,\n  User,\n  Group,\n  Act,\n  Modal\n])\n  .component('navbar', {\n    controller: NavbarCtrl,\n    template: navbarTpl\n  })\n  .name;\n","module.exports = '<nav class=\"navbar navbar-default navbar-fixed-top\" id=\"liow-navbar\" role=\"navigation\">\\n  <div class=\"container\">\\n    <div class=\"navbar-header\">\\n      <button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#liow-navbar-collapse\" aria-expanded=\"false\">\\n        <span class=\"sr-only\">Toggle navigation</span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n        <span class=\"icon-bar\"></span>\\n      </button>\\n\\n      <a class=\"navbar-brand\" href=\"/\">\\n        <img alt=\"Love is our Weapon\" src=\"/images/logo-navbar.png\">\\n        <div class=\"navbar-brand-label\">\\n          <span class=\"text-primary\">{{ $ctrl.Act.counters.global | number }}</span><br>\\n          <small>acts of love</small>\\n        </div>\\n      </a>\\n    </div>\\n\\n    <div class=\"collapse navbar-collapse\" id=\"liow-navbar-collapse\">\\n      <div class=\"navbar-divider navbar-left\"></div>\\n\\n      <form class=\"navbar-form navbar-left\" id=\"group-search\" role=\"search\">\\n        <div class=\"form-group\">\\n          <label class=\"input-group\">\\n            <div class=\"input-group-addon\"><i class=\"fa fa-search\"></i></div>\\n            <ui-select ng-model=\"$ctrl.group\"\\n                       on-select=\"$ctrl.selectGroup($item)\"\\n                       append-to-body=\"false\">\\n              <ui-select-match placeholder=\"Find a group...\">\\n                {{ $select.selected.name }}\\n              </ui-select-match>\\n              <ui-select-choices repeat=\"group in $ctrl.groups\"\\n                                 position=\"down\"\\n                                 refresh=\"$ctrl.refreshGroups($select.search)\"\\n                                 refresh-delay=\"200\">\\n                <div ng-bind-html=\"group.name | highlight:$select.search\"></div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </label>\\n        </div>\\n      </form>\\n\\n      <ul class=\"nav navbar-nav navbar-right\">\\n        <li ng-show=\"$ctrl.User.isAuthenticated() && $ctrl.User.group\">\\n          <a ng-href=\"/g/{{ $ctrl.User.group.urlName }}\"\\n             title=\"{{ $ctrl.User.group.name }}\">\\n            Campaign\\n          </a>\\n        </li>\\n        <li class=\"dropdown\">\\n          <a class=\"dropdown-toggle user-dropdown\"\\n             data-toggle=\"dropdown\"\\n             role=\"button\"\\n             aria-haspopup=\"true\"\\n             aria-expanded=\"false\"\\n             href>\\n            <img ng-src=\"{{ $ctrl.User.current.picture || \\'images/user.png\\' }}\"\\n                 class=\"img-circle\">\\n            <span class=\"caret\"></span>\\n          </a>\\n          <ul class=\"dropdown-menu\">\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <i class=\"fa fa-fw fa-user\"></i>\\n              {{ $ctrl.User.current.name }}\\n            </li>\\n            <li ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.User.logout()\" href>\\n                <i class=\"fa fa-fw fa-sign-out\"></i>\\n                Logout\\n              </a>\\n            </li>\\n            <li ng-hide=\"$ctrl.User.isAuthenticated()\">\\n              <a ng-click=\"$ctrl.Modal.openLogin()\" href>\\n                <i class=\"fa fa-fw fa-sign-in\"></i>\\n                Login\\n              </a>\\n            </li>\\n            <li class=\"divider\" ng-show=\"$ctrl.User.isAuthenticated()\" role=\"separator\"></li>\\n            <li class=\"dropdown-header\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\">\\n              <i class=\"fa fa-fw fa-users\"></i>\\n              Groups\\n            </li>\\n            <li ng-repeat=\"group in $ctrl.User.current.groups\"\\n                ng-show=\"$ctrl.User.isAuthenticated()\"\\n                ng-class=\"{ \\'active\\': $ctrl.User.group._id === group._id }\">\\n              <a ng-click=\"$ctrl.setUserGroup(group)\" href>\\n                {{ group.name }}\\n              </a>\\n            </li>\\n            <li>\\n              <a ng-click=\"$ctrl.Modal.openGroupEdit()\" href>\\n                <i class=\"fa fa-fw fa-pencil-square-o\"></i>\\n                Group sign up\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n    </div>\\n  </div>\\n</nav>\\n';","export default class UserCtrl {\n  constructor($rootScope, $routeParams) {\n    this.name = $routeParams.user;\n    $rootScope.title = this.name;\n  }\n}\n\nUserCtrl.$inject = ['$rootScope', '$routeParams'];\n","import angular from 'angular';\n\n// Module dependencies\nimport jumbotron from '../jumbotron';\n\n// Component dependencies\nimport UserCtrl from './UserCtrl';\nimport template from './user.html';\nexport let userTpl = template;\n\nexport let user = angular.module('app.components.user', [jumbotron])\n  .controller('UserCtrl', UserCtrl)\n  .name;\n","module.exports = '<jumbotron background=\"/images/header.jpg\"></jumbotron>\\n<div class=\"container\">\\n  <div class=\"row\">\\n    <div class=\"col-xs-12\">\\n      <h1>Hello, {{ $ctrl.name }}</h1>\\n      <p>This is a User Homepage!</p>\\n      <p>Though it\\'s just a placeholder for now...</p>\\n    </div>\\n  </div>\\n</div>\\n';","import angular from 'angular';\n\n// Module dependencies\nimport angularYoutube from 'angular-youtube-embed';\n\n// Component dependencies\nimport videotronTpl from './videotron.html';\n\nexport default angular.module('app.components.videotron', [angularYoutube])\n  .component('videotron', {\n    template: videotronTpl,\n    bindings: {\n      videoId: '=',\n      videoUrl: '='\n    }\n  })\n  .name;\n","module.exports = '<div class=\"jumbotron videotron\">\\n  <div class=\"container\">\\n    <div class=\"embed-responsive embed-responsive-16by9\">\\n      <youtube-video ng-if=\"$ctrl.videoId\"\\n                     video-id=\"$ctrl.videoId\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n      <youtube-video ng-if=\"$ctrl.videoUrl\"\\n                     video-url=\"$ctrl.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n  </div>\\n</div>\\n';","export default class WelcomeCtrl {\n  constructor(User, Group, Act, Modal) {\n    Object.assign(this, { Act, Modal });\n\n    Group.find({ count: true })\n      .then(response => this.numberOfGroups = Number(response.data));\n\n    User.find({ count: true })\n      .then(response => this.numberOfUsers = Number(response.data));\n  }\n}\n\nWelcomeCtrl.$inject = ['User', 'Group', 'Act', 'Modal'];\n","import angular from 'angular';\n\n// Module dependencies\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Act from '../../services/Act';\nimport Modal from '../../services/Modal';\n\n// Component dependencies\nimport WelcomeCtrl from './WelcomeCtrl';\nimport welcomeTpl from './welcome.html';\n\nexport default angular.module('app.components.welcome', [\n  User,\n  Group,\n  Act,\n  Modal\n])\n  .component('welcome', {\n    controller: WelcomeCtrl,\n    template: welcomeTpl\n  })\n  .name;\n","/* globals LIOW_CONFIG */\n\nimport _ from 'lodash';\nimport angular from 'angular';\n\nconst defaults = {\n  serverUrl: 'http://localhost:3000',\n  facebookClientId: 'FACEBOOK_CLIENT_ID'\n};\n\nexport default angular.module('app.config', [])\n  .constant('config', _.defaults(LIOW_CONFIG || {}, defaults))\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\nexport default angular.module('app.filters.lodash', [])\n  .filter('capitalize', () => _.capitalize)\n  .filter('kebabCase', () => _.kebabCase)\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nclass Act {\n  constructor($http, config) {\n    Object.assign(this, { $http });\n\n    this.baseUrl = `${config.serverUrl}/acts`;\n    this.counters = {};\n  }\n\n  /**\n   * Count acts for global, a user, a group, a campaign or a deed\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  count(params = {}) {\n    params = _.defaults(params, { count: true });\n\n    return this.$http.get(this.baseUrl, { params })\n      .then(response => {\n        response.data = Number(response.data);\n\n        if (params.user) this.counters[params.user] = response.data;\n        else if (params.group) this.counters[params.group] = response.data;\n        else if (params.campaign) this.counters[params.campaign] = response.data;\n        else if (params.deed) this.counters[params.deed] = response.data;\n        else this.counters.global = response.data;\n\n        return response;\n      });\n  }\n\n  /**\n   * Register a deed as done\n   *\n   * @param {object} deed\n   * @param {object} [group=null]\n   *\n   * @returns {HttpPromise}\n   */\n  done(deed, group = null) {\n    return this.$http.post(this.baseUrl, {\n      deed: deed._id,\n      group: _.has(group, '_id') ? group._id : null\n    });\n  }\n}\n\nAct.$inject = ['$http', 'config'];\n\nexport default angular.module('app.services.Act', [config])\n  .service('Act', Act)\n  .name;\n","import angular from 'angular';\nimport alertify from 'alertify.js';\n\nexport default angular.module('app.services.Alertify', [])\n  .factory('Alertify', () => {\n    alertify\n      .theme('bootstrap')\n      .logPosition('top right');\n\n    return {\n\n      /**\n       * Show a normal log message\n       *\n       * @param {string} message\n       * @param {string} icon\n       *\n       * @returns {object}\n       */\n      log(message, icon = 'info-circle') {\n        return alertify\n          .setLogTemplate(input => `<i class=\"fa fa-fw fa-${icon}\"></i> ${input}`)\n          .log(message);\n      },\n\n      /**\n       * Show a green success message\n       *\n       * @param {string} message\n       * @param {string} icon\n       *\n       * @returns {object}\n       */\n      success(message, icon = 'check-circle') {\n        return alertify\n          .setLogTemplate(input => `<i class=\"fa fa-fw fa-${icon}\"></i> ${input}`)\n          .success(message);\n      },\n\n      /**\n       * Show a red error message\n       *\n       * @param {string} message\n       * @param {string} icon\n       *\n       * @returns {object}\n       */\n      error(message, icon = 'exclamation-circle') {\n        return alertify\n          .setLogTemplate(input => `<i class=\"fa fa-fw fa-${icon}\"></i> ${input}`)\n          .error(message);\n      }\n\n    };\n  })\n  .name;\n","import angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nclass Campaign {\n  constructor($http, $q, config) {\n    Object.assign(this, { $http, $q });\n\n    this.baseUrl = `${config.serverUrl}/campaigns`;\n  }\n\n  /**\n   * Find campaigns by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single campaign by params\n   *\n   * @param {object} params\n   *\n   * @returns {Promise}\n   */\n  findOne(params) {\n    return this.$q((resolve, reject) => {\n      this.find(params)\n        .then(response => {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Campaign not found'));\n          }\n        })\n        .catch(() => reject(new Error('Failed connecting to server')));\n    });\n  }\n\n  /**\n   * Save a new or existing campaign\n   *\n   * @param {object} campaign\n   *\n   * @returns {HttpPromise}\n   */\n  save(campaign) {\n    if (_.has(campaign, '_id')) {\n      return this.$http.put(`${this.baseUrl}/${campaign._id}`, campaign);\n    } else {\n      return this.$http.post(this.baseUrl, campaign);\n    }\n  }\n\n  /**\n   * Set a deed as published/unpublished for a campaign\n   * TODO: should we use JSON patch?\n   *\n   * @param {object}  campaign\n   * @param {object}  deed\n   * @param {boolean} [published=true]\n   */\n  setPublished(campaign, deed, published = true) {\n    let action = published ? 'post' : 'delete';\n\n    return this.$http[action](`${this.baseUrl}/${campaign._id}/deeds/${deed._id}/published`);\n  }\n}\n\nCampaign.$inject = ['$http', '$q', 'config'];\n\nexport default angular.module('app.services.Campaign', [config])\n  .service('Campaign', Campaign)\n  .name;\n","import angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\n\nlet currentDeed = null;\n\nclass Deed {\n  constructor($http, $q, config) {\n    Object.assign(this, { $http, $q });\n\n    this.baseUrl = `${config.serverUrl}/deeds`;\n  }\n\n  /**\n   * Find deeds by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single deed by params\n   *\n   * @param {object} params\n   *\n   * @returns {Promise}\n   */\n  findOne(params) {\n    return this.$q((resolve, reject) => {\n      this.find(params)\n        .then(response => {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Deed not found'));\n          }\n        })\n        .catch(() => reject(new Error('Failed connecting to server')));\n    });\n  }\n\n  /**\n   * Get a deed by ID\n   *\n   * @param {string} deedId\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  get(deedId, params = {}) {\n    return this.$http.get(`${this.baseUrl}/${deedId}`, { params });\n  }\n\n  /**\n   * Set the current deed\n   *\n   * @param {object|null} deed\n   */\n  set current(deed) {\n    currentDeed = deed;\n  }\n\n  /**\n   * Get the current deed\n   *\n   * @returns {object|null}\n   */\n  get current() {\n    return currentDeed;\n  }\n}\n\nDeed.$inject = ['$http', '$q', 'config'];\n\nexport default angular.module('app.services.Deed', [config])\n  .service('Deed', Deed)\n  .name;\n","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\nimport User from './User';\n\nlet currentGroup = null;\n\nclass Group {\n  constructor($http, $q, config, User) {\n    Object.assign(this, { $http, $q, User });\n\n    this.baseUrl = `${config.serverUrl}/groups`;\n  }\n\n  /**\n   * Find groups by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Find a single group by params\n   *\n   * @param {object} params\n   *\n   * @returns {Promise}\n   */\n  findOne(params) {\n    return this.$q((resolve, reject) => {\n      this.find(params)\n        .then(response => {\n          if (response.data.length === 1) {\n            resolve(response.data[0]);\n          } else {\n            reject(new Error('Group not found'));\n          }\n        })\n        .catch(() => reject(new Error('Failed connecting to server')));\n    });\n  }\n\n  /**\n   * Search for groups with a search query and optional params\n   *\n   * @param {string} query\n   * @param {object} params\n   *\n   * @returns {HttpPromise}\n   */\n  search(query, params) {\n    params = _.merge({ query }, params);\n\n    return this.find(params);\n  }\n\n  /**\n   * Save a new or existing group\n   *\n   * @param {object} group\n   *\n   * @returns {HttpPromise}\n   */\n  save(group) {\n    if (_.has(group, '_id')) {\n      return this.$http.put(`${this.baseUrl}/${group._id}`, group);\n    } else {\n      return this.$http.post(this.baseUrl, group);\n    }\n  }\n\n  /**\n   * Check if a user is an admin of a group\n   *\n   * @param {object} group\n   * @param {object} user\n   *\n   * @returns {boolean}\n   */\n  isAdmin(group, user) {\n    return _.has(group, 'admins') && _.has(user, '_id') && group.admins.indexOf(user._id) > -1;\n  }\n\n  /**\n   * Set the current group\n   *\n   * @param {object|null} group\n   */\n  set current(group) {\n    currentGroup = group;\n\n    // If the current user is a member of this group, make it their active group\n    if (this.User.current && _.find(this.User.current.groups, ['id', group._id])) {\n      this.User.group = group;\n    }\n  }\n\n  /**\n   * Get the current group\n   *\n   * @returns {object|null}\n   */\n  get current() {\n    return currentGroup;\n  }\n}\n\nGroup.$inject = ['$http', '$q', 'config', 'User'];\n\nexport default angular.module('app.services.Group', [config, User])\n  .service('Group', Group)\n  .name;\n","import _ from 'lodash';\n\nexport default class CampaignEditCtrl {\n  constructor($uibModalInstance, Alertify, Campaign, Deed, Modal, action, group, campaign) {\n    Object.assign(this, { $uibModalInstance, Alertify, Campaign, Deed, Modal, action, group, campaign });\n\n    this.error = null;\n    this.deeds = [];\n\n    this.loadDeeds();\n    if (!this.campaign) {\n      this.resetFields();\n    }\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n  resetFields() {\n    this.campaign = {\n      group: this.group._id,\n      deeds: []\n    };\n  }\n\n  /**\n   * Save the Campaign\n   *\n   * @param {object} campaign\n   */\n  save(campaign) {\n    let toSave = angular.copy(campaign);\n    toSave.deeds = _.map(toSave.deeds, deed => ({ deed: deed._id }));\n\n    this.saving = true;\n    this.error = null;\n    this.Campaign.save(toSave)\n      .then(() => {\n        this.$uibModalInstance.close();\n        this.Alertify.success('Setup campaign');\n      })\n      .catch(response => this.error = response.data.error)\n      .then(() => this.saving = false);\n  }\n\n  /**\n   * Load all of the deeds\n   * Note: in the future we might not want to preload ALL deeds\n   */\n  loadDeeds() {\n    this.loading = true;\n    this.Deed.find({ fields: '_id,title' })\n      .then(response => this.deeds = response.data)\n      .catch(response => this.error = response.data.error)\n      .then(() => this.loading = false)\n  }\n}\n\nCampaignEditCtrl.$inject = ['$uibModalInstance', 'Alertify', 'Campaign', 'Deed', 'Modal', 'action', 'group', 'campaign'];\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ $ctrl.action | capitalize }} Campaign for {{ $ctrl.group.name }}\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\" ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or contact us about it.\\n  </uib-alert>\\n\\n  <div class=\"col-xs-12\">\\n    <p>\\n      Create a campaign by dragging deeds from the \\'Available Deeds\\' list into the \\'Your Campaign\\' list.\\n      You can also re-order deeds within your campaign.\\n    </p>\\n    <p>\\n      We recommend choosing 1 deed for each week of the campaign,\\n      so choosing 6 deeds would work best for a 6 week campaign.\\n      In our experience with youth groups, a 4-6 week campaign works best\\n      to keep up interest and engagement with the campaign.\\n    </p>\\n  </div>\\n\\n  <form name=\"campaignEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.save($ctrl.campaign)\">\\n    <span ng-init=\"$ctrl.form = campaignEdit\"></span>\\n\\n    <div class=\"form-group\">\\n      <div class=\"col-xs-6\">\\n        <h5>Available Deeds</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"deed in $ctrl.deeds track by deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n\\n      <div class=\"col-xs-6\">\\n        <h5>Your Campaign</h5>\\n        <ul class=\"list-group\"\\n            dragula=\"\\'bag-deeds\\'\"\\n            dragula-model=\"$ctrl.campaign.deeds\">\\n          <li class=\"list-group-item\"\\n              ng-repeat=\"deed in $ctrl.campaign.deeds track by deed._id\">\\n            <button type=\"button\"\\n                    class=\"btn btn-link p-none pull-right\"\\n                    ng-click=\"$ctrl.Modal.openDeedPreview(deed._id)\">\\n              <i class=\"fa fa-lg fa-info-circle text-info m-l-xs\"></i>\\n            </button>\\n            {{ deed.title }}\\n          </li>\\n        </ul>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.campaign)\"\\n          ng-disabled=\"$ctrl.loading || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ $ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';","export default class DeedPreview {\n  constructor($uibModalInstance, Deed, deedId) {\n    Object.assign(this, { $uibModalInstance, Deed });\n\n    this.error = null;\n\n    this.loadDeed(deedId);\n  }\n\n  /**\n   * Load the deed by ID\n   *\n   * @param {string} deedId\n   */\n  loadDeed(deedId) {\n    this.loading = true;\n    this.Deed.get(deedId)\n      .then(response => this.deed = response.data)\n      .catch(response => this.error = 'Deed not found')\n      .then(() => this.loading = false);\n  }\n}\n\nDeedPreview.$inject = ['$uibModalInstance', 'Deed', 'deedId'];\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Preview Deed\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div class=\"col-xs-12\" ng-hide=\"$ctrl.loading || $ctrl.error\">\\n    <div class=\"embed-responsive embed-responsive-16by9\"\\n         ng-show=\"$ctrl.deed.videoUrl\">\\n      <youtube-video video-url=\"$ctrl.deed.videoUrl\"\\n                     class=\"embed-responsive-item\"></youtube-video>\\n    </div>\\n\\n    <div class=\"deed-header m-b-md\">\\n      <img src=\"/images/deed.png\" class=\"img-responsive img-circle pull-left m-t-xxs m-r-sm\">\\n      <h1 class=\"m-none\">\\n        {{ $ctrl.deed.title }}\\n      </h1>\\n      <p class=\"m-none\">\\n        <span class=\\'f-lg\\'>12,001</span> acts of love\\n      </p>\\n    </div>\\n\\n    <div marked=\"$ctrl.deed.content\"></div>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.loading\">\\n    <p class=\"text-center\">\\n      <i class=\"fa fa-cog fa-5x fa-spin\"></i>\\n    </p>\\n  </div>\\n\\n  <div class=\"col-xs-12\" ng-show=\"$ctrl.error\">\\n    <uib-alert type=\"danger\">\\n      <i class=\"fa fa-exclamation-triangle\"></i>\\n      {{ $ctrl.error }}\\n    </uib-alert>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Close\\n  </button>\\n</div><!-- .modal-footer -->\\n';","import _ from 'lodash';\nimport toMarkdown from 'to-markdown';\nimport showdown from 'showdown';\nlet converter = new showdown.Converter();\n\nexport default class GroupEditCtrl {\n  constructor($uibModalInstance, $scope, $timeout, $location, Alertify, User, Group, Modal, action, group) {\n    Object.assign(this, { $uibModalInstance, $scope, $timeout, $location, Alertify, User, Group, Modal, action, group });\n\n    this.error = null;\n\n    if (this.group) {\n      this.group.welcomeMessage = converter.makeHtml(this.group.welcomeMessage);\n    } else {\n      this.resetFields();\n    }\n\n    if (_.isObject(this.User.current)) {\n      this.setupMediumEditor();\n    }\n  }\n\n  /**\n   * Reset all form fields to defaults\n   */\n  resetFields() {\n    this.group = {\n      name: '',\n      logo: '',\n      coverImage: '',\n      welcomeMessage: ''\n    };\n  }\n\n  /**\n   * Initialise the MediumEditor element, respond to input changes\n   *\n   * TODO: move MediumEditor setup and config to a component\n   */\n  setupMediumEditor() {\n    this.$timeout(() => {\n      this.editor = new MediumEditor(document.querySelectorAll('#welcomeMessage'), {\n        placeholder: { text: 'Enter a welcome message...' },\n        toolbar: { buttons: ['bold', 'italic', 'underline', 'anchor', 'orderedlist', 'unorderedlist'] },\n        autoLink: true\n      });\n\n      this.editor.subscribe('editableInput', (event, editable) => {\n        this.$scope.$apply(() => {\n          this.group.welcomeMessage = toMarkdown(editable.innerHTML, {\n            converters: [{\n              // Remove spans and divs\n              filter: function (node) {\n                return node.nodeName === 'SPAN' || node.nodeName === 'DIV';\n              },\n              replacement: function (content) {\n                return content;\n              }\n            }]\n          });\n        });\n      });\n\n      this.$scope.$on('$destroy', () => this.editor.destroy());\n    });\n  }\n\n  /**\n   * Prompt user to login, then reset the form fields and setup the MediumEditor\n   */\n  openLoginModal() {\n    this.Modal.openLogin()\n      .then(() => this.User.loadCurrent())\n      .then(() => this.setupMediumEditor())\n      .catch((err) => null);\n  }\n\n  /**\n   * Save the Group\n   *\n   * @param {object} group\n   */\n  save(group) {\n    this.saving = true;\n    this.error = null;\n    this.Group.save(group)\n      .then(response => {\n        this.Group.current = response.data;\n        this.User.loadCurrent();\n\n        this.$location.path(`/g/${response.data.urlName}`);\n        this.$uibModalInstance.close();\n        this.Alertify.success(`${_.capitalize(this.action)}d group`);\n      })\n      .catch(response => this.error = response.data.error)\n      .then(() => this.saving = false);\n  }\n}\n\nGroupEditCtrl.$inject = ['$uibModalInstance', '$scope', '$timeout', '$location', 'Alertify', 'User', 'Group', 'Modal', 'action', 'group'];\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    {{ $ctrl.action | capitalize }} Group\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <uib-alert type=\"danger\" ng-show=\"$ctrl.error && !$ctrl.error.errors\">\\n    <i class=\"fa fa-fw fa-exclamation-triangle\"></i>\\n    Failed sending request. Please try again or contact us about it.\\n  </uib-alert>\\n\\n  <form name=\"groupEdit\"\\n        class=\"form-horizontal\"\\n        ng-submit=\"$ctrl.save($ctrl.group)\"\\n        ng-if=\"$ctrl.User.isAuthenticated()\">\\n    <span ng-init=\"$ctrl.form = groupEdit\"></span>\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.name || $ctrl.error.errors.urlName }\">\\n      <label for=\"name\"\\n             class=\"col-xs-3 control-label\">\\n        Name\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"name\"\\n               name=\"name\"\\n               placeholder=\"Group name...\"\\n               ng-model=\"$ctrl.group.name\"\\n               required\\n               autofocus>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.name || $ctrl.error.errors.urlName\">\\n          https://loveisourweapon.com/g/{{ ($ctrl.group.name | kebabCase) || \\'...\\' }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.name\"\\n              ng-repeat=\"error in $ctrl.error.errors.name\">\\n          {{ error.message }}\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.urlName\"\\n              ng-repeat=\"error in $ctrl.error.errors.urlName\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.logo }\">\\n      <label for=\"logo\"\\n             class=\"col-xs-3 control-label\">\\n        Logo\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"logo\"\\n               name=\"logo\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.logo\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.logo\">\\n          Ideally 500px x 500px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.logo\"\\n              ng-repeat=\"error in $ctrl.error.errors.logo\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.coverImage }\">\\n      <label for=\"coverImage\"\\n             class=\"col-xs-3 control-label\">\\n        Cover Image\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"coverImage\"\\n               name=\"coverImage\"\\n               placeholder=\"Image upload coming soon...\"\\n               ng-model=\"$ctrl.group.coverImage\"\\n               disabled>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.coverImage\">\\n          Ideally 1280px x 580px\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.coverImage\"\\n              ng-repeat=\"error in $ctrl.error.errors.coverImage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <div class=\"form-group\"\\n         ng-class=\"{ \\'has-error\\': $ctrl.error.errors.welcomeMessage }\">\\n      <label for=\"welcomeMessage\"\\n             class=\"col-xs-3 control-label\">\\n        Intro Message\\n      </label>\\n      <div class=\"col-xs-9\">\\n        <div class=\"well well-sm medium-editor m-none\">\\n          <textarea id=\"welcomeMessage\"\\n                    ng-model=\"$ctrl.group.welcomeMessage\"></textarea>\\n        </div>\\n        <span class=\"help-block\"\\n              ng-hide=\"$ctrl.error.errors.welcomeMessage\">\\n          Select text to add links, bold, italics, etc.\\n        </span>\\n        <span class=\"help-block\"\\n              ng-show=\"$ctrl.error.errors.welcomeMessage\"\\n              ng-repeat=\"error in $ctrl.error.errors.welcomeMessage\">\\n          {{ error.message }}\\n        </span>\\n      </div>\\n    </div>\\n\\n    <button type=\"submit\" hidden></button>\\n  </form>\\n\\n  <div class=\"container-fluid\"\\n       ng-if=\"!$ctrl.User.isAuthenticated()\">\\n    <div class=\"row\">\\n      <div class=\"col-xs-12\">\\n        <button type=\"button\"\\n                class=\"btn btn-primary m-r-sm\"\\n                ng-click=\"$ctrl.openLoginModal()\">\\n          Login\\n        </button>\\n        Please login to setup a new group\\n      </div>\\n    </div>\\n  </div>\\n</div><!-- .modal-body -->\\n\\n<div class=\"modal-footer\">\\n  <button type=\"button\"\\n          class=\"btn btn-default\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    Cancel\\n  </button>\\n  <button type=\"button\"\\n          class=\"btn btn-primary\"\\n          ng-click=\"$ctrl.save($ctrl.group)\"\\n          ng-disabled=\"!$ctrl.User.isAuthenticated() || $ctrl.saving || $ctrl.form.$invalid\">\\n    <i class=\"fa fa-cog fa-spin\" ng-show=\"$ctrl.saving\"></i>\\n    {{ $ctrl.action | capitalize }}\\n  </button>\\n</div><!-- .modal-footer -->\\n';","import _ from 'lodash';\nimport angular from 'angular';\n\n// Module dependencies\nimport ngRoute from 'angular-route';\nimport angularDragula from 'angular-dragula';\nimport uibs from 'angular-ui-bootstrap';\nimport angularMarked from 'angular-marked';\nimport angularYoutube from 'angular-youtube-embed';\nimport 'angular-ui-switch'; // Not browserified\nimport lodashFilters from '../../filters/lodash';\nimport Alertify from '../../services/Alertify';\nimport User from '../../services/User';\nimport Group from '../../services/Group';\nimport Campaign from '../../services/Campaign';\nimport Deed from '../../services/Deed';\n\n// Modal controllers & templates\nimport LoginCtrl from './login/LoginCtrl';\nimport loginTpl from './login/login.html';\nimport GroupEditCtrl from './group-edit/GroupEditCtrl';\nimport groupEditTpl from './group-edit/group-edit.html';\nimport CampaignEditCtrl from './campaign-edit/CampaignEditCtrl';\nimport campaignEditTpl from './campaign-edit/campaign-edit.html';\nimport DeedPreviewCtrl from './deed-preview/DeedPreview';\nimport deedPreviewTpl from './deed-preview/deed-preview.html';\n\nclass Modal {\n  constructor($uibModal, $q) {\n    Object.assign(this, { $uibModal, $q });\n\n    this.defaults = {\n      controllerAs: '$ctrl',\n      size: 'md'\n    };\n  }\n\n  /**\n   * Open the login modal\n   *\n   * @returns {Promise}\n   */\n  openLogin() {\n    return this.$uibModal.open(_.defaults({\n      controller: LoginCtrl,\n      template: loginTpl,\n      size: 'sm'\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the group edit modal\n   *\n   * @param {string} [action='create']\n   * @param {object} [group=null]\n   *\n   * @returns {Promise}\n   */\n  openGroupEdit(action = 'create', group = null) {\n    return this.$uibModal.open(_.defaults({\n      controller: GroupEditCtrl,\n      template: groupEditTpl,\n      resolve: {\n        action: this.$q.resolve(action),\n        group: this.$q.resolve(angular.copy(group))\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the campaign edit modal\n   *\n   * @param {string} [action='setup']\n   * @param {object} group\n   * @param {object} [campaign=null]\n   *\n   * @returns {Promise}\n   */\n  openCampaignEdit(action = 'setup', group, campaign = null) {\n    return this.$uibModal.open(_.defaults({\n      controller: CampaignEditCtrl,\n      template: campaignEditTpl,\n      resolve: {\n        action: this.$q.resolve(action),\n        group: this.$q.resolve(angular.copy(group)),\n        campaign: this.$q.resolve(angular.copy(campaign))\n      }\n    }, this.defaults)).result;\n  }\n\n  /**\n   * Open the deed preview modal\n   *\n   * @param {string} deedId\n   *\n   * @returns {Promise}\n   */\n  openDeedPreview(deedId) {\n    return this.$uibModal.open(_.defaults({\n      controller: DeedPreviewCtrl,\n      template: deedPreviewTpl,\n      resolve: {\n        deedId: this.$q.resolve(deedId)\n      }\n    }, this.defaults)).result;\n  }\n}\n\nModal.$inject = ['$uibModal', '$q'];\n\nexport default angular.module('app.services.Modal', [\n  ngRoute,\n  angularDragula(angular),\n  uibs,\n  angularMarked,\n  angularYoutube,\n  'uiSwitch',\n  lodashFilters,\n  User,\n  Group,\n  Campaign,\n  Deed\n])\n  .service('Modal', Modal)\n  .name;\n\n// Fixes to UI Bootstrap Modal\nangular.module(uibs)\n  .directive('uibModalWindow', ['$window', $window => {\n    return {\n      priority: 1,\n      link: (scope, element) => {\n        // Set max-height on modal-body\n        let window = angular.element($window);\n        window.on('resize', setMaxHeight);\n        scope.$on('$destroy', () => window.off('resize', setMaxHeight));\n        setMaxHeight();\n\n        function setMaxHeight() {\n          element\n            .find('.modal-body')\n            .css({\n              maxHeight: window.height() * 0.85 - 80,\n              overflowY: 'auto'\n            });\n        }\n      }\n    }\n  }]);\n","import _ from 'lodash';\n\nexport default class LoginCtrl {\n  constructor($uibModalInstance, $routeParams, Alertify, User, Group) {\n    Object.assign(this, { $uibModalInstance, $routeParams, Alertify, User, Group });\n\n    this.joinGroup = null;\n    if (_.has($routeParams, 'group')) {\n      this.joinGroup = true;\n    }\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {boolean} joinGroup\n   */\n  authenticateFacebook(joinGroup) {\n    let userData = {};\n    if (joinGroup) {\n      userData.group = this.Group.current._id;\n    }\n\n    this.User.authenticateFacebook(userData)\n      .then(() => {\n        if (joinGroup) {\n          this.User.group = this.Group.current;\n        }\n\n        this.$uibModalInstance.close();\n        this.Alertify.success('Signed in');\n      })\n      .catch(() => this.Alertify.error('Failed signing in'));\n  }\n\n  /**\n   * Authenticate user with email and password\n   *\n   * @param {string} email\n   * @param {string} password\n   */\n  authenticateEmail(email, password) {\n    this.User.authenticateEmail(email, password)\n      .then(() => {\n        this.$uibModalInstance.close();\n        this.Alertify.success('Signed in');\n      })\n      .catch(() => this.Alertify.error('Failed signing in'));\n  }\n}\n\nLoginCtrl.$inject = ['$uibModalInstance', '$routeParams', 'Alertify', 'User', 'Group'];\n","module.exports = '<div class=\"modal-header\">\\n  <button type=\"button\"\\n          class=\"close\"\\n          data-dismiss=\"modal\"\\n          aria-label=\"Close\"\\n          ng-click=\"$ctrl.$uibModalInstance.dismiss()\">\\n    <span aria-hidden=\"true\"><i class=\"fa fa-times\"></i></span>\\n  </button>\\n  <h4 class=\"modal-title\">\\n    Login\\n  </h4>\\n</div><!-- .modal-header -->\\n\\n<div class=\"modal-body\">\\n  <div ng-if=\"$ctrl.joinGroup !== null\">\\n    <p>\\n      <switch id=\"joinGroup\"\\n              name=\"joinGroup\"\\n              ng-model=\"$ctrl.joinGroup\"\\n              class=\"m-r-xs\"></switch>\\n      Join {{ $ctrl.Group.current.name }}\\n    </p>\\n    <hr>\\n  </div>\\n\\n  <p>\\n    <button ng-click=\"$ctrl.authenticateFacebook($ctrl.joinGroup)\"\\n            class=\"btn btn-facebook btn-block\">\\n      <i class=\"fa fa-fw fa-facebook-official\"></i>\\n      Sign in with Facebook\\n    </button>\\n  </p>\\n\\n  <hr>\\n\\n  <p>Email and password login coming soon, for now please just use Facebook sign in.</p>\\n\\n  <form ng-submit=\"$ctrl.authenticateEmail($ctrl.email, $ctrl.password)\">\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\"><i class=\"fa fa-fw fa-at\"></i></div>\\n        <input type=\"text\"\\n               class=\"form-control\"\\n               id=\"email\"\\n               name=\"email\"\\n               ng-model=\"$ctrl.email\"\\n               placeholder=\"Email\"\\n               disabled>\\n      </div>\\n    </div>\\n    <div class=\"form-group\">\\n      <div class=\"input-group\">\\n        <div class=\"input-group-addon\"><i class=\"fa fa-fw fa-key\"></i></div>\\n        <input type=\"password\"\\n               class=\"form-control\"\\n               id=\"password\"\\n               name=\"password\"\\n               ng-model=\"$ctrl.password\"\\n               placeholder=\"Password\"\\n               disabled>\\n      </div>\\n    </div>\\n    <button type=\"submit\" class=\"btn btn-primary btn-block\" disabled>Login</button>\\n  </form>\\n</div><!-- .modal-body -->\\n';","import angular from 'angular';\n\n// Module dependencies\nimport config from '../config';\nimport satellizer from 'satellizer';\nimport Alertify from './Alertify';\n\nlet currentUser = null;\nlet currentGroup = null;\n\nclass User {\n  constructor($auth, $http, $q, config, Alertify) {\n    Object.assign(this, { $auth, $http, $q, Alertify });\n\n    this.baseUrl = `${config.serverUrl}/users`;\n\n    this.loadCurrent().catch(() => null);\n  }\n\n  /**\n   * Authenticate user with Facebook\n   *\n   * @param {object} [userData={}]\n   *\n   * @returns {Promise}\n   */\n  authenticateFacebook(userData = {}) {\n    return this.$auth.authenticate('facebook', userData)\n      .then(response => {\n        this.$auth.setToken(response.data.token);\n        return this.loadCurrent();\n      });\n  }\n\n  /**\n   * Authenticate user with email and password\n   *\n   * @param {string} email\n   * @param {string} password\n   *\n   * @returns {Promise}\n   */\n  authenticateEmail(email, password) {\n    if (!email || !password) {\n      return this.$q.reject('Email and/or password not provided');\n    }\n\n    return this.$auth.login({ email, password })\n      .then(response => {\n        this.$auth.setToken(response.data.token);\n        return this.loadCurrent();\n      });\n  }\n\n  /**\n   * Check if there is a currently logged in user\n   *\n   * @returns {boolean}\n   */\n  isAuthenticated() {\n    return this.$auth.isAuthenticated();\n  }\n\n  /**\n   * Check if the current user is a member of a group\n   *\n   * @param {object} group\n   */\n  isMemberOfGroup(group) {\n    return (\n      _.has(currentUser, 'groups') &&\n      _.has(group, '_id') &&\n      _.some(currentUser.groups, userGroup => userGroup._id === group._id)\n    );\n  }\n\n  /**\n   * Logout the current user\n   *\n   * @returns {Promise}\n   */\n  logout() {\n    return this.$auth.logout().then(() => {\n      currentUser = null;\n      this.Alertify.success('Logged out');\n    });\n  }\n\n  /**\n   * Find users by params\n   *\n   * @param {object} [params={}]\n   *\n   * @returns {HttpPromise}\n   */\n  find(params = {}) {\n    return this.$http.get(this.baseUrl, { params });\n  }\n\n  /**\n   * Get the current user from the server\n   *\n   * @returns {Promise}\n   */\n  loadCurrent() {\n    if (!this.isAuthenticated()) {\n      return this.$q.reject('Not logged in')\n    }\n\n    return this.$http.get(`${this.baseUrl}/me`)\n      .then(response => {\n        currentUser = response.data;\n\n        // Set the current group as the users first group\n        if (currentUser.groups.length) {\n          currentGroup = currentUser.groups[0];\n        }\n\n        return response;\n      });\n  }\n\n  /**\n   * Update an existing user\n   *\n   * @param {object} user\n   * @param {object} changes\n   *\n   * @returns {Promise}\n   */\n  update(user, changes) {\n    return this.$http.patch(`${this.baseUrl}/${user._id}`, changes)\n      .then(response => this.loadCurrent());\n  }\n\n  /**\n   * Get the current logged in user\n   *\n   * @returns {object|null}\n   */\n  get current() {\n    return currentUser;\n  }\n\n  /**\n   * Set the current group of the logged in user\n   *\n   * @param {object|null} group\n   */\n  set group(group) {\n    currentGroup = group;\n  }\n\n  /**\n   * Get the current group of the logged in user\n   *\n   * @returns {object|null}\n   */\n  get group() {\n    return currentGroup;\n  }\n}\n\nUser.$inject = ['$auth', '$http', '$q', 'config', 'Alertify'];\n\nexport default angular.module('app.services.User', [\n  config,\n  satellizer,\n  Alertify\n])\n  .config(['$authProvider', 'config', ($authProvider, config) => {\n    $authProvider.loginUrl = `${config.serverUrl}/auth/login`;\n    $authProvider.signupUrl = `${config.serverUrl}/auth/signup`;\n    $authProvider.facebook({\n      clientId: config.facebookClientId,\n      url: `${config.serverUrl}/auth/facebook`\n    });\n  }])\n  .service('User', User)\n  .name;\n","/**\n * This file automatically generated from `build.js`.\n * Do not manually edit.\n */\n\nmodule.exports = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"blockquote\",\n  \"canvas\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"main\",\n  \"nav\",\n  \"noscript\",\n  \"ol\",\n  \"output\",\n  \"p\",\n  \"pre\",\n  \"section\",\n  \"table\",\n  \"tfoot\",\n  \"ul\",\n  \"video\"\n];\n","'use strict';\n\nvar voidElements = require('void-elements');\nObject.keys(voidElements).forEach(function (name) {\n  voidElements[name.toUpperCase()] = 1;\n});\n\nvar blockElements = {};\nrequire('block-elements').forEach(function (name) {\n  blockElements[name.toUpperCase()] = 1;\n});\n\n/**\n * isBlockElem(node) determines if the given node is a block element.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nfunction isBlockElem(node) {\n  return !!(node && blockElements[node.nodeName]);\n}\n\n/**\n * isVoid(node) determines if the given node is a void element.\n *\n * @param {Node} node\n * @return {Boolean}\n */\nfunction isVoid(node) {\n  return !!(node && voidElements[node.nodeName]);\n}\n\n/**\n * whitespace(elem [, isBlock]) removes extraneous whitespace from an\n * the given element. The function isBlock may optionally be passed in\n * to determine whether or not an element is a block element; if none\n * is provided, defaults to using the list of block elements provided\n * by the `block-elements` module.\n *\n * @param {Node} elem\n * @param {Function} blockTest\n */\nfunction collapseWhitespace(elem, isBlock) {\n  if (!elem.firstChild || elem.nodeName === 'PRE') return;\n\n  if (typeof isBlock !== 'function') {\n    isBlock = isBlockElem;\n  }\n\n  var prevText = null;\n  var prevVoid = false;\n\n  var prev = null;\n  var node = next(prev, elem);\n\n  while (node !== elem) {\n    if (node.nodeType === 3) {\n      // Node.TEXT_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) && !prevVoid && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue;\n      }\n\n      node.data = text;\n      prevText = node;\n    } else if (node.nodeType === 1) {\n      // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        prevVoid = false;\n      } else if (isVoid(node)) {\n        // Avoid trimming space around non-block, non-BR void elements.\n        prevText = null;\n        prevVoid = true;\n      }\n    } else {\n      node = remove(node);\n      continue;\n    }\n\n    var nextNode = next(prev, node);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove(node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next;\n}\n\n/**\n * next(prev, current) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @return {Node}\n */\nfunction next(prev, current) {\n  if (prev && prev.parentNode === current || current.nodeName === 'PRE') {\n    return current.nextSibling || current.parentNode;\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode;\n}\n\nmodule.exports = collapseWhitespace;\n","/*\n * to-markdown - an HTML to Markdown converter\n *\n * Copyright 2011-15, Dom Christie\n * Licenced under the MIT licence\n *\n */\n\n'use strict';\n\nvar toMarkdown;\nvar converters;\nvar mdConverters = require('./lib/md-converters');\nvar gfmConverters = require('./lib/gfm-converters');\nvar collapse = require('collapse-whitespace');\n\n/*\n * Set up window and document for Node.js\n */\n\nvar _window = (typeof window !== 'undefined' ? window : this), _document;\nif (typeof document === 'undefined') {\n  _document = require('jsdom').jsdom();\n}\nelse {\n  _document = document;\n}\n\n/*\n * Utilities\n */\n\nfunction trim(string) {\n  return string.replace(/^[ \\r\\n\\t]+|[ \\r\\n\\t]+$/g, '');\n}\n\nvar blocks = ['address', 'article', 'aside', 'audio', 'blockquote', 'body',\n  'canvas', 'center', 'dd', 'dir', 'div', 'dl', 'dt', 'fieldset', 'figcaption',\n  'figure', 'footer', 'form', 'frameset', 'h1', 'h2', 'h3', 'h4','h5', 'h6',\n  'header', 'hgroup', 'hr', 'html', 'isindex', 'li', 'main', 'menu', 'nav',\n  'noframes', 'noscript', 'ol', 'output', 'p', 'pre', 'section', 'table',\n  'tbody', 'td', 'tfoot', 'th', 'thead', 'tr', 'ul'\n];\n\nfunction isBlock(node) {\n  return blocks.indexOf(node.nodeName.toLowerCase()) !== -1;\n}\n\nvar voids = [\n  'area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input',\n  'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr'\n];\n\nfunction isVoid(node) {\n  return voids.indexOf(node.nodeName.toLowerCase()) !== -1;\n}\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHtml() {\n  var Parser = _window.DOMParser, canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n  return canParse;\n}\n\nfunction createHtmlParser() {\n  var Parser = function () {};\n\n  Parser.prototype.parseFromString = function (string) {\n    var newDoc = _document.implementation.createHTMLDocument('');\n\n    if (string.toLowerCase().indexOf('<!doctype') > -1) {\n      newDoc.documentElement.innerHTML = string;\n    }\n    else {\n      newDoc.body.innerHTML = string;\n    }\n    return newDoc;\n  };\n  return Parser;\n}\n\nvar HtmlParser = canParseHtml() ? _window.DOMParser : createHtmlParser();\n\nfunction htmlToDom(string) {\n  var tree = new HtmlParser().parseFromString(string, 'text/html');\n  collapse(tree, isBlock);\n  return tree;\n}\n\n/*\n * Flattens DOM tree into single array\n */\n\nfunction bfsOrder(node) {\n  var inqueue = [node],\n      outqueue = [],\n      elem, children, i;\n\n  while (inqueue.length > 0) {\n    elem = inqueue.shift();\n    outqueue.push(elem);\n    children = elem.childNodes;\n    for (i = 0 ; i < children.length; i++) {\n      if (children[i].nodeType === 1) { inqueue.push(children[i]); }\n    }\n  }\n  outqueue.shift();\n  return outqueue;\n}\n\n/*\n * Contructs a Markdown string of replacement text for a given node\n */\n\nfunction getContent(node) {\n  var text = '';\n  for (var i = 0; i < node.childNodes.length; i++) {\n    if (node.childNodes[i].nodeType === 1) {\n      text += node.childNodes[i]._replacement;\n    }\n    else if (node.childNodes[i].nodeType === 3) {\n      text += node.childNodes[i].data;\n    }\n    else { continue; }\n  }\n  return text;\n}\n\n/*\n * Returns the HTML string of an element with its contents converted\n */\n\nfunction outer(node, content) {\n  return node.cloneNode(false).outerHTML.replace('><', '>'+ content +'<');\n}\n\nfunction canConvert(node, filter) {\n  if (typeof filter === 'string') {\n    return filter === node.nodeName.toLowerCase();\n  }\n  if (Array.isArray(filter)) {\n    return filter.indexOf(node.nodeName.toLowerCase()) !== -1;\n  }\n  else if (typeof filter === 'function') {\n    return filter.call(toMarkdown, node);\n  }\n  else {\n    throw new TypeError('`filter` needs to be a string, array, or function');\n  }\n}\n\nfunction isFlankedByWhitespace(side, node) {\n  var sibling, regExp, isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  }\n  else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    }\n    else if(sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked;\n}\n\nfunction flankingWhitespace(node) {\n  var leading = '', trailing = '';\n\n  if (!isBlock(node)) {\n    var hasLeading = /^[ \\r\\n\\t]/.test(node.innerHTML),\n        hasTrailing = /[ \\r\\n\\t]$/.test(node.innerHTML);\n\n    if (hasLeading && !isFlankedByWhitespace('left', node)) {\n      leading = ' ';\n    }\n    if (hasTrailing && !isFlankedByWhitespace('right', node)) {\n      trailing = ' ';\n    }\n  }\n\n  return { leading: leading, trailing: trailing };\n}\n\n/*\n * Finds a Markdown converter, gets the replacement, and sets it on\n * `_replacement`\n */\n\nfunction process(node) {\n  var replacement, content = getContent(node);\n\n  // Remove blank nodes\n  if (!isVoid(node) && !/A/.test(node.nodeName) && /^\\s*$/i.test(content)) {\n    node._replacement = '';\n    return;\n  }\n\n  for (var i = 0; i < converters.length; i++) {\n    var converter = converters[i];\n\n    if (canConvert(node, converter.filter)) {\n      if (typeof converter.replacement !== 'function') {\n        throw new TypeError(\n          '`replacement` needs to be a function that returns a string'\n        );\n      }\n\n      var whitespace = flankingWhitespace(node);\n\n      if (whitespace.leading || whitespace.trailing) {\n        content = trim(content);\n      }\n      replacement = whitespace.leading +\n                    converter.replacement.call(toMarkdown, content, node) +\n                    whitespace.trailing;\n      break;\n    }\n  }\n\n  node._replacement = replacement;\n}\n\ntoMarkdown = function (input, options) {\n  options = options || {};\n\n  if (typeof input !== 'string') {\n    throw new TypeError(input + ' is not a string');\n  }\n\n  // Escape potential ol triggers\n  input = input.replace(/(\\d+)\\. /g, '$1\\\\. ');\n\n  var clone = htmlToDom(input).body,\n      nodes = bfsOrder(clone),\n      output;\n\n  converters = mdConverters.slice(0);\n  if (options.gfm) {\n    converters = gfmConverters.concat(converters);\n  }\n\n  if (options.converters) {\n    converters = options.converters.concat(converters);\n  }\n\n  // Process through nodes in reverse (so deepest child elements are first).\n  for (var i = nodes.length - 1; i >= 0; i--) {\n    process(nodes[i]);\n  }\n  output = getContent(clone);\n\n  return output.replace(/^[\\t\\r\\n]+|[\\t\\r\\n\\s]+$/g, '')\n               .replace(/\\n\\s+\\n/g, '\\n\\n')\n               .replace(/\\n{3,}/g, '\\n\\n');\n};\n\ntoMarkdown.isBlock = isBlock;\ntoMarkdown.isVoid = isVoid;\ntoMarkdown.trim = trim;\ntoMarkdown.outer = outer;\n\nmodule.exports = toMarkdown;\n","'use strict';\n\nfunction cell(content, node) {\n  var index = Array.prototype.indexOf.call(node.parentNode.childNodes, node);\n  var prefix = ' ';\n  if (index === 0) { prefix = '| '; }\n  return prefix + content + ' |';\n}\n\nvar highlightRegEx = /highlight highlight-(\\S+)/;\n\nmodule.exports = [\n  {\n    filter: 'br',\n    replacement: function () {\n      return '\\n';\n    }\n  },\n  {\n    filter: ['del', 's', 'strike'],\n    replacement: function (content) {\n      return '~~' + content + '~~';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.type === 'checkbox' && node.parentNode.nodeName === 'LI';\n    },\n    replacement: function (content, node) {\n      return (node.checked ? '[x]' : '[ ]') + ' ';\n    }\n  },\n\n  {\n    filter: ['th', 'td'],\n    replacement: function (content, node) {\n      return cell(content, node);\n    }\n  },\n\n  {\n    filter: 'tr',\n    replacement: function (content, node) {\n      var borderCells = '';\n      var alignMap = { left: ':--', right: '--:', center: ':-:' };\n\n      if (node.parentNode.nodeName === 'THEAD') {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var align = node.childNodes[i].attributes.align;\n          var border = '---';\n\n          if (align) { border = alignMap[align.value] || border; }\n\n          borderCells += cell(border, node.childNodes[i]);\n        }\n      }\n      return '\\n' + content + (borderCells ? '\\n' + borderCells : '');\n    }\n  },\n\n  {\n    filter: 'table',\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: ['thead', 'tbody', 'tfoot'],\n    replacement: function (content) {\n      return content;\n    }\n  },\n\n  // Fenced code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' &&\n             node.firstChild &&\n             node.firstChild.nodeName === 'CODE';\n    },\n    replacement: function(content, node) {\n      return '\\n\\n```\\n' + node.firstChild.textContent + '\\n```\\n\\n';\n    }\n  },\n\n  // Syntax-highlighted code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' &&\n             node.parentNode.nodeName === 'DIV' &&\n             highlightRegEx.test(node.parentNode.className);\n    },\n    replacement: function (content, node) {\n      var language = node.parentNode.className.match(highlightRegEx)[1];\n      return '\\n\\n```' + language + '\\n' + node.textContent + '\\n```\\n\\n';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.nodeName === 'DIV' &&\n             highlightRegEx.test(node.className);\n    },\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  }\n];\n","'use strict';\n\nmodule.exports = [\n  {\n    filter: 'p',\n    replacement: function (content) {\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'br',\n    replacement: function () {\n      return '  \\n';\n    }\n  },\n\n  {\n    filter: ['h1', 'h2', 'h3', 'h4','h5', 'h6'],\n    replacement: function(content, node) {\n      var hLevel = node.nodeName.charAt(1);\n      var hPrefix = '';\n      for(var i = 0; i < hLevel; i++) {\n        hPrefix += '#';\n      }\n      return '\\n\\n' + hPrefix + ' ' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'hr',\n    replacement: function () {\n      return '\\n\\n* * *\\n\\n';\n    }\n  },\n\n  {\n    filter: ['em', 'i'],\n    replacement: function (content) {\n      return '_' + content + '_';\n    }\n  },\n\n  {\n    filter: ['strong', 'b'],\n    replacement: function (content) {\n      return '**' + content + '**';\n    }\n  },\n\n  // Inline code\n  {\n    filter: function (node) {\n      var hasSiblings = node.previousSibling || node.nextSibling;\n      var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n      return node.nodeName === 'CODE' && !isCodeBlock;\n    },\n    replacement: function(content) {\n      return '`' + content + '`';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return node.nodeName === 'A' && node.getAttribute('href');\n    },\n    replacement: function(content, node) {\n      var titlePart = node.title ? ' \"'+ node.title +'\"' : '';\n      return '[' + content + '](' + node.getAttribute('href') + titlePart + ')';\n    }\n  },\n\n  {\n    filter: 'img',\n    replacement: function(content, node) {\n      var alt = node.alt || '';\n      var src = node.getAttribute('src') || '';\n      var title = node.title || '';\n      var titlePart = title ? ' \"'+ title +'\"' : '';\n      return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : '';\n    }\n  },\n\n  // Code blocks\n  {\n    filter: function (node) {\n      return node.nodeName === 'PRE' && node.firstChild.nodeName === 'CODE';\n    },\n    replacement: function(content, node) {\n      return '\\n\\n    ' + node.firstChild.textContent.replace(/\\n/g, '\\n    ') + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'blockquote',\n    replacement: function (content) {\n      content = this.trim(content);\n      content = content.replace(/\\n{3,}/g, '\\n\\n');\n      content = content.replace(/^/gm, '> ');\n      return '\\n\\n' + content + '\\n\\n';\n    }\n  },\n\n  {\n    filter: 'li',\n    replacement: function (content, node) {\n      content = content.replace(/^\\s+/, '').replace(/\\n/gm, '\\n    ');\n      var prefix = '*   ';\n      var parent = node.parentNode;\n      var index = Array.prototype.indexOf.call(parent.children, node) + 1;\n\n      prefix = /ol/i.test(parent.nodeName) ? index + '.  ' : '*   ';\n      return prefix + content;\n    }\n  },\n\n  {\n    filter: ['ul', 'ol'],\n    replacement: function (content, node) {\n      var strings = [];\n      for (var i = 0; i < node.childNodes.length; i++) {\n        strings.push(node.childNodes[i]._replacement);\n      }\n\n      if (/li/i.test(node.parentNode.nodeName)) {\n        return '\\n' + strings.join('\\n');\n      }\n      return '\\n\\n' + strings.join('\\n') + '\\n\\n';\n    }\n  },\n\n  {\n    filter: function (node) {\n      return this.isBlock(node);\n    },\n    replacement: function (content, node) {\n      return '\\n\\n' + this.outer(node, content) + '\\n\\n';\n    }\n  },\n\n  // Anything else!\n  {\n    filter: function () {\n      return true;\n    },\n    replacement: function (content, node) {\n      return this.outer(node, content);\n    }\n  }\n];","/**\n * This file automatically generated from `pre-publish.js`.\n * Do not manually edit.\n */\n\nmodule.exports = {\n  \"area\": true,\n  \"base\": true,\n  \"br\": true,\n  \"col\": true,\n  \"embed\": true,\n  \"hr\": true,\n  \"img\": true,\n  \"input\": true,\n  \"keygen\": true,\n  \"link\": true,\n  \"menuitem\": true,\n  \"meta\": true,\n  \"param\": true,\n  \"source\": true,\n  \"track\": true,\n  \"wbr\": true\n};\n"],"sourceRoot":"/source/"}